@import url('https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    body {
        font-family: 'Rubik', sans-serif;
        @apply text-slate-700;
        /* wizdi Soft Cloud Gradient */
        background: linear-gradient(135deg, #F5F9FF 0%, #E0F2FE 100%);
        background-attachment: fixed;
        min-height: 100vh;
    }

    /* כותרות בצבע המותג הכהה */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        color: #2B59C3 !important;
        /* wizdi-royal */
    }
}

@layer components {

    /* --- Magic Cards (Glass + Depth) - SCOPED --- */
    .card-glass {
        background: rgba(255, 255, 255, 0.8) !important;
        backdrop-filter: blur(12px) !important;
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.4) !important;
        box-shadow: 0 8px 32px 0 rgba(43, 89, 195, 0.05) !important;
        border-radius: 24px !important;
    }

    /* --- Rounded Inputs --- */
    input,
    textarea,
    select {
        background: #FFFFFF;
        border: 2px solid #E0F2FE;
        color: #2B59C3;
        border-radius: 16px;
        padding: 12px 16px;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    input:focus,
    textarea:focus,
    select:focus {
        background: #FFFFFF;
        border-color: #00C2FF;
        box-shadow: 0 0 0 4px rgba(0, 194, 255, 0.15);
        transform: translateY(-2px);
        outline: none;
    }

    /* --- THE JUICY BUTTONS ("Lip" Design) --- */

    /* .btn-lip-action (Hyper Lime) - For PRIMARY GO actions */
    .btn-lip-action {
        background: #8CE81C;
        color: #0d4200;
        border: none;
        border-bottom: 6px solid #65a30d;
        /* Thicker Lip */
        border-radius: 9999px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        transition: all 0.1s;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    .btn-lip-action:active {
        transform: translateY(6px);
        /* Move down by border width */
        border-bottom-width: 0px;
        margin-top: 6px;
        /* Maintain layout space */
        box-shadow: none;
    }

    .btn-lip-action:hover {
        background: #9ff038;
        filter: brightness(1.05);
    }

    /* .btn-lip-primary (Royal Blue) - For Navigation/Context */
    .btn-lip-primary {
        background: #2B59C3;
        color: white;
        border: none;
        border-bottom: 6px solid #1e40af;
        border-radius: 9999px;
        font-weight: 700;
        transition: all 0.1s;
    }

    .btn-lip-primary:active {
        transform: translateY(6px);
        border-bottom-width: 0px;
        margin-top: 6px;
    }

    /* Text Colors */
    .text-brand-royal {
        color: #2B59C3;
    }

    .text-brand-lime {
        color: #8CE81C;
    }


    /* --- Micro-Interactions --- */
    @keyframes wiggle {

        0%,
        100% {
            transform: rotate(-3deg);
        }

        50% {
            transform: rotate(3deg);
        }
    }

    .animate-wiggle {
        animation: wiggle 1s ease-in-out infinite;
    }

    @keyframes pop {
        0% {
            transform: scale(0.9);
        }

        50% {
            transform: scale(1.05);
        }

        100% {
            transform: scale(1);
        }
    }

    .animate-pop {
        animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* סרגל צד וניווט */
    aside,
    header {
        background: rgba(255, 255, 255, 0.4) !important;
        backdrop-filter: blur(16px) !important;
        border: none !important;
        border-bottom: 1px solid rgba(255, 255, 255, 0.3) !important;
    }
}

/* אנימציות */
@keyframes float {
    0% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(-5px);
    }

    100% {
        transform: translateY(0px);
    }
}

.animate-float {
    animation: float 4s ease-in-out infinite;
}

/* סרגל גלילה ראשי */
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: #B8D6F6;
    border-radius: 99px;
    border: 3px solid transparent;
    background-clip: content-box;
}

::-webkit-scrollbar-thumb:hover {
    background-color: #2B59C3;
}

/* Landing Page Animations */
@keyframes blob {
    0% {
        transform: translate(0px, 0px) scale(1);
    }

    33% {
        transform: translate(30px, -50px) scale(1.1);
    }

    66% {
        transform: translate(-20px, 20px) scale(0.9);
    }

    100% {
        transform: translate(0px, 0px) scale(1);
    }
}

.animate-blob {
    animation: blob 7s infinite;
}

.animation-delay-2000 {
    animation-delay: 2s;
}

.animation-delay-4000 {
    animation-delay: 4s;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
}

@keyframes progress {
    from {
        width: 0%;
    }

    to {
        width: 66%;
    }
}

.animate-progress {
    animation: progress 2s ease-out forwards;
}

@keyframes bounceSlow {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

.animate-bounce-slow {
    animation: bounceSlow 3s infinite ease-in-out;
}

.perspective-1000 {
    perspective: 1000px;
}

/* === תוספות עבור TeacherDashboard ו-Class Utilities ===
   הפרדנו את זה מהבלוק הקודם כדי שזה יעבוד תקין
*/

.glass {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

.custom-scrollbar::-webkit-scrollbar {
    width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
}


/* === TEACHER LESSON STYLES (V2) === */

.lesson-section {
    @apply space-y-4 mb-4;
}

.lesson-section h3 {
    @apply text-xl font-bold bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center gap-3 text-slate-800;
}

.teacher-script {
    @apply font-serif text-lg leading-relaxed text-slate-700 bg-amber-50/50 p-4 rounded-xl border-l-4 border-amber-300 italic;
}

.teacher-script strong {
    @apply text-amber-800 not-italic uppercase text-sm tracking-wider block mb-1;
}

.media-badge {
    @apply inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-bold border border-indigo-100 mt-2;
}

.slide-card {
    @apply bg-white p-5 rounded-2xl border border-slate-200 shadow-sm my-4;
}

/* AI Generated Images Styles */
.generated-visual {
    @apply relative mt-4;
}

.generated-visual.group {
    /* Tailwind group utility applied in JSX */
}

.generated-visual:hover {
    @apply opacity-100;
}

.generated-visual img {
    @apply w-full rounded-xl shadow-lg border-2 border-slate-100 transition-all;
}

.generated-visual:hover img {
    @apply shadow-2xl border-blue-200;
}

/* Image regeneration overlay */
.image-regen-overlay {
    @apply absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center gap-3;
}

.learning-objectives {
    @apply bg-blue-50/50 border border-blue-100 rounded-xl p-4 mb-4;
}

.learning-objectives ul {
    @apply list-disc pr-5 space-y-1 text-blue-800;
}

.management-tip {
    @apply bg-amber-50 border-l-4 border-amber-400 rounded-lg p-3 text-sm text-amber-900 font-medium mt-3;
}

.timing-badge {
    @apply inline-block bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold mb-2;
}

.diff-note {
    @apply bg-purple-50 border-l-4 border-purple-400 rounded-lg p-3 text-sm text-purple-900 mt-3;
}

.suggested-activities {
    @apply bg-green-50 border border-green-200 rounded-xl p-4 mt-3;
}

.suggested-activities ul {
    @apply list-none space-y-2 pr-0;
}

.facilitation-tips {
    @apply bg-blue-50 border border-blue-200 rounded-xl p-4 mt-3;
}

.facilitation-tips ul {
    @apply list-disc pr-5 space-y-1 text-blue-800;
}

.homework {
    @apply bg-purple-50 border border-purple-200 rounded-xl p-4 mt-3 text-purple-900;
}

.slide-card h4 {
    @apply font-bold text-lg text-slate-800 mb-3 border-b pb-2;
}

.board-points {
    @apply bg-slate-800 text-white p-4 rounded-xl my-3 shadow-lg font-medium;
}

.board-points strong {
    @apply text-slate-300 text-xs uppercase tracking-widest block mb-2;
}

.board-points ul {
    @apply list-disc list-inside space-y-1;
}

.wizdi-tool {
    @apply bg-blue-600 text-white p-4 rounded-xl shadow-lg flex items-center justify-between font-bold;
}

.takeaway {
    @apply text-xl font-bold text-center text-wizdi-royal bg-blue-50 p-6 rounded-2xl border-2 border-blue-100 mt-4 shadow-sm;
}

/* === Rich Text Editor Styles === */
.rte-container {
    @apply bg-white border-2 border-[#E0F2FE] rounded-xl transition-all overflow-hidden;
}

.rte-container:focus-within {
    border-color: #00C2FF;
    box-shadow: 0 0 0 4px rgba(0, 194, 255, 0.15);
}

.rte-toolbar {
    @apply bg-slate-50/80 backdrop-blur-sm border-b border-slate-200 p-2 flex flex-wrap gap-1 items-center;
}

.rte-toolbar-btn {
    @apply p-2 rounded-lg text-slate-500 hover:bg-white hover:text-[#2B59C3] transition-all cursor-pointer;
}

.rte-toolbar-btn.active {
    @apply bg-[#00C2FF]/20 text-[#2B59C3];
}

.rte-toolbar-btn:disabled {
    @apply opacity-50 cursor-not-allowed;
}

.rte-toolbar-separator {
    @apply w-px h-6 bg-slate-300 mx-1.5 self-center;
}

/* TipTap editor content styles */
.ProseMirror {
    @apply p-4 outline-none text-slate-800 leading-relaxed;
    min-height: inherit;
}

.ProseMirror h2 {
    @apply text-xl font-bold mb-3 mt-4;
    color: #2B59C3 !important;
}

.ProseMirror h3 {
    @apply text-lg font-bold mb-2 mt-3;
    color: #2B59C3 !important;
}

.ProseMirror ul {
    @apply list-disc pr-5 space-y-1 mb-3;
}

.ProseMirror ol {
    @apply list-decimal pr-5 space-y-1 mb-3;
}

.ProseMirror p {
    @apply mb-3;
}

.ProseMirror p:last-child {
    @apply mb-0;
}

.ProseMirror a {
    @apply text-blue-600 underline hover:text-blue-800;
}

/* Placeholder */
.ProseMirror p.is-editor-empty:first-child::before {
    @apply text-slate-400;
    content: attr(data-placeholder);
    float: right;
    height: 0;
    pointer-events: none;
}

/* RTL support */
[dir="rtl"] .ProseMirror {
    @apply text-right;
}

[dir="rtl"] .ProseMirror ul,
[dir="rtl"] .ProseMirror ol {
    @apply pr-5 pl-0;
}