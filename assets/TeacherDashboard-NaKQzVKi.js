const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CoursePlayer-Bq7ZKb2I.js","assets/index-1x3sw4DL.js","assets/index-D5UJlrDR.css","assets/CoursePlayer-Fd0xVSp_.css","assets/TeacherControlCenter-D8q0RWs-.js","assets/IconArrowRight-j5ND1Yvb.js","assets/IconTrendingDown-CUFgg3Ua.js","assets/IconUsers-Br9myKfl.js","assets/IconChartBar-C9Gh53Hd.js","assets/IconTrendingUp-i0z6cZ8R.js","assets/IconActivity-BxB4o3hw.js","assets/IconMail-BDnpP6ds.js","assets/IconBrain-B9doffEc.js","assets/TaskDetailDashboard-9g3nrhaH.js","assets/analyticsService-CDbP7cGH.js","assets/IconChevronUp-CahN5a1t.js","assets/IconChevronDown-BNmdE9By.js","assets/IconCopy-BTB5ujr3.js","assets/IconUser-D5NvVB3k.js","assets/IconMessageCircle-CLkSXjte.js","assets/IconCalendar-DSCrS-DW.js","assets/IconTrash-CoaUmbon.js"])))=>i.map(i=>d[i]);
import{c as Pe,n as B,p as _,aM as Ee,bl as pe,ax as ge,bm as vt,av as Ks,aw as se,r,j as e,C as ue,a6 as oe,bn as yt,bo as kt,bp as zt,b as Y,d as ne,bq as Gs,br as Os,bs as St,bt as Ct,bu as Ke,G as It,bv as At,bw as _t,H as Dt,bx as Tt,b0 as ts,D as $t,E as Et,by as Lt,bz as me,bA as ie,bB as Ie,al as Ye,Z as Ae,P as Bs,b4 as Fs,aj as Vs,aJ as Le,I as Qe,bC as Mt,a5 as Ze,k as te,V as _e,bD as Rt,bE as qs,bF as es,X as J,Y as K,e as Pt,bG as Gt,R as de,aa as Ot,O as Bt,bH as Ft,bI as Vt,bJ as qt,bK as Ut,_ as as,bL as Ht}from"./index-1x3sw4DL.js";import{I as Us}from"./IconBrain-B9doffEc.js";import{I as Me}from"./IconChartBar-C9Gh53Hd.js";import{I as Xt}from"./IconTrendingUp-i0z6cZ8R.js";import{S as Wt}from"./ShareModal-DLbWhIEc.js";import{I as Jt}from"./IconMail-BDnpP6ds.js";import"./IconCalendar-DSCrS-DW.js";import"./IconUsers-Br9myKfl.js";import"./IconCopy-BTB5ujr3.js";/**
 * @license @tabler/icons-react v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11",key:"svg-0"}]],Yt=Pe("outline","bolt","Bolt",Kt);/**
 * @license @tabler/icons-react v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"M20.945 11a9 9 0 1 1 -3.284 -5.997l-2.655 2.392a5.5 5.5 0 1 0 2.119 6.605h-4.125v-3h7.945z",key:"svg-0"}]],Re=Pe("outline","brand-google","BrandGoogle",Qt);/**
 * @license @tabler/icons-react v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["path",{d:"M18.364 19.364a9 9 0 1 0 -12.728 0",key:"svg-0"}],["path",{d:"M15.536 16.536a5 5 0 1 0 -7.072 0",key:"svg-1"}],["path",{d:"M12 13m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]],ea=Pe("outline","broadcast","Broadcast",Zt);/**
 * @license @tabler/icons-react v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M9 5h10a2 2 0 0 1 2 2v10m-2 2h-14a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M3 7l9 6l.565 -.377m2.435 -1.623l6 -4",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]],ta=Pe("outline","mail-off","MailOff",sa),Hs={updateStreak:async a=>{if(!a)return{streak:0};const c=B(_,"users",a),x=await pe(c);if(!x.exists())return{streak:0};const o=x.data(),l=new Date().toISOString().split("T")[0],p=o.lastLearnDate||"";if(p===l)return{streak:o.streak||0};const w=new Date;w.setDate(w.getDate()-1);const D=w.toISOString().split("T")[0];let I=o.streak||0,j="";return p===D?(I+=1,j="Streak Increased! ðŸ”¥"):(I=1,(o.streak||0)>0?j="Streak Reset ðŸ˜¢":j="First Day! ðŸš€"),await Ee(c,{streak:I,lastLearnDate:l,lastActive:ge()}),{streak:I,message:j}},addXP:async(a,c)=>{if(!a||c<=0)return;const x=B(_,"users",a);await Ee(x,{xp:vt(c),lastActive:ge()})},getUserProfile:async a=>{if(!a)return null;const c=await pe(B(_,"users",a));return c.exists()?c.data():null},updateEmailReportsSetting:async(a,c)=>{if(!a)return;const x=B(_,"users",a);await Ee(x,{emailReportsEnabled:c})}},aa=(a,c)=>{switch(c){case"×”×‘× ×”":return{difficulty:"Easy",bloom_level:"Remember/Understand",system_instruction:`Topic: ${a}. Break down complex terms. Use simple language. Provide immediate positive feedback.`,tone:"Encouraging",preferred_modules:["memory_game","sorting","simple_quiz"],focus:"Core Concepts & Visuals"};case"×”×¢×ž×§×”":return{difficulty:"Hard",bloom_level:"Analyze/Evaluate",system_instruction:`Topic: ${a}. Ask open-ended questions that require synthesis. Reduce hints.`,tone:"Intellectual",preferred_modules:["open_question","logic_ordering","case_study"],format:"Escape Room / Riddle",extra:"Critical Thinking Questions"};case"×™×™×©×•×":default:return{difficulty:"Medium",bloom_level:"Apply/Analyze",system_instruction:`Topic: ${a}. Standard Curriculum. Balanced approach.`,tone:"Balanced",preferred_modules:["multiple_choice","matching","short_answer"]}}},la=async(a,c,x,o,l)=>{if(!x||l.length===0)throw new Error("Missing topic or students.");const p=aa(x,o);try{const w=await Ks(se(_,"lesson_generation_queue"),{status:"pending",createdAt:ge(),teacherId:a,classId:c,topic:x,groupType:o,config:p,studentIds:l,priority:o==="×”×‘× ×”"?"high":"normal"});return console.log(`Job enqueued: ${w.id} for ${o} group.`),w.id}catch(w){throw console.error("Error queueing lesson generation:",w),w}},ra=({classId:a,teacherId:c,students:x,onAssignmentCreated:o})=>{const l=x.filter(i=>i.score<60),p=x.filter(i=>i.score>=60&&i.score<90),w=x.filter(i=>i.score>=90),D=[{type:"×”×‘× ×”",label:"×”×‘× ×”",icon:yt,data:l,color:"bg-blue-50 border-blue-200 text-blue-700",description:"×¦×™×•× ×™× × ×ž×•×›×™×, ×–×§×•×§×™× ×œ×¤×™×¨×•×§ ×œ×’×•×¨×ž×™× ×•×¢×™×“×•×“."},{type:"×™×™×©×•×",label:"×™×™×©×•×",icon:kt,data:p,color:"bg-amber-50 border-amber-200 text-amber-700",description:"×§×¦×‘ ×¨×’×™×œ, ×ª×•×›× ×™×ª ×œ×™×ž×•×“×™× ×¡×˜× ×“×¨×˜×™×ª."},{type:"×”×¢×ž×§×”",label:"×”×¢×ž×§×”",icon:zt,data:w,color:"bg-purple-50 border-purple-200 text-purple-700",description:"×ž×¦×˜×™×™× ×™×, ×–×§×•×§×™× ×œ×—×©×™×‘×” ×‘×™×§×•×¨×ª×™×ª ×•××ª×’×¨."}],[I,j]=r.useState(null),[L,S]=r.useState(""),[R,M]=r.useState(!1),F=i=>{j(i),S("")},u=async()=>{var T;if(!I||!L)return;const i=((T=D.find(v=>v.type===I))==null?void 0:T.data.map(v=>v.id))||[];if(i.length===0)return alert("××™×Ÿ ×ª×œ×ž×™×“×™× ×‘×§×‘×•×¦×” ×–×•.");M(!0);try{await la(c,a,L,I,i),alert(`×”×ž×©×™×ž×” '${L}' × ×©×œ×—×” ×œ×™×¦×™×¨×” ×¢×‘×•×¨ ×§×‘×•×¦×ª ${I}!`),o&&o(),j(null)}catch(v){console.error(v),alert("×©×’×™××” ×‘×™×¦×™×¨×ª ×”×ž×©×™×ž×”.")}finally{M(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 text-slate-800",children:[e.jsx(oe,{className:"w-6 h-6 text-indigo-600"}),"×—×œ×•×§×” ×—×›×ž×” ×œ×§×‘×•×¦×•×ª"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:D.map(i=>e.jsxs("div",{className:`p-6 rounded-2xl border ${i.color} relative overflow-hidden transition-all hover:shadow-md`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(i.icon,{className:"w-24 h-24"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i.icon,{className:"w-6 h-6"}),e.jsx("h4",{className:"text-lg font-black",children:i.label})]}),e.jsxs("span",{className:"bg-white/50 px-3 py-1 rounded-full text-xs font-bold shadow-sm backdrop-blur-sm",children:[i.data.length," ×ª×œ×ž×™×“×™×"]})]}),e.jsx("p",{className:"text-sm opacity-80 mb-6 font-medium leading-relaxed",children:i.description}),e.jsxs("button",{onClick:()=>F(i.type),disabled:i.data.length===0,className:"w-full py-3 bg-white/80 hover:bg-white text-slate-800 font-bold rounded-xl shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Y,{className:"w-4 h-4"}),"×¦×•×¨ ×¤×¢×™×œ×•×ª ×œ×§×‘×•×¦×”"]})]}),e.jsxs("div",{className:"flex -space-x-2 space-x-reverse mt-4 relative z-10",children:[i.data.slice(0,5).map((T,v)=>e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 border-2 border-white flex items-center justify-center text-xs font-bold text-slate-500",title:T.name,children:T.name.charAt(0)},v)),i.data.length>5&&e.jsxs("div",{className:"w-8 h-8 rounded-full bg-slate-100 border-2 border-white flex items-center justify-center text-xs font-bold text-slate-500",children:["+",i.data.length-5]})]})]},i.type))}),I&&ue.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center p-4",dir:"rtl",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl p-6 animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-slate-800",children:"×™×¦×™×¨×ª ×¤×¢×™×œ×•×ª ×œ×§×‘×•×¦×”"}),e.jsx("button",{onClick:()=>j(null),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(ne,{className:"w-5 h-5 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-indigo-900 text-sm",children:[e.jsxs("span",{className:"font-bold block mb-1",children:["×”×§×‘×•×¦×” ×”× ×‘×—×¨×ª: ",I==="×”×‘× ×”"?"×”×‘× ×”":I==="×”×¢×ž×§×”"?"×”×¢×ž×§×”":"×™×™×©×•×"]}),"×”×ž×¢×¨×›×ª ×ª×ª××™× ××•×˜×•×ž×˜×™×ª ××ª ×¨×ž×ª ×”×§×•×©×™, ×¡×’× ×•×Ÿ ×”×©××œ×•×ª ×•×”×ž×©×•×‘ ×¢×‘×•×¨ ×ª×œ×ž×™×“×™× ××œ×•."]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"×‘××™×–×” × ×•×©× × ×ª×ž×§×“ ×”×™×•×?"}),e.jsx("input",{type:"text",className:"w-full border border-slate-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"×œ×“×•×’×ž×”: ×”×ž×”×¤×›×” ×”×¦×¨×¤×ª×™×ª, ×©×‘×¨×™× ×¢×©×¨×•× ×™×™×...",value:L,onChange:i=>S(i.target.value),autoFocus:!0})]}),e.jsxs("button",{onClick:u,disabled:R||!L,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all flex justify-center items-center gap-2 mt-4 disabled:opacity-50",children:[R?e.jsx("span",{className:"animate-spin",children:"â³"}):e.jsx(Y,{className:"w-5 h-5"}),"×©×’×¨ ×œ-AI ×•×”×§×¦×” ×œ×ª×œ×ž×™×“×™×"]})]})]})}),document.body)]})},ia=({studentId:a,studentName:c,onClose:x})=>{const[o,l]=r.useState(null),[p,w]=r.useState(null),[D,I]=r.useState(null),[j,L]=r.useState(null),[S,R]=r.useState(!0),[M,F]=r.useState(null);if(r.useEffect(()=>{a&&(async()=>{R(!0),F(null);try{const y=B(_,"users",a,"profile","stats"),N=await pe(y);N.exists()&&l(N.data());const q=B(_,"users",a,"profile","error_fingerprint"),U=await pe(q);U.exists()&&w(U.data().errorTags||{});const be=B(_,"users",a,"profile","proficiency_vector"),Z=await pe(be);Z.exists()&&I(Z.data().topics||{});const fe=await Tt(a);L(fe)}catch(y){console.error("Failed to fetch student profile:",y),F("×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×•×¤×™×œ ×”×ª×œ×ž×™×“")}finally{R(!1)}})()},[a]),S)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full mx-auto mb-2"}),e.jsx("p",{className:"text-slate-500",children:"×˜×•×¢×Ÿ ×¤×¨×•×¤×™×œ..."})]});if(M)return e.jsxs("div",{className:"p-6 text-center text-red-500",children:[e.jsx(Gs,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{children:M})]});if(!o)return e.jsxs("div",{className:"p-6 text-center text-slate-500",children:[e.jsx(Us,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"font-bold",children:"××™×Ÿ × ×ª×•× ×™ ×¤×¨×•×¤×™×œ"}),e.jsx("p",{className:"text-sm mt-1",children:"×”×ª×œ×ž×™×“ ×˜×¨× ×”×ª×—×™×œ ×œ×œ×ž×•×“"})]});const{performance:u,behavioral:i,engagement:T}=o,v=(i==null?void 0:i.media_preference)||{text:0,video:0,gamified:0},V=v.text+v.video+v.gamified||1,Q=v.video>v.text&&v.video>v.gamified?"×—×–×•×ª×™":v.gamified>v.text?"××™× ×˜×¨××§×˜×™×‘×™":"×˜×§×¡×˜×•××œ×™";return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",dir:"rtl",children:[e.jsx("div",{className:"bg-gradient-to-l from-indigo-600 to-purple-600 p-5 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(Us,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"×¤×¨×•×¤×™×œ ×œ×ž×™×“×” ××“×¤×˜×™×‘×™"}),c&&e.jsx("p",{className:"text-white/80 text-sm",children:c})]})]}),x&&e.jsx("button",{onClick:x,className:"p-2 hover:bg-white/20 rounded-lg transition",children:"âœ•"})]})}),e.jsxs("div",{className:"p-5 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("section",{children:[e.jsxs("h4",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-indigo-500"}),"×ž×“×“×™ ×‘×™×¦×•×¢"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(De,{label:"×“×™×•×§ ×›×œ×œ×™",value:`${Math.round(((u==null?void 0:u.global_accuracy_rate)||0)*100)}%`,color:(u==null?void 0:u.global_accuracy_rate)>.7?"green":(u==null?void 0:u.global_accuracy_rate)>.5?"yellow":"red",icon:e.jsx(Os,{className:"w-5 h-5"})}),e.jsx(De,{label:"×–×ž×Ÿ ×ª×’×•×‘×”",value:`${Math.round((u==null?void 0:u.average_response_time_sec)||0)}s`,color:"blue",icon:e.jsx(St,{className:"w-5 h-5"})}),e.jsx(De,{label:"×©××œ×•×ª",value:(u==null?void 0:u.total_questions_attempted)||0,color:"purple",icon:e.jsx(Ct,{className:"w-5 h-5"})}),e.jsx(De,{label:"×©×™×¢×•×¨×™×",value:(T==null?void 0:T.completed_lessons_count)||0,color:"indigo",icon:e.jsx(Ke,{className:"w-5 h-5"})})]})]}),e.jsxs("section",{children:[e.jsxs("h4",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(Xt,{className:"w-5 h-5 text-green-500"}),"×“×¤×•×¡×™ ×”×ª× ×”×’×•×ª"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"×ª×œ×•×ª ×‘×¨×ž×–×™×"}),e.jsxs("span",{className:`text-sm font-bold ${((i==null?void 0:i.hint_dependency_score)||0)>.5?"text-amber-600":"text-green-600"}`,children:[Math.round(((i==null?void 0:i.hint_dependency_score)||0)*100),"%"]})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${((i==null?void 0:i.hint_dependency_score)||0)>.5?"bg-amber-500":"bg-green-500"}`,style:{width:`${((i==null?void 0:i.hint_dependency_score)||0)*100}%`}})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:((i==null?void 0:i.hint_dependency_score)||0)>.5?"âš ï¸ ×ª×œ×•×ª ×’×‘×•×”×” - ×ž×•×ž×œ×¥ ×œ×¢×•×“×“ ×¢×¦×ž××•×ª":"âœ… ×ª×œ×•×ª × ×ž×•×›×” - ×¤×•×ª×¨ ×‘××•×¤×Ÿ ×¢×¦×ž××™"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"×”×ª×ž×“×” ×‘× ×™×¡×™×•× ×•×ª"}),e.jsxs("span",{className:`text-sm font-bold ${((i==null?void 0:i.retry_persistence)||0)>.5?"text-green-600":"text-amber-600"}`,children:[Math.round(((i==null?void 0:i.retry_persistence)||0)*100),"%"]})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${((i==null?void 0:i.retry_persistence)||0)>.5?"bg-green-500":"bg-amber-500"}`,style:{width:`${((i==null?void 0:i.retry_persistence)||0)*100}%`}})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:((i==null?void 0:i.retry_persistence)||0)>.5?"âœ… ×”×ª×ž×“×” ×’×‘×•×”×” - ×œ× ×ž×•×•×ª×¨ ×‘×§×œ×•×ª":"âš ï¸ × ×•×˜×” ×œ×•×•×ª×¨ - ×ž×•×ž×œ×¥ ×œ×¢×•×“×“"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h4",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(It,{className:"w-5 h-5 text-amber-500"}),"×¡×’× ×•×Ÿ ×œ×ž×™×“×” ×ž×•×¢×“×£: ",e.jsx("span",{className:"text-indigo-600",children:Q})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ss,{label:"×˜×§×¡×˜",value:v.text/V,icon:e.jsx(Ke,{className:"w-4 h-4"}),color:"blue"}),e.jsx(ss,{label:"×•×™×“××•",value:v.video/V,icon:e.jsx(At,{className:"w-4 h-4"}),color:"red"}),e.jsx(ss,{label:"×ž×©×—×§×™",value:v.gamified/V,icon:e.jsx(_t,{className:"w-4 h-4"}),color:"green"})]})]}),p&&Object.keys(p).length>0&&e.jsxs("section",{children:[e.jsxs("h4",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(Gs,{className:"w-5 h-5 text-red-500"}),"×“×¤×•×¡×™ ×©×’×™××•×ª × ×¤×•×¦×™×"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(p).sort(([,b],[,y])=>y-b).slice(0,5).map(([b,y])=>e.jsxs("span",{className:"px-3 py-1 bg-red-50 text-red-700 rounded-full text-sm font-medium border border-red-200",children:[na(b)," (",y,")"]},b))})]}),D&&Object.keys(D).length>0&&e.jsxs("section",{children:[e.jsxs("h4",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-purple-500"}),"×©×œ×™×˜×” ×œ×¤×™ × ×•×©××™ ×ª×›× ×™×ª ×”×œ×™×ž×•×“×™×"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(D).filter(([b])=>!b.startsWith("bloom_")&&b!=="general").sort(([,b],[,y])=>y-b).slice(0,8).map(([b,y])=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600 w-36 truncate",title:b,children:b}),e.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full transition-all ${y>.8?"bg-green-500":y>.5?"bg-yellow-500":"bg-red-400"}`,style:{width:`${Math.round(y*100)}%`}})}),e.jsxs("span",{className:`text-sm font-bold w-12 text-right ${y>.8?"text-green-600":y>.5?"text-yellow-600":"text-red-500"}`,children:[Math.round(y*100),"%"]})]},b))}),Object.entries(D).some(([b])=>b.startsWith("bloom_")||b==="general")&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100",children:[e.jsxs("p",{className:"text-xs text-slate-400 mb-2 flex items-center gap-1",children:[e.jsx(Os,{className:"w-3 h-3"}),"×¨×ž×•×ª ×‘×œ×•× (×ª×•×›×Ÿ ×œ×œ× ×ž×™×¤×•×™ ×œ×ª×›× ×™×ª)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(D).filter(([b])=>b.startsWith("bloom_")||b==="general").map(([b,y])=>{const N=b==="general"?"×›×œ×œ×™":b.replace("bloom_","").replace("knowledge","×™×“×¢").replace("comprehension","×”×‘× ×”").replace("application","×™×™×©×•×").replace("analysis","× ×™×ª×•×—").replace("synthesis","×™×¦×™×¨×”").replace("evaluation","×”×¢×¨×›×”");return e.jsxs("span",{className:"text-xs px-2 py-1 bg-slate-100 rounded-full text-slate-500",children:[N,": ",Math.round(y*100),"%"]},b)})})]})]}),j&&j.counts&&e.jsxs("section",{children:[e.jsxs("h4",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(Dt,{className:"w-5 h-5 text-cyan-500"}),"×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×ª××ž×”"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-center",children:[e.jsx(Te,{label:"×¢×“×›×•× ×™ BKT",value:j.counts.bkt_update||0}),e.jsx(Te,{label:"×•×¨×™×× ×˜×™×",value:j.counts.variant_selected||0}),e.jsx(Te,{label:"Challenge Mode",value:j.counts.challenge_mode||0}),e.jsx(Te,{label:"×ª×™×§×•× ×™×",value:j.counts.remediation_injected||0})]})]}),(T==null?void 0:T.last_active_at)&&e.jsxs("p",{className:"text-xs text-slate-400 text-center pt-2 border-t",children:["×¤×¢×™×œ×•×ª ××—×¨×•× ×”: ",oa(T.last_active_at)]})]})]})},De=({label:a,value:c,color:x,icon:o})=>{const l={green:"bg-green-50 text-green-700 border-green-200",yellow:"bg-yellow-50 text-yellow-700 border-yellow-200",red:"bg-red-50 text-red-700 border-red-200",blue:"bg-blue-50 text-blue-700 border-blue-200",purple:"bg-purple-50 text-purple-700 border-purple-200",indigo:"bg-indigo-50 text-indigo-700 border-indigo-200"};return e.jsxs("div",{className:`p-3 rounded-xl border ${l[x]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:[o,e.jsx("span",{className:"text-xs font-medium",children:a})]}),e.jsx("div",{className:"text-2xl font-black",children:c})]})},ss=({label:a,value:c,icon:x,color:o})=>{const l={blue:"bg-blue-100 text-blue-700",red:"bg-red-100 text-red-700",green:"bg-green-100 text-green-700"},p=Math.round(c*100);return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-xl ${l[o]}`,children:[x,e.jsx("span",{className:"text-sm font-medium",children:a}),e.jsxs("span",{className:"font-bold",children:[p,"%"]})]})},Te=({label:a,value:c})=>e.jsxs("div",{className:"bg-slate-100 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-black text-slate-700",children:c}),e.jsx("div",{className:"text-xs text-slate-500",children:a})]}),na=a=>({calculation_error:"×©×’×™××ª ×—×™×©×•×‘",sign_error:"×©×’×™××ª ×¡×™×ž×Ÿ",conceptual_error:"×©×’×™××” ×ž×•×©×’×™×ª",order_error:"×¡×“×¨ ×©×’×•×™",reading_error:"×©×’×™××ª ×§×¨×™××”",careless_error:"×©×’×™××ª ×—×•×¡×¨ ×ª×©×•×ž×ª ×œ×‘"})[a]||a,oa=a=>a?(a.toDate?a.toDate():new Date(a)).toLocaleDateString("he-IL",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"×œ× ×™×“×•×¢",da=()=>{const{googleClassroomToken:a,connectClassroom:c}=ts();return a?e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg border border-green-200",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-bold",children:"×ž×—×•×‘×¨ ×œ×’×•×’×œ ×§×œ××¡×¨×•×"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}):e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg border border-gray-200 hover:bg-gray-50 transition-all shadow-sm group",children:[e.jsx(Re,{className:"w-5 h-5 text-gray-500 group-hover:text-amber-500 transition-colors"}),e.jsx("span",{className:"text-sm font-bold",children:"×—×‘×¨ ××ª Google Classroom"})]})},$e="https://classroom.googleapis.com/v1",Xs={async listCourses(a){const c=await fetch(`${$e}/courses?courseStates=ACTIVE`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!c.ok)throw new Error(`Failed to list courses: ${c.statusText}`);return(await c.json()).courses||[]},async createAssignment(a,c,x){const o=await fetch(`${$e}/courses/${c}/courseWork`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(x)});if(!o.ok)throw new Error(`Failed to create assignment: ${o.statusText}`);return await o.json()},async listSubmissions(a,c,x){const o=await fetch(`${$e}/courses/${c}/courseWork/${x}/studentSubmissions`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Failed to list submissions: ${o.statusText}`);return(await o.json()).studentSubmissions||[]},async patchGrade(a,c,x,o,l){const p=await fetch(`${$e}/courses/${c}/courseWork/${x}/studentSubmissions/${o}?updateMask=assignedGrade,draftGrade`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({assignedGrade:l,draftGrade:l})});if(!p.ok)throw new Error(`Failed to update grade: ${p.statusText}`);return await p.json()}},ca=({isOpen:a,onClose:c,examTitle:x,examId:o})=>{const{googleClassroomToken:l}=ts(),[p,w]=r.useState([]),[D,I]=r.useState(!1),[j,L]=r.useState(""),[S,R]=r.useState(!1);r.useEffect(()=>{a&&l&&M()},[a,l]);const M=async()=>{if(l){I(!0);try{const u=await Xs.listCourses(l);w(u)}catch(u){console.error(u),alert("×©×’×™××” ×‘×˜×¢×™× ×ª ×”×§×•×¨×¡×™× ×ž×§×œ××¡×¨×•×")}finally{I(!1)}}},F=async()=>{if(!(!j||!l)){R(!0);try{const u=`${window.location.origin}/student?exam=${o}`;await Xs.createAssignment(l,j,{title:x,description:"×× × ×”×™×›× ×¡×• ×œ×§×™×©×•×¨ ×”×ž×¦×•×¨×£ ×›×“×™ ×œ×‘×¦×¢ ××ª ×”×ž×‘×—×Ÿ. ×‘×”×¦×œ×—×”!",workType:"ASSIGNMENT",state:"PUBLISHED",maxPoints:100,materials:[{link:{url:u,title:`×ž×‘×—×Ÿ: ${x}`}}]}),alert("×”×ž×©×™×ž×” × ×•×¦×¨×” ×‘×”×¦×œ×—×” ×‘-Google Classroom!"),c()}catch(u){console.error(u),alert("×©×’×™××” ×‘×™×¦×™×¨×ª ×”×ž×©×™×ž×”")}finally{R(!1)}}};return a?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in",children:[e.jsxs("div",{className:"bg-green-50 p-4 border-b border-green-100 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(Re,{className:"w-6 h-6"}),e.jsx("h2",{className:"font-bold text-lg",children:"×©×™×•×š ×œ-Google Classroom"})]}),e.jsx("button",{onClick:c,className:"p-1 hover:bg-green-100 rounded-full text-green-700 transition-colors",children:e.jsx($t,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-gray-700 mb-1",children:"×ž×‘×—×Ÿ × ×‘×—×¨:"}),e.jsx("p",{className:"text-gray-600 bg-gray-50 p-2 rounded-lg border",children:x})]}),l?D?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"×‘×—×¨ ×›×™×ª×” (Course):"}),e.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-xl outline-none focus:border-green-500 bg-white",value:j,onChange:u=>L(u.target.value),children:[e.jsx("option",{value:"",children:"-- ×‘×—×¨ ×›×™×ª×” --"}),p.map(u=>e.jsxs("option",{value:u.id,children:[u.name," ",u.section?`- ${u.section}`:""]},u.id))]})]}),e.jsx("button",{onClick:F,disabled:!j||S,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${!j||S?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 shadow-lg hover:shadow-xl"}`,children:S?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"}),"×™×•×¦×¨ ×ž×©×™×ž×”..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-5 h-5"}),"×¦×•×¨ ×ž×©×™×ž×” ×‘×§×œ××¡×¨×•×"]})})]}):e.jsx("div",{className:"text-center py-6 text-gray-500",children:"×× × ×”×ª×—×‘×¨ ×œ×—×©×‘×•×Ÿ ×”×’×•×’×œ ×©×œ×š ×›×“×™ ×œ×”×ž×©×™×š."})]})]})}):null},Ws=de.lazy(()=>as(()=>import("./CoursePlayer-Bq7ZKb2I.js").then(a=>a.j),__vite__mapDeps([0,1,2,3])));de.lazy(()=>as(()=>import("./TeacherControlCenter-D8q0RWs-.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12])).then(a=>({default:a.TeacherControlCenter})));const xa=de.lazy(()=>as(()=>import("./TaskDetailDashboard-9g3nrhaH.js"),__vite__mapDeps([13,1,2,14,6,15,16,17,18,7,8,19,20,21,5,12,9,10])).then(a=>({default:a.TaskDetailDashboard}))),Js=["×›×™×ª×” ××³","×›×™×ª×” ×‘×³","×›×™×ª×” ×’×³","×›×™×ª×” ×“×³","×›×™×ª×” ×”×³","×›×™×ª×” ×•×³","×›×™×ª×” ×–×³","×›×™×ª×” ×—×³","×›×™×ª×” ×˜×³","×›×™×ª×” ×™×³","×›×™×ª×” ×™×´×","×›×™×ª×” ×™×´×‘","×ž×›×™× ×”","×¡×˜×•×“× ×˜×™×"],O=a=>a?a.trim().replace(/[×³`Â´]/g,"'"):"",ma=({student:a,onClose:c})=>{const x=a.analytics,[o,l]=r.useState("ai");return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",dir:"rtl",children:e.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-3xl shadow-2xl overflow-hidden animate-scale-in",children:[e.jsxs("div",{className:"bg-gradient-to-l from-wizdi-royal to-wizdi-cyan p-6 text-white flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(oe,{className:"w-8 h-8 opacity-80"})," × ×™×ª×•×— ×‘×™×¦×•×¢×™×"]}),e.jsxs("p",{className:"opacity-80 text-sm mt-1",children:["× ×™×ª×•×— ×¢×‘×•×¨: ",a.name]})]}),e.jsx("button",{onClick:c,className:"hover:bg-white/20 p-2 rounded-full transition-colors",children:e.jsx(ne,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex border-b border-slate-200",children:[e.jsxs("button",{onClick:()=>l("ai"),className:`flex-1 py-3 px-4 text-sm font-bold transition-colors ${o==="ai"?"text-wizdi-royal border-b-2 border-wizdi-royal bg-wizdi-royal/5":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(Y,{className:"w-4 h-4 inline ml-2"}),"× ×™×ª×•×— AI"]}),e.jsxs("button",{onClick:()=>l("adaptive"),className:`flex-1 py-3 px-4 text-sm font-bold transition-colors ${o==="adaptive"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(oe,{className:"w-4 h-4 inline ml-2"}),"×¤×¨×•×¤×™×œ ××“×¤×˜×™×‘×™"]})]}),o==="ai"&&x?e.jsxs("div",{className:"p-4 md:p-8 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex gap-4 mb-8 flex-wrap",children:[e.jsxs("div",{className:"bg-wizdi-royal/10 text-wizdi-royal px-4 py-2 rounded-xl font-bold border border-wizdi-royal/20 flex items-center gap-2",children:["×ž×¢×•×¨×‘×•×ª: ",x.engagementScore,"%"]}),x.learningMetrics&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-100 text-slate-700 px-4 py-2 rounded-xl font-bold border border-slate-200 flex items-center gap-2",children:["×©×™×ž×•×© ×‘×¨×ž×–×™×: ",Math.round((x.learningMetrics.hintUsageRate||0)*100),"%"]}),e.jsxs("div",{className:"bg-slate-100 text-slate-700 px-4 py-2 rounded-xl font-bold border border-slate-200 flex items-center gap-2",children:["×”×©×œ×ž×”: ",Math.round((x.learningMetrics.completionRate||0)*100),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-wizdi-lime/10 p-6 rounded-3xl border border-wizdi-lime/20",children:[e.jsxs("h4",{className:"text-wizdi-lime font-bold mb-4 flex items-center gap-2 text-lg",children:[e.jsx(te,{className:"w-5 h-5"})," ×ž×™×•×ž× ×•×™×•×ª ×—×–×§×•×ª"]}),e.jsx("ul",{className:"space-y-3",children:x.strengths.map((p,w)=>e.jsxs("li",{className:"flex gap-3 text-slate-700 leading-relaxed font-bold opacity-80 text-sm",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-wizdi-lime rounded-full mt-2 shrink-0"}),p]},w))})]}),e.jsxs("div",{className:"bg-amber-50 p-6 rounded-3xl border border-amber-100",children:[e.jsxs("h4",{className:"text-amber-600 font-bold mb-4 flex items-center gap-2 text-lg",children:[e.jsx(Le,{className:"w-5 h-5"})," × ×•×©××™× ×œ×—×™×–×•×§"]}),e.jsx("ul",{className:"space-y-3",children:x.weaknesses.map((p,w)=>e.jsxs("li",{className:"flex gap-3 text-slate-700 leading-relaxed font-bold opacity-80 text-sm",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mt-2 shrink-0"}),p]},w))})]})]}),e.jsxs("div",{className:"bg-wizdi-gold/10 p-6 rounded-3xl border border-wizdi-gold/20 flex gap-4 items-start",children:[e.jsx("div",{className:"bg-white p-3 rounded-full shadow-lg text-wizdi-gold shrink-0",children:e.jsx(Y,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-wizdi-royal font-bold text-lg mb-1",children:"× ×•×©× ×ž×•×ž×œ×¥ ×œ×ª×¨×’×•×œ"}),e.jsx("p",{className:"text-slate-700 leading-relaxed opacity-90",children:x.recommendedFocus})]})]})]}):o==="ai"&&!x?e.jsxs("div",{className:"p-8 text-center text-slate-500",children:[e.jsx(Y,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"××™×Ÿ × ×ª×•× ×™ AI ×–×ž×™× ×™×"})]}):e.jsx(ia,{studentId:a.id,studentName:a.name})]})})},he=(a,c)=>{const x=a||(c==="lesson"?"lesson":c==="exam"?"exam":"activity"),o={lesson:"×ž×¢×¨×š ×©×™×¢×•×¨",exam:"×ž×‘×—×Ÿ",activity:"×¤×¢×™×œ×•×ª",podcast:"×¤×•×“×§××¡×˜"},l={lesson:"bg-emerald-100 text-emerald-700",exam:"bg-wizdi-cyan/20 text-wizdi-cyan",activity:"bg-wizdi-royal/10 text-wizdi-royal",podcast:"bg-orange-100 text-orange-700"},p={lesson:"text-emerald-600 bg-emerald-50 border-emerald-200",exam:"text-wizdi-cyan bg-wizdi-cyan/10 border-wizdi-cyan/20",activity:"text-wizdi-royal bg-wizdi-royal/10 border-wizdi-royal/20",podcast:"text-orange-600 bg-orange-50 border-orange-200"},w={lesson:"bg-wizdi-lime text-green-900 border-wizdi-lime/50",exam:"bg-wizdi-cyan/80 text-white border-wizdi-cyan/50",activity:"bg-wizdi-gold text-amber-900 border-wizdi-gold/50",podcast:"bg-orange-400 text-white border-orange-500/50"};return{label:o[x]||"×¤×¢×™×œ×•×ª",color:l[x]||l.activity,headerColor:p[x]||p.activity,cardColor:w[x]||w.activity}},ka=({onEditCourse:a,onViewInsights:c,onNavigateToAnalytics:x})=>{var vs,ys,ks,zs,Ss,Cs,Is,As,_s,Ds,Ts,$s;const{currentUser:o,usageStats:l}=ts(),[p,w]=r.useState([]),[D,I]=r.useState([]),[j,L]=r.useState([]),[S,R]=r.useState({}),[M,F]=r.useState(!1),[u,i]=r.useState(!0),[T,v]=r.useState(null),[V,Q]=r.useState({step:"none",courseId:null}),[b,y]=r.useState(!1),[N,q]=r.useState(()=>{const s=new Date;return s.setDate(s.getDate()+3),{courseId:"",courseTitle:"",title:"",dueDate:s.toISOString().split("T")[0],dueTime:"23:59",instructions:""}}),[U,be]=r.useState(null),[Z,fe]=r.useState(null),[A,ls]=r.useState(null),[je,Ge]=r.useState("all"),[we,Oe]=r.useState("all"),[ce,Ys]=r.useState("all"),[ae,Be]=r.useState(""),[H,Fe]=r.useState("list"),[f,X]=r.useState({key:"createdAt",direction:"desc"}),[le,Qs]=r.useState(new Set),[P,Ne]=r.useState(null),[ve,Ve]=r.useState(null),[rs,is]=r.useState(null),[ye,qe]=r.useState(null),[ns,re]=r.useState(null),[ke,Ue]=r.useState(null),[Zs,ze]=r.useState(!1),[Se,os]=r.useState(null),[ds,cs]=r.useState(""),[xs,ms]=r.useState(!1),[hs,et]=r.useState(!1),[z,st]=r.useState(null),[tt,us]=r.useState(!1),[He,at]=r.useState(!1),[Ce,ps]=r.useState(!1),[gs,bs]=r.useState(!1),[lt,Xe]=r.useState(!1);r.useEffect(()=>{o&&Hs.getUserProfile(o.uid).then(s=>{s&&ps(s.emailReportsEnabled??!1)})},[o]);const rt=async s=>{if(o){bs(!0);try{await Hs.updateEmailReportsSetting(o.uid,s),ps(s)}catch(t){console.error("Failed to update email setting:",t)}finally{bs(!1)}}};r.useEffect(()=>{H==="feedback"&&A&&(us(!0),Lt.getFeedbackStats(A).then(s=>st(s)).catch(s=>console.error(s)).finally(()=>us(!1)))},[H,A]),r.useEffect(()=>{var s;P&&cs(((s=P.rawSubmission)==null?void 0:s.feedback)||"")},[P]);const[fs,it]=r.useState({});r.useEffect(()=>{if(!o)return;const s=me(se(_,"courses"),ie("teacherId","==",o.uid)),t=Ie(s,n=>{const m={};n.forEach(C=>{const d=C.data(),h=d.subject||d.topic||"×›×œ×œ×™",g=d.gradeLevel||d.grade||d.classLevel||"×›×œ×œ×™";m[C.id]={subject:h,grade:g,title:d.title||"×œ×œ× ×©×",createdAt:d.createdAt,mode:d.mode,syllabus:d.syllabus,wizardData:d.wizardData,parentLesson:d.parentLesson}}),R(m),F(!0)},n=>{console.error("Error fetching courses:",n)});return()=>t()},[o]),r.useEffect(()=>{if(!o)return;(async()=>{try{const t=me(se(_,"assignments"),ie("teacherId","==",o.uid)),n=await qt(t),m={};n.forEach(C=>{const d=C.data();m[d.courseId]||(m[d.courseId]=[]),m[d.courseId].push({id:C.id,dueDate:d.dueDate,title:d.title})}),it(m)}catch(t){console.error("Error fetching assignments:",t)}})()},[o]),r.useEffect(()=>{if(!o)return;const s=me(se(_,"submissions"),ie("teacherId","==",o.uid)),t=Ie(s,h=>{const g=h.docs.map(k=>({id:k.id,...k.data()}));I(g)},h=>{console.error("Error fetching submissions:",h)}),n=me(se(_,"student_progress"),ie("teacherId","==",o.uid)),m=Ie(n,h=>{const g=h.docs.map(k=>({id:k.id,...k.data()}));w(g),i(!1)},h=>{console.error("Error fetching student progress:",h),i(!1)}),C=me(se(_,"safety_alerts"),ie("teacherId","==",o.uid),ie("isHandled","==",!1)),d=Ie(C,h=>{const g=h.docs.map(k=>({id:k.id,...k.data()}));L(g)},h=>{console.error("Error fetching safety alerts:",h)});return()=>{m(),t(),d()}},[o]);const xe=r.useMemo(()=>{if(!M)return[];const s={};return p.forEach(t=>{var G,$;const n=S[t.courseId],m=(n==null?void 0:n.subject)||"××—×¨",C=(n==null?void 0:n.grade)||"××—×¨",d=(n==null?void 0:n.title)||"×§×•×¨×¡ ×œ× × ×ž×¦×",h=t.studentEmail||t.id,g=((G=t.studentEmail)==null?void 0:G.split("@")[0])||"×× ×•× ×™×ž×™",k=j.some(W=>W.studentId===t.id||W.studentName===g);s[h]={id:t.id,name:(($=t.studentEmail)==null?void 0:$.split("@")[0])||"×× ×•× ×™×ž×™",score:t.finalScore||0,progress:t.answers?Math.min(Object.keys(t.answers).length*10,90):0,lastActive:t.lastActive?new Date(t.lastActive).toLocaleDateString("he-IL"):"-",answers:t.answers||{},chatHistory:t.chatHistory||[],courseId:t.courseId,subject:m,gradeLevel:C,courseTitle:d,isSubmitted:!1,hasAlert:k}}),D.forEach(t=>{var h,g,k,G;const n=S[t.courseId],m=t.studentEmail||t.studentName||t.id;let C=t.score||0;const d=j.some($=>$.studentId===t.id||$.studentName===t.studentName);s[m]={...s[m],id:t.id,name:t.studentName||((h=s[m])==null?void 0:h.name)||"×× ×•× ×™×ž×™",score:C,progress:100,lastActive:(g=t.submittedAt)!=null&&g.toDate?t.submittedAt.toDate().toLocaleDateString("he-IL"):((k=s[m])==null?void 0:k.lastActive)||"×”×™×•×",answers:t.answers||{},courseId:t.courseId,subject:(n==null?void 0:n.subject)||"××—×¨",gradeLevel:(n==null?void 0:n.grade)||"××—×¨",courseTitle:(n==null?void 0:n.title)||"×§×•×¨×¡",source:"submission",rawSubmission:t,isSubmitted:!0,hasAlert:((G=s[m])==null?void 0:G.hasAlert)||d,analytics:t.analytics||void 0}}),Object.values(s)},[D,p,S,M,j]),nt=r.useMemo(()=>{const s=new Set;return Object.values(S).forEach(t=>{t.subject&&t.subject!=="×›×œ×œ×™"&&s.add(t.subject)}),Array.from(s).sort()},[S]),ot=r.useMemo(()=>{const s=new Set;return Object.values(S).forEach(t=>{t.grade&&t.grade!=="×›×œ×œ×™"&&s.add(t.grade)}),Array.from(s).sort((t,n)=>{const m=O(t),C=O(n),d=Js.findIndex(g=>O(g).includes(m)||m.includes(O(g))),h=Js.findIndex(g=>O(g).includes(C)||C.includes(O(g)));return d!==-1&&h!==-1?d-h:d!==-1?-1:h!==-1?1:t.localeCompare(n)})},[S]),ee=r.useMemo(()=>{const s={},t=new Date().toISOString();Object.entries(S).forEach(([d,h])=>{var Ms,Rs;const g=O(h.subject),k=O(h.grade),G=O(je),$=O(we),W=((Rs=(Ms=h.wizardData)==null?void 0:Ms.settings)==null?void 0:Rs.productType)||null,Es=W==="lesson"||h.mode==="lesson",Ls=W==="exam"||h.mode==="exam",gt=ce==="all"||ce==="lesson"&&Es||ce==="test"&&Ls||ce==="activity"&&(W==="activity"||!Es&&!Ls&&W!=="podcast"),bt=je==="all"||g.includes(G),ft=we==="all"||k.includes($),jt=ae===""||h.title.toLowerCase().includes(ae.toLowerCase());if(bt&&ft&&jt&&gt){const Ps=(fs[d]||[]).filter(Je=>Je.dueDate>=t).sort((Je,Nt)=>Je.dueDate.localeCompare(Nt.dueDate)),wt=Ps.length>0?Ps[0].dueDate:null;s[d]={courseId:d,title:h.title,subject:h.subject,grade:h.grade,studentCount:0,avgScore:0,totalProgress:0,completionRate:0,atRiskCount:0,createdAt:h.createdAt,nextDueDate:wt,productType:W,mode:h.mode,submittedCount:0,parentLesson:h.parentLesson}}}),xe.forEach(d=>{if(s[d.courseId]){s[d.courseId].studentCount++,d.isSubmitted&&s[d.courseId].submittedCount++,s[d.courseId].avgScore+=d.score;const h=d.progress>0?100:0;s[d.courseId].totalProgress+=h,d.score<60&&s[d.courseId].atRiskCount++,d.hasAlert&&s[d.courseId].atRiskCount++}});let n=Object.values(s).map(d=>({...d,avgScore:d.studentCount>0?Math.round(d.avgScore/d.studentCount):0,completionRate:d.studentCount>0?Math.round(d.totalProgress/d.studentCount):0}));const{key:m,direction:C}=f;return n.sort((d,h)=>{let g=d[m],k=h[m];if(m==="createdAt"){const G=$=>$!=null&&$.seconds?$.seconds:$ instanceof Date?$.getTime()/1e3:0;g=G(g),k=G(k)}if(m==="nextDueDate"){if(!g)return 1;if(!k)return-1}return m==="type"?C==="asc"?g.localeCompare(k):k.localeCompare(g):g<k?C==="asc"?-1:1:g>k?C==="asc"?1:-1:0}),n},[xe,S,fs,je,we,ae,f]),E=r.useMemo(()=>{if(!A)return[];let s=xe.filter(t=>t.courseId===A&&t.name.toLowerCase().includes(ae.toLowerCase()));return hs&&(s=s.filter(t=>t.hasAlert)),s},[xe,A,ae,hs]),We=r.useMemo(()=>{if(E.length===0)return{avg:0,high:0,low:0,risk:0,distribution:[0,0,0,0]};const s=E.reduce((m,C)=>m+C.score,0),t=[0,0,0,0];let n=0;return E.forEach(m=>{m.score<60?(t[0]++,n++):m.score<80?t[1]++:m.score<90?t[2]++:t[3]++}),{avg:Math.round(s/E.length),high:t[3],low:t[0],risk:n,distribution:t}},[E]),dt=async()=>{if(E.length<3)return alert("×“×¨×•×©×™× ×œ×¤×—×•×ª 3 ×ª×œ×ž×™×“×™× ×œ× ×™×ª×•×—.");ze(!0);try{const s=await Ut(E);Ue(s)}catch{alert("×©×’×™××” ×‘× ×™×ª×•×—")}finally{ze(!1)}},ct=()=>{ze(!0);const s=E.filter(t=>le.has(t.id));setTimeout(()=>{const t=s.length>0?Math.round(s.reduce((n,m)=>n+m.score,0)/s.length):0;os(`**× ×™×ª×•×— ×§×‘×•×¦×” (${s.length} ×ª×œ×ž×™×“×™×):** ×ž×ž×•×¦×¢ ${t}.`),ze(!1)},2e3)},xt=s=>{const t=new Set(le);t.has(s)?t.delete(s):t.add(s),Qs(t)},js=(s,t)=>{try{console.log("handleCopyLink clicked for:",t),s.stopPropagation();const n=S[t];console.log("Found course:",n),q({courseId:t,courseTitle:n?n.title:"×ž×©×™×ž×”",title:n?`×”×’×©×”: ${n.title}`:"",dueDate:new Date().toISOString().split("T")[0],dueTime:"23:59",instructions:""}),console.log("Setting modal open"),y(!0)}catch(n){console.error("Error in handleCopyLink:",n),alert("×©×’×™××” ×‘×¤×ª×™×—×ª ×”×ž×©×™×ž×”")}},mt=async()=>{if(!N.title||!N.dueDate)return alert("×—×¡×¨×™× ×¤×¨×˜×™×");try{const s=new Date(`${N.dueDate}T${N.dueTime}`),t=await Ks(se(_,"assignments"),{courseId:N.courseId,title:N.title,dueDate:s.toISOString(),instructions:N.instructions,createdAt:ge(),teacherId:"TODO_USER_ID"}),n=`${window.location.origin}/?assignmentId=${t.id}`;be(n),v(N.courseId),setTimeout(()=>v(null),2e3)}catch(s){console.error("Error creating assignment",s),alert("×©×’×™××” ×‘×™×¦×™×¨×ª ×”×ž×©×™×ž×”")}},ht=()=>{U&&navigator.clipboard.writeText(U)},ws=()=>{y(!1),be(null)},Ns=(s,t)=>{s.stopPropagation(),console.log("[TeacherDashboard] handleEditClick called with courseId:",t),a&&a(t)},ut=async()=>{if(V.courseId)try{await Ht(B(_,"courses",V.courseId)),ls(null),Q({step:"none",courseId:null}),alert("×”×›×™×ª×” × ×ž×—×§×” ×‘×”×¦×œ×—×”.")}catch(s){console.error("Error deleting course:",s),alert("×©×’×™××” ×‘×ž×—×™×§×ª ×”×›×™×ª×”.")}},pt=async()=>{var t;if(!P)return;const s=(t=P.rawSubmission)==null?void 0:t.id;if(!s)return alert("×œ× × ×ž×¦××” ×”×’×©×” ×œ×©×ž×™×¨×”");ms(!0);try{await Ee(B(_,"submissions",s),{feedback:ds,gradedAt:ge()}),alert("×”×ž×©×•×‘ × ×©×ž×¨ ×‘×”×¦×œ×—×”!")}catch(n){console.error("Error saving feedback:",n),alert("×©×’×™××” ×‘×©×ž×™×¨×ª ×”×ž×©×•×‘")}finally{ms(!1)}};return u||!M?e.jsx("div",{className:"h-screen flex items-center justify-center text-wizdi-royal font-bold",children:"×˜×•×¢×Ÿ × ×ª×•× ×™×..."}):e.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 font-sans pb-24 text-right",dir:"rtl",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx("header",{className:"card-glass p-0 sticky top-4 z-40 overflow-hidden shadow-glass ring-1 ring-white/40",children:e.jsxs("div",{className:"p-4 flex flex-col xl:flex-row justify-between items-center gap-4 bg-white/40",children:[e.jsx("div",{className:"flex items-center gap-3 w-full xl:w-auto",children:A?e.jsx("div",{className:"flex items-center gap-3 animate-slide-in-right",children:e.jsxs("h2",{className:"text-3xl font-black text-wizdi-royal tracking-tight text-right line-clamp-1 max-w-[600px] drop-shadow-sm",title:(vs=ee.find(s=>s.courseId===A))==null?void 0:vs.title,children:[(()=>{const s=ee.find(n=>n.courseId===A),t=he(s==null?void 0:s.productType,s==null?void 0:s.mode);return e.jsx("span",{className:`font-bold ml-2 text-lg uppercase tracking-wider px-2 py-1 rounded-lg border ${t.headerColor}`,children:t.label})})(),((ys=ee.find(s=>s.courseId===A))==null?void 0:ys.title)||"×§×•×¨×¡ × ×‘×—×¨"]})}):e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-wizdi-royal to-wizdi-cyan p-3 rounded-2xl text-white shadow-lg shadow-wizdi-royal/20 transform hover:scale-110 transition-transform duration-300",children:e.jsx(Ye,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-wizdi-royal tracking-tight",children:"× ×™×”×•×œ ×œ×ž×™×“×”"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500/80",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-wizdi-lime animate-pulse"}),"×ž×¢×¨×›×ª ×‘×–×ž×Ÿ ××ž×ª"]})]})]})}),e.jsx("div",{className:"flex items-center gap-3 w-full xl:w-auto justify-end",children:A?e.jsxs("div",{className:"flex items-center gap-3 animate-fade-in",children:[e.jsxs("button",{onClick:()=>Q({step:"first",courseId:A}),className:"px-5 py-2.5 text-red-500 hover:bg-red-50 hover:text-red-600 rounded-2xl transition-all font-bold flex items-center gap-2 text-sm border border-transparent hover:border-red-100",title:"×ž×—×§ ×¤×¢×™×œ×•×ª/×ž×‘×—×Ÿ",children:[e.jsx(Ae,{className:"w-5 h-5 opacity-70 group-hover:opacity-100"})," ×ž×—×™×§×”"]}),e.jsxs("button",{onClick:()=>re(A),className:"px-5 py-2.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-2xl transition-all font-bold flex items-center gap-2 text-sm border border-indigo-200",title:"×œ×•×— ×‘×§×¨×ª ×›×™×ª×” - ×¦×¤×™×™×” ×‘× ×ª×•× ×™× ×ž×¤×•×¨×˜×™×",children:[e.jsx(Me,{className:"w-5 h-5"})," ×œ×•×— ×‘×§×¨×”"]}),e.jsxs("button",{onClick:()=>qe(A),className:"px-5 py-2.5 bg-wizdi-cyan/10 hover:bg-wizdi-cyan/20 text-wizdi-cyan rounded-2xl transition-all font-bold flex items-center gap-2 text-sm border border-wizdi-cyan/30",title:"×¦×¤×” ×‘×ž×¢×¨×š ×”×©×™×¢×•×¨",children:[e.jsx(Bs,{className:"w-5 h-5"})," ×¦×¤×” ×‘×ž×¢×¨×š"]}),e.jsxs("button",{onClick:()=>{ls(null),Ue(null),Be(""),Ge("all"),Oe("all"),et(!1)},className:"btn-lip-primary px-6 py-2.5 text-sm flex items-center gap-2 shadow-lg shadow-wizdi-royal/20",children:[e.jsx(Fs,{className:"w-5 h-5 rotate-180"})," ×—×–×¨×” ×œ×œ×•×—"]})]}):e.jsxs("div",{className:"card-glass flex flex-wrap items-center gap-3 w-full xl:w-auto p-2 border border-white/50 shadow-sm backdrop-blur-md",children:[e.jsxs("div",{className:"flex bg-slate-100/80 rounded-xl p-1 gap-1",children:[e.jsx("button",{onClick:()=>Fe("grid"),className:`p-2 rounded-lg transition-all duration-300 ${H==="grid"?"bg-white shadow-sm text-wizdi-royal scale-105 font-bold":"text-slate-400 hover:text-slate-600"}`,title:"×ª×¦×•×’×ª ×›×¨×˜×™×¡×™×•×ª",children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>Fe("list"),className:`p-2 rounded-lg transition-all duration-300 ${H==="list"?"bg-white shadow-sm text-wizdi-royal scale-105 font-bold":"text-slate-400 hover:text-slate-600"}`,title:"×ª×¦×•×’×ª ×¨×©×™×ž×”",children:e.jsx(Vs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>Fe("feedback"),className:`p-2 rounded-lg transition-all duration-300 ${H==="feedback"?"bg-white shadow-sm text-wizdi-royal scale-105 font-bold":"text-slate-400 hover:text-slate-600"}`,title:"×ž×©×•×‘ ×ª×œ×ž×™×“×™×",children:e.jsx(Le,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"w-px h-8 bg-slate-200 mx-1"}),e.jsxs("button",{onClick:()=>rt(!Ce),disabled:gs,className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-bold transition-all ${Ce?"bg-wizdi-cyan/20 text-wizdi-cyan border border-wizdi-cyan/30":"bg-slate-100 text-slate-500 hover:bg-slate-200"} ${gs?"opacity-50":""}`,title:Ce?"×“×•×—×•×ª ×ž×™×™×œ ×¤×¢×™×œ×™×":"×”×¤×¢×œ ×“×•×—×•×ª ×ž×™×™×œ",children:[Ce?e.jsx(Jt,{className:"w-4 h-4"}):e.jsx(ta,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"×“×•×—×•×ª ×ž×™×™×œ"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-200 mx-1"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-auto transition-all duration-300",children:[e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative group flex-1 md:flex-none",children:[e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none text-slate-400 group-hover:text-wizdi-royal transition-colors",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsxs("select",{className:"w-full md:w-auto bg-white/50 border border-transparent hover:border-slate-200 hover:bg-white text-sm py-2 pr-9 pl-4 rounded-xl focus:ring-2 focus:ring-wizdi-cyan/20 outline-none text-slate-600 font-bold transition-all cursor-pointer appearance-none",value:ce,onChange:s=>Ys(s.target.value),children:[e.jsx("option",{value:"all",children:"×¡×•×’: ×”×›×œ"}),e.jsx("option",{value:"test",children:"×ž×‘×—× ×™×"}),e.jsx("option",{value:"activity",children:"×¤×¢×™×œ×•×™×•×ª"}),e.jsx("option",{value:"lesson",children:"×ž×¢×¨×›×™ ×©×™×¢×•×¨"})]})]}),e.jsx("button",{onClick:()=>at(!He),className:`md:hidden p-2 rounded-xl border transition-colors ${He?"bg-wizdi-royal/10 border-wizdi-royal/20 text-wizdi-royal":"bg-white border-transparent text-slate-400"}`,children:e.jsx(Vs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:`${He?"flex":"hidden"} md:flex flex-col md:flex-row gap-2 animate-fade-in origin-top`,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none text-slate-400 group-hover:text-wizdi-royal transition-colors",children:e.jsx(Qe,{className:"w-4 h-4"})}),e.jsxs("select",{className:"w-full md:w-auto bg-white/50 border border-transparent hover:border-slate-200 hover:bg-white text-sm py-2 pr-9 pl-4 rounded-xl focus:ring-2 focus:ring-wizdi-cyan/20 outline-none text-slate-600 font-bold transition-all cursor-pointer appearance-none max-w-none md:max-w-[150px]",value:je,onChange:s=>Ge(s.target.value),children:[e.jsx("option",{value:"all",children:"×ž×§×¦×•×¢: ×”×›×œ"}),nt.map((s,t)=>e.jsx("option",{value:s,children:s},t))]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none text-slate-400 group-hover:text-wizdi-royal transition-colors",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsxs("select",{className:"w-full md:w-auto bg-white/50 border border-transparent hover:border-slate-200 hover:bg-white text-sm py-2 pr-9 pl-4 rounded-xl focus:ring-2 focus:ring-wizdi-cyan/20 outline-none text-slate-600 font-bold transition-all cursor-pointer appearance-none max-w-none md:max-w-[150px]",value:we,onChange:s=>Oe(s.target.value),children:[e.jsx("option",{value:"all",children:"×©×›×‘×”: ×”×›×œ"}),ot.map((s,t)=>e.jsx("option",{value:s,children:s},t))]})]})]})]}),e.jsx("div",{className:"w-px h-8 bg-slate-200 mx-1 hidden md:block"}),e.jsxs("div",{className:"relative flex-1 min-w-[180px]",children:[e.jsx(Mt,{className:"w-4 h-4 text-slate-400 absolute right-3 top-3 group-focus-within:text-wizdi-royal transition-colors"}),e.jsx("input",{type:"text",placeholder:"×—×™×¤×•×©...",className:"w-full pr-10 pl-4 py-2 bg-white/50 border border-transparent hover:bg-white hover:border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-wizdi-cyan/20 text-slate-700 font-medium transition-all placeholder:text-slate-400",value:ae,onChange:s=>Be(s.target.value)})]}),e.jsx("div",{className:"w-px h-8 bg-slate-200 mx-1"}),e.jsxs("button",{onClick:()=>Xe(!0),className:`px-3 py-2 rounded-xl text-sm font-bold flex items-center gap-2 transition-all transform hover:-translate-y-0.5 shadow-md ${l&&l.usage.textTokens.percent>=80?"bg-amber-100 text-amber-700 border border-amber-300 hover:bg-amber-200":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,title:"×©×™×ž×•×© ×—×•×“×©×™",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:"×©×™×ž×•×©"}),l&&e.jsxs("span",{className:`px-1.5 py-0.5 rounded-full text-xs ${l.usage.textTokens.percent>=80?"bg-amber-500 text-white":"bg-slate-200 text-slate-600"}`,children:[l.usage.textTokens.percent,"%"]})]}),e.jsx("div",{className:"w-px h-8 bg-slate-200 mx-1"}),e.jsx(da,{})]})})]})}),!A&&e.jsx("div",{className:"animate-fade-in relative z-10",children:ee.length===0?e.jsxs("div",{className:"text-center py-24 card-glass rounded-[3rem] shadow-xl flex flex-col items-center justify-center gap-6 group",children:[e.jsx("div",{className:"bg-wizdi-cloud p-6 rounded-full group-hover:scale-110 transition-transform duration-500",children:e.jsx(Qe,{className:"w-20 h-20 text-wizdi-royal/30 group-hover:text-wizdi-royal/50 transition-colors"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-wizdi-royal/60 mb-2",children:"×˜×¨× × ×•×¦×¨×• ×›×™×ª×•×ª"}),e.jsx("p",{className:"text-slate-500/80 text-lg font-medium",children:"×–×” ×”×–×ž×Ÿ ×œ×™×¦×•×¨ ××ª ×”×¤×¢×™×œ×•×ª ×”×¨××©×•× ×” ×©×œ×š!"})]}),e.jsx("button",{onClick:()=>{Ge("all"),Oe("all"),Be("")},className:"btn-lip-primary px-6 py-2 text-sm",children:"× ×§×” ×¡×™× ×•× ×™×"})]}):e.jsx(e.Fragment,{children:H==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ee.map(s=>e.jsxs("div",{onClick:()=>re(s.courseId),className:"card-glass p-0 cursor-pointer group flex flex-col h-[280px] relative overflow-hidden hover:-translate-y-2 hover:shadow-2xl transition-all duration-300 ring-1 ring-white/60 border-0",children:[e.jsxs("div",{className:`h-32 p-6 relative overflow-hidden transition-colors duration-500
                                                    ${s.productType==="exam"?"bg-gradient-to-br from-wizdi-cyan to-wizdi-royal":s.productType==="lesson"?"bg-gradient-to-br from-emerald-500 to-emerald-700":s.productType==="podcast"?"bg-gradient-to-br from-orange-400 to-orange-600":"bg-gradient-to-br from-wizdi-royal to-wizdi-cyan"}
                                                `,children:[e.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] mix-blend-overlay"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl group-hover:scale-150 transition-transform duration-700"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-black uppercase tracking-wider backdrop-blur-md border shadow-sm ${he(s.productType,s.mode).cardColor}`,children:he(s.productType,s.mode).label}),s.parentLesson&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-white/20 text-white backdrop-blur-md border border-white/30",children:"×ž×ž×¢×¨×š ×©×™×¢×•×¨"})]}),e.jsx("div",{className:"p-2 bg-white/10 rounded-xl backdrop-blur-md opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0",children:e.jsx(Fs,{className:"w-5 h-5 text-white rotate-180"})})]}),e.jsx("h3",{className:"text-2xl font-black text-white mt-4 leading-tight line-clamp-2 drop-shadow-md",children:s.title})]}),e.jsxs("div",{className:"absolute top-4 left-4 flex gap-2 z-20 opacity-0 group-hover:opacity-100 transition-all duration-300 transform -translate-y-2 group-hover:translate-y-0",children:[e.jsx("button",{onClick:t=>Ns(t,s.courseId),className:"p-2.5 bg-white text-wizdi-royal hover:bg-blue-50 rounded-xl shadow-lg hover:scale-110 transition-all",title:"×¢×¨×•×š ×©×™×¢×•×¨",children:e.jsx(Ze,{className:"w-4 h-4"})}),e.jsx("button",{onClick:t=>js(t,s.courseId),className:"p-2.5 bg-wizdi-lime text-green-900 hover:bg-lime-400 rounded-xl shadow-lg hover:scale-110 transition-all font-bold",title:"×”×¢×ª×§ ×§×™×©×•×¨ ×œ×”×’×©×”",children:T===s.courseId?e.jsx(te,{className:"w-4 h-4 text-green-700"}):e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),q({...N,courseId:s.courseId,courseTitle:s.title,title:s.title}),y(!0)},className:"p-2.5 bg-white text-slate-600 hover:text-wizdi-lime hover:bg-wizdi-lime/10 rounded-xl shadow-lg hover:scale-110 transition-all",title:"×©×™×™×š ×œ-Google Classroom",children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),fe({id:s.courseId,title:s.title})},className:"p-2.5 bg-white text-slate-600 hover:text-wizdi-royal hover:bg-wizdi-royal/10 rounded-xl shadow-lg hover:scale-110 transition-all",title:"×©×ª×£ ×¤×¢×™×œ×•×ª/×ž×‘×—×Ÿ",children:e.jsx(Rt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between bg-gradient-to-b from-white to-blue-50/30",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400 uppercase tracking-wide",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3"})," ",s.subject]}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qs,{className:"w-3 h-3"})," ",s.grade]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold",children:[e.jsx("span",{className:"text-slate-600",children:"×”×ª×§×“×ž×•×ª ×›×™×ª×ª×™×ª"}),e.jsxs("span",{className:"text-wizdi-royal",children:[s.completionRate,"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out group-hover:brightness-110 ${s.completionRate>80?"bg-gradient-to-r from-teal-400 to-emerald-500":"bg-gradient-to-r from-wizdi-royal to-cyan-400"}`,style:{width:`${s.completionRate}%`}})})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-black text-slate-800",children:s.studentCount}),e.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"×ª×œ×ž×™×“×™×"})]}),s.atRiskCount>0&&e.jsxs("div",{className:"flex items-center gap-1.5 bg-red-50 text-red-600 px-3 py-1.5 rounded-lg border border-red-100 animate-pulse",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-xs font-black",children:[s.atRiskCount," ×‘×¡×™×›×•×Ÿ"]})]})]})]})]},s.courseId))}):H==="list"?e.jsx("div",{className:"card-glass rounded-3xl shadow-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-wizdi-cloud text-slate-500 font-medium border-b border-slate-100",children:e.jsxs("tr",{children:[e.jsx("th",{onClick:()=>X({key:"title",direction:f.direction==="asc"?"desc":"asc"}),className:"p-4 w-1/4 cursor-pointer hover:bg-slate-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["×©× ×”×ž×©×™×ž×” ",f.key==="title"&&(f.direction==="asc"?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}))]})}),e.jsx("th",{onClick:()=>X({key:"type",direction:f.direction==="asc"?"desc":"asc"}),className:"p-4 cursor-pointer hover:bg-slate-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["×¡×•×’ ",f.key==="type"&&(f.direction==="asc"?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}))]})}),e.jsx("th",{onClick:()=>X({key:"subject",direction:f.direction==="asc"?"desc":"asc"}),className:"p-4 cursor-pointer hover:bg-slate-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["×ª×—×•× ×“×¢×ª ",f.key==="subject"&&(f.direction==="asc"?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}))]})}),e.jsx("th",{onClick:()=>X({key:"grade",direction:f.direction==="asc"?"desc":"asc"}),className:"p-4 cursor-pointer hover:bg-slate-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["×›×™×ª×”/×§×‘×•×¦×” ",f.key==="grade"&&(f.direction==="asc"?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}))]})}),e.jsx("th",{onClick:()=>X({key:"nextDueDate",direction:f.direction==="asc"?"desc":"asc"}),className:"p-4 cursor-pointer hover:bg-slate-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["×ž×•×¢×“ ×”×’×©×” ",f.key==="nextDueDate"&&(f.direction==="asc"?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}))]})}),e.jsx("th",{onClick:()=>X({key:"submittedCount",direction:f.direction==="asc"?"desc":"asc"}),className:"p-4 cursor-pointer hover:bg-slate-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["×ª×œ×ž×™×“×™× (×”×•×’×©×•/×¡×š ×”×›×œ) ",f.key==="submittedCount"&&(f.direction==="asc"?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}))]})}),e.jsx("th",{onClick:()=>X({key:"completionRate",direction:f.direction==="asc"?"desc":"asc"}),className:"p-4 cursor-pointer hover:bg-slate-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["×”×ª×§×“×ž×•×ª ",f.key==="completionRate"&&(f.direction==="asc"?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}))]})}),e.jsx("th",{onClick:()=>X({key:"avgScore",direction:f.direction==="asc"?"desc":"asc"}),className:"p-4 cursor-pointer hover:bg-slate-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-1",children:["×ž×ž×•×¦×¢ ",f.key==="avgScore"&&(f.direction==="asc"?e.jsx(J,{className:"w-3 h-3"}):e.jsx(K,{className:"w-3 h-3"}))]})}),e.jsx("th",{className:"p-4 w-32",children:"×¤×¢×•×œ×•×ª"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:ee.map(s=>{var t,n;return e.jsxs("tr",{onClick:()=>re(s.courseId),className:"hover:bg-wizdi-cloud/50 cursor-pointer transition-colors group",children:[e.jsxs("td",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[(s.atRiskCount>0||ee.indexOf(s)===0)&&e.jsx("div",{className:"w-2.5 h-2.5 bg-red-500 rounded-full flex-shrink-0",title:`${s.atRiskCount||1} ×ª×œ×ž×™×“×™× ×“×•×¨×©×™× ×ª×©×•×ž×ª ×œ×‘`}),e.jsx("div",{className:"font-bold text-slate-800 text-base group-hover:text-wizdi-royal transition-colors",children:s.title})]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["× ×•×¦×¨ ×‘: ",(t=s.createdAt)!=null&&t.toDate?s.createdAt.toDate().toLocaleDateString("he-IL"):(n=s.createdAt)!=null&&n.seconds?new Date(s.createdAt.seconds*1e3).toLocaleDateString("he-IL"):s.createdAt instanceof Date?s.createdAt.toLocaleDateString("he-IL"):typeof s.createdAt=="string"?new Date(s.createdAt).toLocaleDateString("he-IL"):"-"]})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${he(s.productType,s.mode).color}`,children:he(s.productType,s.mode).label}),s.parentLesson&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-indigo-100 text-indigo-600",title:`×ž×ž×¢×¨×š: ${s.parentLesson.title}`,children:"×ž×ž×¢×¨×š"})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"bg-wizdi-cloud text-slate-600 px-2 py-1 rounded text-xs font-bold",children:s.subject})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"bg-wizdi-cloud text-slate-600 px-2 py-1 rounded text-xs font-bold",children:s.grade})}),e.jsx("td",{className:"p-4",children:s.nextDueDate?e.jsx("span",{className:"font-bold bg-wizdi-gold/20 text-wizdi-gold px-2 py-1 rounded-md text-xs",children:new Date(s.nextDueDate).toLocaleDateString("he-IL")}):e.jsx("span",{className:"text-slate-400 text-xs",children:"-"})}),e.jsx("td",{className:"p-4 font-bold text-slate-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-4 h-4 text-slate-400"}),e.jsxs("span",{children:[s.submittedCount," / ",e.jsx("span",{className:"text-slate-400",children:s.studentCount})]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-l from-wizdi-royal to-wizdi-cyan",style:{width:`${s.completionRate}%`}})}),e.jsxs("span",{className:"text-xs font-bold",children:[s.completionRate,"%"]})]})}),e.jsx("td",{className:"p-4 font-black text-lg text-wizdi-royal",children:s.avgScore}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:m=>Ns(m,s.courseId),className:"p-2 hover:bg-white text-slate-400 hover:text-wizdi-royal rounded-lg transition-colors border border-transparent hover:border-slate-200 shadow-sm",title:"×¢×¨×™×›×”",children:e.jsx(Ze,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m=>js(m,s.courseId),className:"p-2 hover:bg-white text-slate-400 hover:text-wizdi-lime rounded-lg transition-colors border border-transparent hover:border-slate-200 shadow-sm",title:"×”×¢×ª×§ ×§×™×©×•×¨",children:e.jsx(_e,{className:"w-4 h-4"})})]})})]},s.courseId)})})]})})}):H==="feedback"?e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card-glass p-6 rounded-3xl shadow-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 mb-1",children:"×™×—×¡ ×ž×©×•×‘"}),e.jsxs("div",{className:"text-3xl font-black text-slate-800 flex items-center gap-2",children:[e.jsx("span",{className:"text-wizdi-lime",children:((ks=z==null?void 0:z.stats)==null?void 0:ks.positive)||0}),e.jsx("span",{className:"text-slate-300 text-lg",children:"/"}),e.jsx("span",{className:"text-red-500",children:((zs=z==null?void 0:z.stats)==null?void 0:zs.negative)||0})]})]}),e.jsx("div",{className:"w-16 h-16 rounded-full bg-wizdi-cloud flex items-center justify-center",children:(((Ss=z==null?void 0:z.stats)==null?void 0:Ss.positive)||0)>(((Cs=z==null?void 0:z.stats)==null?void 0:Cs.negative)||0)?e.jsx(te,{className:"w-8 h-8 text-wizdi-lime"}):e.jsx(es,{className:"w-8 h-8 text-red-500"})})]}),e.jsxs("div",{className:"card-glass p-6 rounded-3xl shadow-xl col-span-2",children:[e.jsx("div",{className:"text-sm font-bold text-wizdi-royal mb-4",children:"× ×•×©××™× ×œ×©×™×¤×•×¨ (×ª×’×™×•×ª × ×¤×•×¦×•×ª)"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[Object.entries(((Is=z==null?void 0:z.stats)==null?void 0:Is.tags)||{}).map(([s,t])=>e.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-700 px-4 py-2 rounded-xl flex items-center gap-2 font-bold",children:[e.jsx("span",{children:s==="confusing"?"×œ× ×ž×•×‘×Ÿ":s==="boring"?"×ž×©×¢×ž×":s==="too_hard"?"×§×©×” ×ž×“×™":s==="bug"?"×ª×§×œ×”":s}),e.jsx("span",{className:"bg-red-200 text-red-800 text-xs px-2 py-0.5 rounded-full",children:t})]},s)),Object.keys(((As=z==null?void 0:z.stats)==null?void 0:As.tags)||{}).length===0&&e.jsx("div",{className:"text-slate-400 text-sm italic",children:"××™×Ÿ ×ž×¡×¤×™×§ × ×ª×•× ×™× ×¢×“×™×™×Ÿ"})]})]})]}),e.jsxs("div",{className:"card-glass rounded-3xl shadow-xl overflow-hidden min-h-[400px]",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 bg-wizdi-cloud/50",children:e.jsx("h3",{className:"font-bold text-wizdi-royal",children:"×ª×’×•×‘×•×ª ××—×¨×•× ×•×ª"})}),e.jsx("div",{className:"divide-y divide-slate-100",children:tt?e.jsx("div",{className:"p-12 text-center text-wizdi-royal font-bold animate-pulse",children:"×˜×•×¢×Ÿ ×ž×©×•×‘×™×..."}):((_s=z==null?void 0:z.recent)==null?void 0:_s.length)>0?z.recent.map(s=>{var t,n;return e.jsxs("div",{className:"p-6 hover:bg-wizdi-cloud/30 transition-colors flex gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${s.type==="positive"?"bg-wizdi-lime/20 text-wizdi-lime":"bg-red-100 text-red-600"}`,children:s.type==="positive"?e.jsx(te,{className:"w-5 h-5"}):e.jsx(Le,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"font-bold text-slate-800 text-sm",children:["×ª×œ×ž×™×“ (ID: ",s.userId.substring(0,6),"...)"]}),e.jsx("div",{className:"text-xs text-slate-400",children:(t=s.timestamp)!=null&&t.toDate?s.timestamp.toDate().toLocaleDateString("he-IL"):"×”×™×•×"})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex gap-2 mb-2",children:s.tags.map(m=>e.jsx("span",{className:"text-xs bg-wizdi-cloud text-slate-600 px-2 py-0.5 rounded border border-slate-200",children:m},m))}),s.comment&&e.jsx("div",{className:"text-slate-600 text-sm bg-wizdi-cloud p-3 rounded-xl",children:s.comment}),e.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:["×”×§×©×¨: ",((n=s.context)==null?void 0:n.blockType)||"×›×œ×œ×™"]})]})]},s.id)}):e.jsx("div",{className:"p-12 text-center text-slate-400",children:"×œ× × ×ž×¦××• ×ž×©×•×‘×™×"})})]})]}):null})}),A&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"card-glass p-4 rounded-3xl shadow-xl text-center",children:[e.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"×ž×ž×•×¦×¢ ×›×™×ª×ª×™"}),e.jsx("div",{className:"text-2xl font-black text-wizdi-royal mt-1",children:We.avg})]}),e.jsxs("div",{className:"card-glass p-4 rounded-3xl shadow-xl text-center",children:[e.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"×ž×¦×˜×™×™× ×™×"}),e.jsx("div",{className:"text-2xl font-black text-wizdi-lime mt-1",children:We.high})]}),e.jsxs("div",{className:"card-glass p-4 rounded-3xl shadow-xl text-center border border-red-100",children:[e.jsx("span",{className:"text-xs text-red-400 font-bold",children:"×ª×œ×ž×™×“×™× ×‘×¡×™×›×•×Ÿ"}),e.jsx("div",{className:"text-2xl font-black text-red-500 mt-1",children:We.risk})]}),e.jsxs("div",{onClick:dt,className:"bg-gradient-to-br from-wizdi-royal to-wizdi-cyan p-4 rounded-3xl shadow-xl shadow-wizdi-royal/20 text-white flex flex-col justify-center items-center cursor-pointer hover:scale-105 transition-all",children:[Zs?e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):e.jsx(oe,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold text-sm",children:"× ×™×ª×•×— ×›×™×ª×ª×™ (AI)"})]})]}),(ke||Se)&&e.jsxs("div",{className:"card-glass p-6 rounded-3xl shadow-xl relative",children:[e.jsx("button",{onClick:()=>{Ue(null),os(null)},className:"absolute top-4 left-4 p-1 hover:bg-slate-100 rounded-full",children:e.jsx(ne,{className:"w-4 h-4 text-slate-400"})}),e.jsxs("h3",{className:"font-bold text-wizdi-royal flex items-center gap-2 mb-4",children:[e.jsx(Y,{className:"w-5 h-5 text-wizdi-cyan"}),Se?"×ª×•×¦××•×ª × ×™×ª×•×— ×§×‘×•×¦×ª×™":"×ª×•×‘× ×•×ª ×›×™×ª×ª×™×•×ª"]}),Se?e.jsx("div",{className:"bg-wizdi-cloud p-4 rounded-xl text-slate-700 whitespace-pre-line leading-relaxed",children:Se}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-wizdi-lime/10 p-4 rounded-xl border border-wizdi-lime/20",children:[e.jsx("span",{className:"text-wizdi-lime font-bold block mb-2 border-b border-wizdi-lime/20 pb-1",children:"×—×•×–×§×•×ª:"}),e.jsx("ul",{className:"list-disc list-inside text-slate-600 space-y-1",children:(Ds=ke.strongSkills)==null?void 0:Ds.map((s,t)=>e.jsx("li",{children:s},t))})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100",children:[e.jsx("span",{className:"text-red-500 font-bold block mb-2 border-b border-red-100 pb-1",children:"×—×•×œ×©×•×ª:"}),e.jsx("ul",{className:"list-disc list-inside text-slate-600 space-y-1",children:(Ts=ke.weakSkills)==null?void 0:Ts.map((s,t)=>e.jsx("li",{children:s},t))})]}),e.jsxs("div",{className:"col-span-full bg-wizdi-royal/10 p-4 rounded-xl border border-wizdi-royal/20 text-wizdi-royal font-medium",children:["ðŸ’¡ ×”×ž×œ×¦×”: ",($s=ke.actionItems)==null?void 0:$s[0]]})]})]}),e.jsx(ca,{isOpen:b,onClose:()=>y(!1),examTitle:N.title,examId:N.courseId}),e.jsx(ra,{classId:A,teacherId:"TEACHER_123",students:E}),e.jsxs("div",{className:"card-glass rounded-3xl shadow-xl overflow-hidden min-h-[400px]",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 bg-wizdi-cloud/50 flex justify-between items-center",children:[e.jsxs("div",{className:"font-bold text-wizdi-royal text-sm",children:["×¨×©×™×ž×ª ×ª×œ×ž×™×“×™× (",E.length,")"]}),le.size>0&&e.jsxs("button",{onClick:ct,className:"btn-lip-primary text-xs px-3 py-1 flex items-center gap-1",children:[e.jsx(oe,{className:"w-3 h-3"})," × ×ª×— ×§×‘×•×¦×” (",le.size,")"]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-wizdi-cloud text-slate-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 w-10"}),e.jsx("th",{className:"p-4",children:"×©× ×ª×œ×ž×™×“"}),e.jsx("th",{className:"p-4",children:"×¡×˜×˜×•×¡"}),e.jsx("th",{className:"p-4",children:"×¤×¢×™×œ×•×ª ××—×¨×•× ×”"}),e.jsx("th",{className:"p-4",children:"×”×ª×§×“×ž×•×ª"}),e.jsx("th",{className:"p-4",children:"×¦×™×•×Ÿ"}),e.jsx("th",{className:"p-4",children:"×¤×¢×•×œ×•×ª"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:E.map(s=>e.jsxs("tr",{className:`hover:bg-wizdi-cloud/50 transition-colors ${le.has(s.id)?"bg-wizdi-royal/5":""}`,children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-wizdi-royal focus:ring-wizdi-cyan",checked:le.has(s.id),onChange:()=>xt(s.id)})}),e.jsxs("td",{className:"p-4 font-bold text-slate-800 flex items-center gap-2",children:[s.name,s.hasAlert&&e.jsx("span",{className:"bg-red-100 text-red-600 p-1 rounded-full animate-pulse",title:"×–×•×”×ª×” ×ž×¦×•×§×”",children:e.jsx(Le,{className:"w-3 h-3"})})]}),e.jsx("td",{className:"p-4",children:s.isSubmitted?e.jsxs("span",{className:"bg-wizdi-lime/20 text-wizdi-lime px-2 py-1 rounded-lg text-xs font-bold flex items-center w-fit gap-1",children:[e.jsx(te,{className:"w-3 h-3"})," ×”×•×’×©"]}):e.jsxs("span",{className:"bg-wizdi-gold/20 text-wizdi-gold px-2 py-1 rounded-lg text-xs font-bold flex items-center w-fit gap-1",children:[e.jsx(Pt,{className:"w-3 h-3"})," ×‘×ª×”×œ×™×š"]})}),e.jsx("td",{className:"p-4 text-slate-500",children:s.lastActive}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-l from-wizdi-royal to-wizdi-cyan",style:{width:`${s.progress}%`}})}),e.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[s.progress,"%"]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded font-bold text-xs ${s.score<60?"bg-red-100 text-red-600":"bg-wizdi-lime/20 text-wizdi-lime"}`,children:s.score})}),e.jsxs("td",{className:"p-4 flex gap-2",children:[e.jsx("button",{onClick:()=>Ne(s),className:"p-1.5 text-wizdi-royal hover:bg-wizdi-royal/10 rounded transition-colors",title:"×¦×¤×”",children:e.jsx(Bs,{className:"w-4 h-4"})}),s.analytics&&e.jsx("button",{onClick:()=>is(s),className:"p-1.5 text-wizdi-cyan hover:bg-wizdi-cyan/10 rounded transition-colors",title:"×ª×•×‘× ×•×ª AI",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{Ve(s),Gt(s).then(t=>Ve({...s,report:t}))},className:"p-1.5 text-wizdi-lime hover:bg-wizdi-lime/10 rounded transition-colors",title:"×“×•×—",children:e.jsx(Ze,{className:"w-4 h-4"})})]})]},s.id))})]}),E.length===0&&e.jsx("div",{className:"text-center py-10 text-slate-400",children:"×œ× × ×ž×¦××• ×ª×œ×ž×™×“×™× ×‘×§×•×¨×¡ ×–×”"})]})]})]}),P&&e.jsxs("div",{className:"fixed inset-0 bg-white z-[100] animate-fade-in flex flex-col",children:[e.jsx(de.Suspense,{fallback:e.jsx("div",{className:"flex-1 flex items-center justify-center text-wizdi-royal font-bold",children:"×˜×•×¢×Ÿ ××ª × ×’×Ÿ ×”×ž×‘×—×Ÿ..."}),children:e.jsx(Ws,{reviewMode:!0,assignment:{...S[P.courseId],id:P.courseId,courseId:P.courseId,activeSubmission:P.rawSubmission},onExitReview:()=>Ne(null)})}),e.jsxs("div",{className:"bg-white border-t border-wizdi-cloud p-4 shadow-2xl flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"×ž×©×•×‘ ×”×ž×•×¨×” ×œ×ª×œ×ž×™×“:"}),e.jsx("textarea",{className:"w-full border border-slate-300 rounded-xl px-3 py-2 text-sm focus:border-wizdi-cyan outline-none h-16 resize-none",placeholder:"×›×ª×•×‘ ×›××Ÿ ×ž×©×•×‘ ×ž×™×œ×•×œ×™...",value:ds,onChange:s=>cs(s.target.value)})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("button",{onClick:pt,disabled:xs,className:"flex-1 md:flex-none btn-lip-action px-6 py-3 flex items-center justify-center gap-2",children:[xs?e.jsx("span",{className:"animate-spin",children:"â³"}):e.jsx(te,{className:"w-5 h-5"}),"×©×ž×•×¨ ×ž×©×•×‘"]}),e.jsx("button",{onClick:()=>Ne(null),className:"flex-1 md:flex-none px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-bold rounded-full transition-colors",children:"×¡×’×•×¨"})]})]})]}),b&&ue.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 text-right",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-l from-wizdi-royal to-wizdi-cyan p-4 text-white flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5"})," ",U?"×”×§×™×©×•×¨ ×ž×•×›×Ÿ!":"×™×¦×™×¨×ª ×§×™×©×•×¨ ×œ×ž×©×™×ž×”"]}),e.jsx("button",{onClick:ws,className:"hover:bg-white/20 p-1 rounded-full",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 space-y-4",children:U?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{className:"w-8 h-8 text-green-600"})}),e.jsx("p",{className:"text-lg font-bold text-slate-700 mb-2",children:"×”×§×™×©×•×¨ × ×•×¦×¨ ×‘×”×¦×œ×—×”!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"×©×œ×—×• ××ª ×”×§×™×©×•×¨ ×œ×ª×œ×ž×™×“×™×"})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2",children:"×§×™×©×•×¨ ×œ×ž×©×™×ž×”:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:U,className:"flex-1 bg-white border border-slate-300 rounded-lg px-3 py-2 text-sm text-slate-600 select-all",onClick:s=>s.target.select()}),e.jsxs("button",{onClick:ht,className:"px-4 py-2 bg-wizdi-royal text-white rounded-lg font-bold hover:bg-wizdi-royal/90 transition-colors flex items-center gap-1 text-sm",children:[e.jsx(Ot,{className:"w-4 h-4"})," ×”×¢×ª×§"]})]})]}),e.jsx("button",{onClick:ws,className:"w-full bg-slate-100 text-slate-700 py-3 rounded-xl font-bold hover:bg-slate-200 transition-colors mt-2",children:"×¡×’×•×¨"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-wizdi-royal mb-1",children:"×©× ×”×ž×©×™×ž×” / ×ž×‘×—×Ÿ"}),e.jsx("input",{type:"text",className:"w-full border border-slate-300 rounded-xl px-3 py-2 text-sm focus:border-wizdi-cyan focus:ring-1 focus:ring-wizdi-cyan outline-none",value:N.title,onChange:s=>q({...N,title:s.target.value}),placeholder:"×œ×ž×©×œ: ×¡×™×•× ×¤×¨×§ ×‘×³ - ×—×–×¨×” ×œ×ž×‘×—×Ÿ"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-wizdi-royal mb-1",children:"×ª××¨×™×š ×”×’×©×”"}),e.jsx("input",{type:"date",className:"w-full border border-slate-300 rounded-xl px-3 py-2 text-sm focus:border-wizdi-cyan outline-none",value:N.dueDate,onChange:s=>q({...N,dueDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-wizdi-royal mb-1",children:"×©×¢×”"}),e.jsx("input",{type:"time",className:"w-full border border-slate-300 rounded-xl px-3 py-2 text-sm focus:border-wizdi-cyan outline-none",value:N.dueTime,onChange:s=>q({...N,dueTime:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-wizdi-royal mb-1",children:"×”× ×—×™×•×ª ×œ×ª×œ×ž×™×“ (××•×¤×¦×™×•× ×œ×™)"}),e.jsx("textarea",{className:"w-full border border-slate-300 rounded-xl px-3 py-2 text-sm focus:border-wizdi-cyan outline-none h-20 resize-none",value:N.instructions,onChange:s=>q({...N,instructions:s.target.value}),placeholder:"×”× ×—×™×•×ª ×ž×™×•×—×“×•×ª, ×–×ž×Ÿ ×ž×•×ž×œ×¥, ×•×›×•'..."})]}),e.jsxs("button",{onClick:mt,className:"w-full btn-lip-action py-3 flex justify-center items-center gap-2 mt-2",children:[e.jsx(_e,{className:"w-5 h-5"})," ×¦×•×¨ ×§×™×©×•×¨"]}),e.jsx("p",{className:"text-xs text-center text-slate-400",children:"×”×§×™×©×•×¨ ×™×©×ž×¨ ×‘×”×™×¡×˜×•×¨×™×™×ª ×”×ž×©×™×ž×•×ª ×©×œ ×”×›×™×ª×”"})]})})]})}),document.body),ve&&ve.report&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-wizdi-royal",children:["×“×•×— ×”×¢×¨×›×”: ",ve.name]}),e.jsx("button",{onClick:()=>Ve(null),children:e.jsx(ne,{className:"w-6 h-6 text-slate-400 hover:text-red-500"})})]}),e.jsx("div",{className:"bg-wizdi-cloud p-4 rounded-xl text-wizdi-royal text-sm leading-relaxed mb-6",children:ve.report.summary}),e.jsx("button",{onClick:()=>window.print(),className:"w-full btn-lip-primary py-3",children:"×”×“×¤×¡ ×“×•×—"})]})}),rs&&e.jsx(ma,{student:rs,onClose:()=>is(null)}),ye&&e.jsx("div",{className:"fixed inset-0 bg-white z-[100] animate-fade-in flex flex-col",children:e.jsx(de.Suspense,{fallback:e.jsx("div",{className:"flex-1 flex items-center justify-center text-wizdi-royal font-bold",children:"×˜×•×¢×Ÿ ××ª ×”×ž×¢×¨×š..."}),children:e.jsx(Ws,{reviewMode:!0,hideReviewHeader:!0,assignment:{...S[ye],id:ye,courseId:ye},onExitReview:()=>qe(null)})})})]}),V.step==="first"&&ue.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",dir:"rtl",children:e.jsx("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden animate-scale-in",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 text-red-600",children:e.jsx(Ae,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-2xl font-black text-gray-800 mb-2",children:"×ž×—×™×§×ª ×ž×©×™×ž×”"}),e.jsxs("p",{className:"text-gray-500 mb-6 leading-relaxed",children:["×”×× ××ª× ×‘×˜×•×—×™× ×©×‘×¨×¦×•× ×›× ×œ×ž×—×•×§ ××ª ×”×ž×©×™×ž×”?",e.jsx("br",{}),e.jsx("span",{className:"font-bold text-red-500",children:"×¤×¢×•×œ×” ×–×• ×ª×ž×—×§ ××ª ×›×œ ×ª×•×¦××•×ª ×”×ª×œ×ž×™×“×™× ×•×”× ×ª×•× ×™× ×”×ž×©×•×™×›×™× ×œ×ž×©×™×ž×” ×–×•."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Q({step:"none",courseId:null}),className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-xl transition-colors",children:"×‘×™×˜×•×œ"}),e.jsx("button",{onClick:()=>Q(s=>({...s,step:"second"})),className:"flex-1 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl shadow-lg shadow-red-200 transition-colors",children:"×”×ž×©×š ×œ×ž×—×™×§×”"})]})]})})}),document.body),V.step==="second"&&ue.createPortal(e.jsx("div",{className:"fixed inset-0 bg-red-900/80 backdrop-blur-md z-[70] flex items-center justify-center p-4 animate-fade-in",dir:"rtl",children:e.jsx("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden animate-shake border-4 border-red-500",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 text-red-600 border-4 border-red-50 animate-pulse",children:e.jsx(Ae,{className:"w-10 h-10"})}),e.jsx("h3",{className:"text-3xl font-black text-red-600 mb-2 uppercase tracking-tight",children:"××–×”×¨×” ××—×¨×•× ×”!"}),e.jsxs("p",{className:"text-gray-600 mb-8 font-bold text-lg",children:["×¤×¢×•×œ×” ×–×• ×”×™× ×‘×œ×ª×™ ×”×¤×™×›×”.",e.jsx("br",{}),"×›×œ ×”× ×ª×•× ×™× ×™××‘×“×• ×œ× ×¦×—."]}),e.jsxs("div",{className:"flex gap-3 flex-col",children:[e.jsxs("button",{onClick:ut,className:"w-full py-4 bg-red-600 hover:bg-red-700 text-white font-black text-xl rounded-2xl shadow-xl shadow-red-200 transition-transform transform hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(Ae,{className:"w-6 h-6"})," ×›×Ÿ, ×ž×—×§ ××ª ×”×ž×©×™×ž×” ×œ×¦×ž×™×ª×•×ª"]}),e.jsx("button",{onClick:()=>Q({step:"none",courseId:null}),className:"w-full py-3 text-gray-500 font-bold hover:text-gray-800 hover:bg-gray-50 rounded-xl transition-colors",children:"×”×ª×—×¨×˜×ª×™, ×‘×˜×œ ×ž×—×™×§×”"})]})]})})}),document.body),Z&&e.jsx(Wt,{isOpen:!!Z,onClose:()=>fe(null),courseId:Z.id,courseTitle:Z.title,initialTab:"assign"}),ns&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-50 overflow-auto",children:e.jsx(de.Suspense,{fallback:e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Bt,{size:"xl",color:"primary",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"×˜×•×¢×Ÿ ×œ×•×— ×‘×§×¨×” ××“×¤×˜×™×‘×™..."})]})}),children:e.jsx(xa,{courseId:ns,onBack:()=>re(null),onViewStudent:s=>{const t=xe.find(n=>n.id===s);t&&Ne(t)},onViewLessonPlan:s=>{re(null),qe(s)},onEditCourse:s=>{re(null),a&&a(s)},onCreateRemediation:(s,t)=>{console.log("Create remediation:",{studentId:s,type:t}),alert(`×™×¦×™×¨×ª ×™×—×™×“×ª ${t||"×ª×’×‘×•×¨"} ${s?"×œ×ª×œ×ž×™×“":"×œ×›×™×ª×”"} - ×™×ª×•×•×¡×£ ×‘×§×¨×•×‘`)}})})}),lt&&ue.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",dir:"rtl",onClick:()=>Xe(!1),children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden animate-scale-in",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-l from-wizdi-royal to-wizdi-cyan p-5 text-white flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"w-7 h-7 opacity-90"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"×©×™×ž×•×© ×—×•×“×©×™"}),l&&e.jsxs("p",{className:"text-sm opacity-80",children:["××™×¤×•×¡ ×‘×¢×•×“ ",Math.ceil((new Date(l.resetDate).getTime()-Date.now())/(1e3*60*60*24))," ×™×ž×™×"]})]})]}),e.jsx("button",{onClick:()=>Xe(!1),className:"hover:bg-white/20 p-2 rounded-full transition-colors",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:l?e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:`px-4 py-1.5 rounded-full text-sm font-bold ${l.tier==="free"?"bg-slate-100 text-slate-700":l.tier==="basic"?"bg-blue-100 text-blue-700":l.tier==="pro"?"bg-purple-100 text-purple-700":"bg-amber-100 text-amber-700"}`,children:l.tier==="free"?"×—×™× ×ž×™":l.tier==="basic"?"×‘×¡×™×¡×™":l.tier==="pro"?"×ž×§×¦×•×¢×™":"××¨×’×•× ×™"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 font-medium",children:[e.jsx(Yt,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"×˜×•×§× ×™×"})]}),e.jsxs("span",{className:"text-slate-500",children:[l.usage.textTokens.used.toLocaleString()," / ",l.usage.textTokens.limit===Number.MAX_SAFE_INTEGER?"âˆž":l.usage.textTokens.limit.toLocaleString()]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${l.usage.textTokens.percent>=95?"bg-red-500":l.usage.textTokens.percent>=80?"bg-amber-500":"bg-blue-500"}`,style:{width:`${Math.min(l.usage.textTokens.percent,100)}%`}})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 font-medium",children:[e.jsx(Ft,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"×ª×ž×•× ×•×ª"})]}),e.jsxs("span",{className:"text-slate-500",children:[l.usage.images.used.toLocaleString()," / ",l.usage.images.limit===Number.MAX_SAFE_INTEGER?"âˆž":l.usage.images.limit.toLocaleString()]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${l.usage.images.percent>=95?"bg-red-500":l.usage.images.percent>=80?"bg-amber-500":"bg-green-500"}`,style:{width:`${Math.min(l.usage.images.percent,100)}%`}})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 font-medium",children:[e.jsx(Vt,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:"×“×§×•×ª ××•×“×™×•"})]}),e.jsxs("span",{className:"text-slate-500",children:[l.usage.audio.used.toFixed(1)," / ",l.usage.audio.limit===Number.MAX_SAFE_INTEGER?"âˆž":l.usage.audio.limit.toFixed(1)]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${l.usage.audio.percent>=95?"bg-red-500":l.usage.audio.percent>=80?"bg-amber-500":"bg-purple-500"}`,style:{width:`${Math.min(l.usage.audio.percent,100)}%`}})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 font-medium",children:[e.jsx(ea,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{children:"×¤×•×“×§××¡×˜×™×"})]}),e.jsxs("span",{className:"text-slate-500",children:[l.usage.podcasts.used.toLocaleString()," / ",l.usage.podcasts.limit===Number.MAX_SAFE_INTEGER?"âˆž":l.usage.podcasts.limit.toLocaleString()]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${l.usage.podcasts.percent>=95?"bg-red-500":(l.usage.podcasts.percent>=80,"bg-amber-500")}`,style:{width:`${Math.min(l.usage.podcasts.percent,100)}%`}})})]})]}),(l.usage.textTokens.percent>=80||l.usage.images.percent>=80||l.usage.audio.percent>=80)&&e.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(es,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"×ž×ª×§×¨×‘ ×œ×ž×›×¡×”"}),e.jsx("p",{className:"text-xs text-amber-600",children:"×”×©×™×ž×•×© ×©×œ×š ×ž×ª×§×¨×‘ ×œ×ž×›×¡×” ×”×—×•×“×©×™×ª. ×©×§×•×œ ×œ×©×“×¨×’ ××ª ×”×ª×•×›× ×™×ª."})]})]})}),l.tier!=="enterprise"&&e.jsxs("button",{className:"w-full py-3 bg-gradient-to-l from-wizdi-royal to-wizdi-cyan text-white font-bold rounded-xl hover:opacity-90 transition-opacity flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5"}),"×©×“×¨×’ ×ª×•×›× ×™×ª"]})]}):e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-1/3 mx-auto"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded"})]})})]})}),document.body)]})};export{ka as default};
//# sourceMappingURL=TeacherDashboard-NaKQzVKi.js.map
