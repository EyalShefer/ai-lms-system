import{c as G,r as p,j as e,O as de,H as xe,bu as I,bq as J,bs as T,bl as me,n as he,p as A,bz as Q,aw as W,bA as P,bJ as H,bY as be,bn as Y,bo as X,bp as F,E as pe,D as ue}from"./index-1x3sw4DL.js";import{I as ge}from"./IconArrowRight-j5ND1Yvb.js";import{I as K,a as je,b as fe}from"./IconTrendingDown-CUFgg3Ua.js";import{I as O}from"./IconUsers-Br9myKfl.js";import{I as Z}from"./IconChartBar-C9Gh53Hd.js";import{I as V}from"./IconTrendingUp-i0z6cZ8R.js";import{I as Ne}from"./IconActivity-BxB4o3hw.js";import{I as ve}from"./IconMail-BDnpP6ds.js";import{I as ye}from"./IconBrain-B9doffEc.js";/**
 * @license @tabler/icons-react v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M3 4l18 0",key:"svg-0"}],["path",{d:"M4 4v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-10",key:"svg-1"}],["path",{d:"M12 16l0 4",key:"svg-2"}],["path",{d:"M9 20l6 0",key:"svg-3"}],["path",{d:"M8 12l3 -3l2 2l3 -3",key:"svg-4"}]],ke=G("outline","presentation","Presentation",we);/**
 * @license @tabler/icons-react v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M8 8a3.5 3 0 0 1 3.5 -3h1a3.5 3 0 0 1 3.5 3a3 3 0 0 1 -2 3a3 4 0 0 0 -2 4",key:"svg-0"}],["path",{d:"M12 19l0 .01",key:"svg-1"}]],Ce=G("outline","question-mark","QuestionMark",Se),ze=s=>{if(!s)return"activity";const l=s.productType||s.mode;return l==="exam"?"exam":l==="lesson"?"lesson":"activity"},$=s=>s<60?`${Math.round(s)} שניות`:s<3600?`${Math.round(s/60)} דקות`:`${Math.round(s/3600)} שעות`,Ie=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("he-IL",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"-",z=({title:s,value:l,icon:t,color:r,trend:a})=>e.jsx("div",{className:"bg-white rounded-2xl p-5 border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-sm font-medium mb-1",children:s}),e.jsx("p",{className:`text-3xl font-black ${r}`,children:l}),a&&e.jsxs("div",{className:`flex items-center gap-1 mt-2 text-sm ${a.isPositive?"text-emerald-600":"text-red-500"}`,children:[a.isPositive?e.jsx(V,{size:16}):e.jsx(fe,{size:16}),e.jsxs("span",{children:[a.value,"%"]})]})]}),e.jsx("div",{className:`p-3 rounded-xl ${r.replace("text-","bg-").replace("-600","-100")}`,children:t})]})}),$e=({student:s,contentType:l,onView:t})=>{var n;const r=()=>{switch(s.status){case"submitted":return e.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-bold",children:"הושלם"});case"in_progress":return e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-bold",children:"בתהליך"});default:return e.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-500 rounded-full text-xs font-bold",children:"לא התחיל"})}},a=()=>{if(l!=="activity"||!s.variantUsed)return null;const c={הבנה:{label:"הבנה",icon:Y,color:"bg-blue-100 text-blue-700"},יישום:{label:"יישום",icon:X,color:"bg-amber-100 text-amber-700"},העמקה:{label:"העמקה",icon:F,color:"bg-purple-100 text-purple-700"}}[s.variantUsed];return e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${c.color} flex items-center gap-1`,children:[e.jsx(c.icon,{className:"w-3 h-3"}),c.label]})};return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors border-b border-slate-100",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center text-white font-bold",children:s.studentName.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800",children:s.studentName}),s.studentEmail&&e.jsx("p",{className:"text-xs text-slate-400",children:s.studentEmail})]})]})}),e.jsx("td",{className:"p-4",children:r()}),l==="activity"&&e.jsx("td",{className:"p-4",children:a()}),e.jsx("td",{className:"p-4",children:s.status==="submitted"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${s.score>=80?"bg-emerald-500":s.score>=60?"bg-amber-500":"bg-red-500"}`,style:{width:`${s.score}%`}})}),e.jsxs("span",{className:"font-bold text-slate-700",children:[Math.round(s.score),"%"]})]}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsx("td",{className:"p-4 text-slate-500 text-sm",children:(n=s.telemetry)!=null&&n.timeSpentSeconds?$(s.telemetry.timeSpentSeconds):"-"}),e.jsx("td",{className:"p-4 text-slate-500 text-sm",children:Ie(s.submittedAt)}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-400 hover:text-indigo-600",title:"צפה בהגשה",children:e.jsx(K,{size:18})})})]})},Me=({analysis:s})=>e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-800 line-clamp-2",children:s.question}),e.jsx("span",{className:"text-xs text-slate-400 mt-1",children:s.type})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${s.successRate>=70?"bg-emerald-100 text-emerald-700":s.successRate>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[Math.round(s.successRate),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 text-emerald-600",children:[e.jsx(pe,{size:16}),e.jsxs("span",{children:[s.correctCount," נכון"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(ue,{size:16}),e.jsxs("span",{children:[s.incorrectCount," שגוי"]})]}),s.avgTimeSeconds&&e.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[e.jsx(T,{size:16}),e.jsx("span",{children:$(s.avgTimeSeconds)})]})]}),s.commonWrongAnswers&&s.commonWrongAnswers.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"תשובות שגויות נפוצות:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.commonWrongAnswers.slice(0,3).map((l,t)=>e.jsxs("span",{className:"text-xs bg-red-50 text-red-600 px-2 py-1 rounded",children:[l.answer," (",l.count,")"]},t))})]})]}),Ae=({submissions:s})=>{const l=p.useMemo(()=>{const t=[{label:"0-20",min:0,max:20,count:0,color:"bg-red-500"},{label:"21-40",min:21,max:40,count:0,color:"bg-orange-500"},{label:"41-60",min:41,max:60,count:0,color:"bg-amber-500"},{label:"61-80",min:61,max:80,count:0,color:"bg-lime-500"},{label:"81-100",min:81,max:100,count:0,color:"bg-emerald-500"}];s.filter(a=>a.status==="submitted").forEach(a=>{const n=t.find(d=>a.score>=d.min&&a.score<=d.max);n&&n.count++});const r=Math.max(...t.map(a=>a.count),1);return t.map(a=>({...a,height:a.count/r*100}))},[s]);return e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"text-indigo-600",size:20}),"התפלגות ציונים"]}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-40",children:l.map((t,r)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full bg-slate-100 rounded-t-lg relative",style:{height:"120px"},children:e.jsx("div",{className:`absolute bottom-0 w-full ${t.color} rounded-t-lg transition-all duration-500`,style:{height:`${t.height}%`}})}),e.jsx("span",{className:"text-xs text-slate-500 font-medium",children:t.label}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:t.count})]},r))})]})},Te=({submissions:s})=>{const l=p.useMemo(()=>({הבנה:s.filter(r=>r.variantUsed==="הבנה"||r.masteryLevel&&r.masteryLevel<.4),יישום:s.filter(r=>r.variantUsed==="יישום"||r.masteryLevel&&r.masteryLevel>=.4&&r.masteryLevel<=.8),העמקה:s.filter(r=>r.variantUsed==="העמקה"||r.masteryLevel&&r.masteryLevel>.8)}),[s]);return e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(ye,{className:"text-indigo-600",size:20}),"מפת רמות התלמידים"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(Y,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-blue-800",children:"הבנה"}),e.jsx("p",{className:"text-xs text-blue-600",children:"צריכים עזרה"})]})]}),e.jsx("p",{className:"text-3xl font-black text-blue-700",children:l.הבנה.length}),e.jsxs("div",{className:"mt-3 space-y-1 max-h-24 overflow-y-auto",children:[l.הבנה.slice(0,5).map(t=>e.jsx("p",{className:"text-xs text-blue-600 truncate",children:t.studentName},t.id)),l.הבנה.length>5&&e.jsxs("p",{className:"text-xs text-blue-400",children:["+",l.הבנה.length-5," נוספים"]})]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border-2 border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-amber-800",children:"יישום"}),e.jsx("p",{className:"text-xs text-amber-600",children:"מתקדמים יציב"})]})]}),e.jsx("p",{className:"text-3xl font-black text-amber-700",children:l.יישום.length}),e.jsxs("div",{className:"mt-3 space-y-1 max-h-24 overflow-y-auto",children:[l.יישום.slice(0,5).map(t=>e.jsx("p",{className:"text-xs text-amber-600 truncate",children:t.studentName},t.id)),l.יישום.length>5&&e.jsxs("p",{className:"text-xs text-amber-400",children:["+",l.יישום.length-5," נוספים"]})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 border-2 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(F,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-purple-800",children:"העמקה"}),e.jsx("p",{className:"text-xs text-purple-600",children:"מצטיינים"})]})]}),e.jsx("p",{className:"text-3xl font-black text-purple-700",children:l.העמקה.length}),e.jsxs("div",{className:"mt-3 space-y-1 max-h-24 overflow-y-auto",children:[l.העמקה.slice(0,5).map(t=>e.jsx("p",{className:"text-xs text-purple-600 truncate",children:t.studentName},t.id)),l.העמקה.length>5&&e.jsxs("p",{className:"text-xs text-purple-400",children:["+",l.העמקה.length-5," נוספים"]})]})]})]})]})},De=({submissions:s,courseGrade:l})=>{const t=p.useMemo(()=>{const r=new Map;return s.forEach(a=>{const n=a.proficiencyVector||{};Object.entries(n).forEach(([d,c])=>{if(!d.startsWith("bloom_")&&d!=="general"){r.has(d)||r.set(d,{sum:0,count:0,strugglingStudents:[]});const b=r.get(d);b.sum+=c,b.count++,c<.5&&b.strugglingStudents.push(a.studentName)}})}),Array.from(r.entries()).map(([a,n])=>({topic:a,avgMastery:n.count>0?n.sum/n.count:0,studentCount:n.count,strugglingStudents:n.strugglingStudents})).sort((a,n)=>a.avgMastery-n.avgMastery)},[s]);return t.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"text-purple-600",size:20}),"התקדמות לפי נושאי תכנית הלימודים"]}),e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"אין עדיין נתוני שליטה לפי נושאים מתכנית הלימודים"})]}):e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"text-purple-600",size:20}),"התקדמות לפי נושאי תכנית הלימודים",l&&e.jsxs("span",{className:"text-xs text-slate-400 font-normal",children:["(כיתה ",l,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.slice(0,6).map(({topic:r,avgMastery:a,studentCount:n,strugglingStudents:d})=>e.jsxs("div",{className:`rounded-xl p-4 border ${a<.5?"bg-red-50 border-red-200":a<.7?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:[e.jsx("h4",{className:"font-bold text-sm text-slate-700 mb-2 truncate",title:r,children:r}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:`text-2xl font-black ${a<.5?"text-red-600":a<.7?"text-yellow-600":"text-green-600"}`,children:[Math.round(a*100),"%"]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[n," תלמידים"]})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 mb-2",children:e.jsx("div",{className:`h-1.5 rounded-full ${a<.5?"bg-red-500":a<.7?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.round(a*100)}%`}})}),d.length>0&&e.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["מתקשים: ",d.slice(0,2).join(", "),d.length>2&&` (+${d.length-2})`]})]},r))}),t.length>6&&e.jsxs("p",{className:"text-xs text-slate-400 text-center mt-3",children:["+ ",t.length-6," נושאים נוספים"]})]})},Re=({submissions:s,totalStudents:l})=>{const t=p.useMemo(()=>{const r=s.filter(c=>c.status==="submitted").length,a=s.filter(c=>c.status==="in_progress").length,n=l-r-a,d=s.filter(c=>{var b;return(b=c.telemetry)==null?void 0:b.timeSpentSeconds}).reduce((c,b)=>{var y;return c+(((y=b.telemetry)==null?void 0:y.timeSpentSeconds)||0)},0)/(r||1);return{completed:r,inProgress:a,notStarted:n,avgTime:d}},[s,l]);return e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(ke,{className:"text-indigo-600",size:20}),"סטטוס השלמה"]}),e.jsxs("div",{className:"flex items-center gap-8 mb-6",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"#e2e8f0",strokeWidth:"12"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",fill:"none",stroke:"#10b981",strokeWidth:"12",strokeDasharray:`${t.completed/l*352} 352`,strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-3xl font-black text-slate-800",children:[Math.round(t.completed/l*100),"%"]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsxs("span",{className:"text-slate-600",children:["השלימו: ",e.jsx("strong",{children:t.completed})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),e.jsxs("span",{className:"text-slate-600",children:["בתהליך: ",e.jsx("strong",{children:t.inProgress})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-300"}),e.jsxs("span",{className:"text-slate-600",children:["לא התחילו: ",e.jsx("strong",{children:t.notStarted})]})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 flex items-center gap-4",children:[e.jsx(T,{className:"text-slate-400",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"זמן למידה ממוצע"}),e.jsx("p",{className:"text-xl font-bold text-slate-800",children:$(t.avgTime)})]})]})]})},Ee=({students:s,onSendReminder:l})=>s.length===0?null:e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-5",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(J,{className:"text-amber-600 mt-1",size:24}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-amber-800",children:["תלמידים שטרם התחילו (",s.length,")"]}),e.jsxs("p",{className:"text-sm text-amber-600 mt-1",children:[s.slice(0,3).map(t=>t.studentName).join(", "),s.length>3&&` ועוד ${s.length-3}`]})]})]}),e.jsxs("button",{onClick:l,className:"px-4 py-2 bg-amber-600 text-white rounded-xl font-bold text-sm hover:bg-amber-700 transition-colors flex items-center gap-2",children:[e.jsx(ve,{size:16}),"שלח תזכורת"]})]})}),Ge=({courseId:s,onBack:l,onViewStudent:t,onViewLessonPlan:r,onEditCourse:a})=>{const[n,d]=p.useState(null),[c,b]=p.useState([]),[y,ee]=p.useState([]),[se,te]=p.useState(!0),[D,R]=p.useState(!1),u=ze(n);p.useEffect(()=>{(async()=>{try{const m=await me(he(A,"courses",s));m.exists()&&d({id:m.id,...m.data()});const f=Q(W(A,"submissions"),P("courseId","==",s)),v=(await H(f)).docs.map(o=>({id:o.id,...o.data()}));if(b(v),m.exists()){const o=m.data();(o.productType==="exam"||o.mode==="exam")&&le(o,v)}}catch(m){console.error("Error fetching control center data:",m)}finally{te(!1)}})()},[s]);const le=(i,m)=>{var o,g,k,L;const v=(((L=(k=(g=(o=i.syllabus)==null?void 0:o[0])==null?void 0:g.learningUnits)==null?void 0:k[0])==null?void 0:L.activityBlocks)||[]).filter(j=>["multiple-choice","open-question","fill_in_blanks","ordering","categorization"].includes(j.type)).map(j=>{var q,B;const S=m.filter(x=>{var h;return(h=x.answers)==null?void 0:h[j.id]}).map(x=>{var h,U;return{answer:x.answers[j.id],isCorrect:((U=(h=x.telemetry)==null?void 0:h.stepResults)==null?void 0:U[j.id])==="success"}}),_=S.filter(x=>x.isCorrect).length,ce=S.filter(x=>!x.isCorrect).length,ie=S.filter(x=>!x.isCorrect),M={};ie.forEach(x=>{const h=typeof x.answer=="string"?x.answer:JSON.stringify(x.answer);M[h]=(M[h]||0)+1});const oe=Object.entries(M).map(([x,h])=>({answer:x,count:h})).sort((x,h)=>h.count-x.count);return{blockId:j.id,question:((q=j.content)==null?void 0:q.question)||((B=j.content)==null?void 0:B.instruction)||"שאלה",type:j.type,correctCount:_,incorrectCount:ce,successRate:S.length>0?_/S.length*100:0,commonWrongAnswers:oe}});ee(v)},ae=async()=>{R(!0);const i=Q(W(A,"submissions"),P("courseId","==",s)),f=(await H(i)).docs.map(N=>({id:N.id,...N.data()}));b(f),R(!1)},re=()=>{alert("פונקציית שליחת תזכורת תיושם בקרוב")},ne=()=>{alert("פונקציית ייצוא תיושם בקרוב")},w=p.useMemo(()=>{const i=c.filter(o=>o.status==="submitted"),m=i.length>0?i.reduce((o,g)=>o+g.score,0)/i.length:0,f=i.filter(o=>o.score<60).length,N=i.filter(o=>o.score>=90).length,v=i.filter(o=>{var g;return(g=o.telemetry)==null?void 0:g.timeSpentSeconds}).reduce((o,g)=>{var k;return o+(((k=g.telemetry)==null?void 0:k.timeSpentSeconds)||0)},0)/(i.length||1);return{avgScore:m,atRisk:f,excellent:N,submitted:i.length,avgTime:v}},[c]),E=c.filter(i=>i.status==="not_started"),C={activity:{label:"פעילות",icon:e.jsx(Ne,{size:20}),color:"text-indigo-600",bgColor:"bg-indigo-100"},exam:{label:"מבחן",icon:e.jsx(be,{size:20}),color:"text-cyan-600",bgColor:"bg-cyan-100"},lesson:{label:"מערך שיעור",icon:e.jsx(I,{size:20}),color:"text-emerald-600",bgColor:"bg-emerald-100"}}[u];return se?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",dir:"rtl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(de,{size:"xl",color:"primary",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"טוען נתונים..."})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50 p-6",dir:"rtl",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"mb-8",children:[e.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-slate-500 hover:text-slate-700 mb-4 transition-colors",children:[e.jsx(ge,{size:20}),"חזרה לדשבורד"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${C.bgColor} ${C.color} flex items-center gap-1`,children:[C.icon,C.label]})}),e.jsx("h1",{className:"text-3xl font-black text-slate-800",children:(n==null?void 0:n.title)||"לוח בקרה"}),e.jsxs("p",{className:"text-slate-500 mt-1",children:[n==null?void 0:n.subject," • ",n==null?void 0:n.gradeLevel]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:ae,disabled:D,className:"p-3 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-colors disabled:opacity-50",title:"רענן נתונים",children:e.jsx(xe,{size:20,className:`text-slate-600 ${D?"animate-spin":""}`})}),r&&e.jsxs("button",{onClick:()=>r(s),className:"px-4 py-2 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",title:"צפה במערך השיעור",children:[e.jsx(K,{size:18}),"צפה במערך"]}),a&&e.jsxs("button",{onClick:()=>a(s),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors flex items-center gap-2",title:"ערוך את הפעילות",children:[e.jsx(I,{size:18}),"ערוך"]}),e.jsxs("button",{onClick:ne,className:"px-4 py-2 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[e.jsx(je,{size:18}),"ייצוא"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(z,{title:"תלמידים שהגישו",value:`${w.submitted}/${c.length}`,icon:e.jsx(O,{size:24,className:"text-indigo-600"}),color:"text-indigo-600"}),e.jsx(z,{title:"ציון ממוצע",value:`${Math.round(w.avgScore)}%`,icon:e.jsx(Z,{size:24,className:"text-emerald-600"}),color:"text-emerald-600"}),e.jsx(z,{title:u==="activity"?"צריכים תגבור":"ציון נמוך",value:w.atRisk,icon:e.jsx(J,{size:24,className:"text-amber-600"}),color:"text-amber-600"}),e.jsx(z,{title:"מצטיינים",value:w.excellent,icon:e.jsx(V,{size:24,className:"text-purple-600"}),color:"text-purple-600"})]}),E.length>0&&e.jsx("div",{className:"mb-8",children:e.jsx(Ee,{students:E,onSendReminder:re})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[u==="activity"&&e.jsx(Te,{submissions:c}),u==="activity"&&e.jsx(De,{submissions:c,courseGrade:n==null?void 0:n.targetAudience}),u==="exam"&&e.jsx(Ae,{submissions:c}),u==="lesson"&&e.jsx(Re,{submissions:c,totalStudents:c.length||30}),u==="exam"&&y.length>0?e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Ce,{className:"text-indigo-600",size:20}),"ניתוח שאלות"]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:y.map(i=>e.jsx(Me,{analysis:i},i.blockId))})]}):e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(T,{className:"text-indigo-600",size:20}),"זמני ביצוע"]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-4xl font-black text-slate-800 mb-2",children:$(w.avgTime)}),e.jsx("p",{className:"text-slate-500",children:"זמן ביצוע ממוצע"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(O,{className:"text-indigo-600",size:20}),"רשימת תלמידים (",c.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{className:"text-right text-sm text-slate-500 font-medium",children:[e.jsx("th",{className:"p-4",children:"תלמיד/ה"}),e.jsx("th",{className:"p-4",children:"סטטוס"}),u==="activity"&&e.jsx("th",{className:"p-4",children:"רמה"}),e.jsx("th",{className:"p-4",children:"ציון"}),e.jsx("th",{className:"p-4",children:"זמן"}),e.jsx("th",{className:"p-4",children:"הגשה"}),e.jsx("th",{className:"p-4",children:"פעולות"})]})}),e.jsx("tbody",{children:c.map(i=>e.jsx($e,{student:i,contentType:u,onView:()=>t==null?void 0:t(i.id)},i.id))})]})})]})]})})};export{Ge as TeacherControlCenter,Ge as default};
//# sourceMappingURL=TeacherControlCenter-D8q0RWs-.js.map
