import{A as i,B as r,bg as l}from"./index-1x3sw4DL.js";const c={NO_CAPTIONS:"NO_CAPTIONS",PRIVATE_VIDEO:"PRIVATE_VIDEO",VIDEO_NOT_FOUND:"VIDEO_NOT_FOUND",RATE_LIMITED:"RATE_LIMITED",NETWORK_ERROR:"NETWORK_ERROR",WHISPER_FAILED:"WHISPER_FAILED",INVALID_URL:"INVALID_URL",UNKNOWN:"UNKNOWN"};function a(s,e){const t=new Error(e);return t.code=s,t.userMessage=e,t}function u(s){var t,o;if((t=s==null?void 0:s.details)!=null&&t.code)return{code:s.details.code,userMessage:s.details.userMessage||"×©×’×™××” ×‘×ª××œ×•×œ ×”×¡×¨×˜×•×Ÿ"};const e=((o=s==null?void 0:s.message)==null?void 0:o.toLowerCase())||"";return e.includes("private")||e.includes("permission")?{code:c.PRIVATE_VIDEO,userMessage:"×”×¡×¨×˜×•×Ÿ ×¤×¨×˜×™ ×•×œ× × ×™×ª×Ÿ ×œ×’×©×ª ××œ×™×•"}:e.includes("not found")||e.includes("unavailable")||e.includes("404")?{code:c.VIDEO_NOT_FOUND,userMessage:"×”×¡×¨×˜×•×Ÿ ×œ× × ××¦× ××• ×©×”×•×¡×¨"}:e.includes("rate")||e.includes("429")||e.includes("quota")?{code:c.RATE_LIMITED,userMessage:"×™×•×ª×¨ ××“×™ ×‘×§×©×•×ª. × ×¡×• ×©×•×‘ ×‘×¢×•×“ ×“×§×”."}:e.includes("timeout")||e.includes("network")||e.includes("fetch")?{code:c.NETWORK_ERROR,userMessage:"×‘×¢×™×™×ª ×¨×©×ª. ×‘×“×§×• ××ª ×”×—×™×‘×•×¨ ×•× ×¡×• ×©×•×‘."}:e.includes("caption")||e.includes("subtitle")||e.includes("transcript")?{code:c.NO_CAPTIONS,userMessage:"×œ×¡×¨×˜×•×Ÿ ××™×Ÿ ×›×ª×•×‘×™×•×ª ×–××™× ×•×ª. × ×¡×• ×œ×”×¢×ª×™×§ ××ª ×”×ª××œ×™×œ ×™×“× ×™×ª ××™×•×˜×™×•×‘."}:{code:c.UNKNOWN,userMessage:"×©×’×™××” ×‘×ª××œ×•×œ ×”×¡×¨×˜×•×Ÿ. × ×¡×• ×©×•×‘ ××• ×”×¢×ª×™×§×• ××ª ×”×ª××œ×™×œ ×™×“× ×™×ª."}}const d={transcribeAudio:async s=>{try{if(s.size>25*1024*1024)throw console.error("Audio file too large:",s.size),a(c.UNKNOWN,"×§×•×‘×¥ ×”××•×“×™×• ×’×“×•×œ ××“×™ (××§×¡×™××•× 25MB)");return await l(s)}catch(e){throw console.error("Transcription failed:",e),e.code&&e.userMessage?e:a(c.WHISPER_FAILED,"×ª××œ×•×œ ×”×§×•×‘×¥ × ×›×©×œ. × ×¡×• ×§×•×‘×¥ ××—×¨ ××• ×¤×•×¨××˜ ××—×¨.")}},validateYouTubeUrl:s=>{if(!s||typeof s!="string")return null;const e=s.trim(),t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,/^([a-zA-Z0-9_-]{11})$/];for(const o of t){const n=e.match(o);if(n&&n[1])return n[1]}return null},processYoutubeUrl:async s=>{const e=d.validateYouTubeUrl(s);if(!e)throw a(c.INVALID_URL,"×”×§×™×©×•×¨ ×©×”×–× ×ª ×œ× ×ª×§×™×Ÿ. ×•×•×“××• ×©×–×” ×§×™×©×•×¨ ×œ×™×•×˜×™×•×‘.");try{console.log(`ğŸ¬ Processing YouTube video: ${e}`);const n=(await i(r,"transcribeYoutube",{timeout:3e5})({videoId:e,url:s})).data;if(!(n!=null&&n.text)||n.text.length<10)throw a(c.NO_CAPTIONS,"×œ× ×”×¦×œ×—× ×• ×œ×—×œ×¥ ×˜×§×¡×˜ ××”×¡×¨×˜×•×Ÿ. × ×¡×• ×œ×”×¢×ª×™×§ ××ª ×”×ª××œ×™×œ ×™×“× ×™×ª ××™×•×˜×™×•×‘.");return console.log(`âœ… Transcription successful: ${n.text.length} characters`),n.metadata&&console.log(`ğŸ“Š Source: ${n.metadata.source}, Translated: ${n.metadata.wasTranslated}`),n}catch(t){if(console.error("YouTube processing failed:",t),t.code&&t.userMessage)throw t;const{code:o,userMessage:n}=u(t);throw a(o,n)}},getErrorMessage:s=>{if(s!=null&&s.userMessage)return s.userMessage;const{userMessage:e}=u(s);return e},isRetryableError:s=>{const e=(s==null?void 0:s.code)||u(s).code;return[c.NETWORK_ERROR,c.RATE_LIMITED,c.UNKNOWN].includes(e)}};export{d as M,c as T};
//# sourceMappingURL=multimodalService-BOWYif01.js.map
