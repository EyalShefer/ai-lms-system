import{c as K,b0 as _,r as a,j as e,bM as h,D as A,E as S,bN as q,bs as Q,bO as U,bP as X,bD as B,bQ as T}from"./index-1x3sw4DL.js";import{I as H}from"./IconCalendar-DSCrS-DW.js";import{I as $}from"./IconUsers-Br9myKfl.js";import{I as J,a as M}from"./IconCopy-BTB5ujr3.js";/**
 * @license @tabler/icons-react v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]],z=K("outline","link","Link",V),W=({isOpen:N,onClose:o,courseId:j,courseTitle:c,unitId:x,unitTitle:s,taskType:w="activity"})=>{const{currentUser:n}=_(),[i,d]=a.useState(!1),[m,u]=a.useState(!1),[f,b]=a.useState(null),[l,y]=a.useState("all"),[g,t]=a.useState(s||c),[v,O]=a.useState(""),[k,E]=a.useState(""),[D,L]=a.useState("23:59"),[I,P]=a.useState(100);if(!N)return null;const F=async r=>{r.preventDefault(),d(!0),b(null);try{let p;k&&(p=new Date(`${k}T${D}`));const R={teacherId:(n==null?void 0:n.uid)||"",teacherName:(n==null?void 0:n.displayName)||"מורה",courseId:j,courseTitle:c,unitId:x,unitTitle:s,title:g,instructions:v,assignedTo:"all",dueDate:p,maxPoints:I,taskType:w};await X(R),u(!0),setTimeout(()=>{o(),u(!1)},1500)}catch(p){console.error("Error creating task:",p),b(p.message||"שגיאה ביצירת המשימה")}finally{d(!1)}},C=new Date;C.setDate(C.getDate()+1);const G=C.toISOString().split("T")[0];return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",onClick:r=>r.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-l from-indigo-600 to-purple-600 px-6 py-5 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsx(h,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"שליחה לתלמידים"}),e.jsxs("p",{className:"text-white/80 text-sm mt-0.5",children:[s?"פעילות":"קורס",": ",s||c]})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(A,{size:20})})]})}),m?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-in zoom-in duration-300",children:e.jsx(S,{size:40,className:"text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"המשימה נשלחה בהצלחה!"}),e.jsx("p",{className:"text-gray-500",children:"התלמידים יראו אותה בדשבורד שלהם"})]}):e.jsxs("form",{onSubmit:F,className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(q,{size:16,className:"inline ml-1"}),"כותרת המשימה"]}),e.jsx("input",{type:"text",value:g,onChange:r=>t(r.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"לדוגמה: תרגול פרק 3 - שברים",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"הוראות לתלמידים (אופציונלי)"}),e.jsx("textarea",{value:v,onChange:r=>O(r.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none",placeholder:"הוראות מיוחדות, טיפים, או הערות..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(H,{size:16,className:"inline ml-1"}),"תאריך הגשה"]}),e.jsx("input",{type:"date",value:k,onChange:r=>E(r.target.value),min:G,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(Q,{size:16,className:"inline ml-1"}),"שעת הגשה"]}),e.jsx("input",{type:"time",value:D,onChange:r=>L(r.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(U,{size:16,className:"inline ml-1"}),"ניקוד מקסימלי"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",value:I,onChange:r=>P(Number(r.target.value)),min:10,max:1e3,step:10,className:"w-32 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),e.jsx("span",{className:"text-gray-500 text-sm",children:"נקודות"})]})]}),e.jsx("div",{className:"bg-indigo-50 border border-indigo-100 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{size:20,className:"text-indigo-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-indigo-900",children:"נשלח לכל התלמידים"}),e.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"המשימה תופיע בדשבורד של כל התלמידים שנכנסים למערכת"})]})]})}),f&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(J,{size:20,className:"text-red-600"}),e.jsx("span",{className:"text-red-700 text-sm",children:f})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-3 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"ביטול"}),e.jsx("button",{type:"submit",disabled:i||!g.trim(),className:"flex-1 px-4 py-3 bg-gradient-to-l from-indigo-600 to-purple-600 text-white font-bold rounded-xl hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"שולח..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{size:18}),"שלח משימה"]})})]})]})]})})},te=({isOpen:N,onClose:o,courseId:j,courseTitle:c,unitTitle:x,unitId:s,initialTab:w="link",taskType:n="activity"})=>{const[i,d]=a.useState(w),[m,u]=a.useState(null),[f,b]=a.useState(!1);if(!N)return null;const l=`${window.location.origin}/?studentCourseId=${j}`,y=[{key:"universal",label:"Universal Link",description:"Students will see content assigned to them (or all if unspecified).",url:s?`${l}&unit=${s}`:l,icon:e.jsx(z,{size:18,className:"text-blue-500"})},{key:"הבנה",label:"רמת הבנה",description:"גישה לחומרי הבנה ותמיכה.",url:s?`${l}&unit=${s}&group=הבנה`:`${l}&group=הבנה`,icon:e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-100 border border-green-400"})},{key:"יישום",label:"רמת יישום",description:"גישה לתוכנית הלימודים הסטנדרטית.",url:s?`${l}&unit=${s}&group=יישום`:`${l}&group=יישום`,icon:e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-100 border border-blue-400"})},{key:"העמקה",label:"רמת העמקה",description:"אתגרים מתקדמים ופרויקטים נוספים.",url:s?`${l}&unit=${s}&group=העמקה`:`${l}&group=העמקה`,icon:e.jsx("div",{className:"w-4 h-4 rounded-full bg-purple-100 border border-purple-400"})}],g=(t,v)=>{navigator.clipboard.writeText(t).then(()=>{u(v),setTimeout(()=>u(null),2e3)})};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(B,{className:"text-indigo-600",size:24}),'Share "',x?`${x} (Activity)`:c,'"']}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Generate access links for students or colleagues"})]}),e.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(A,{size:20})})]}),e.jsxs("div",{className:"flex border-b border-gray-100 px-6 gap-4 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>d("assign"),className:`py-4 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${i==="assign"?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(h,{size:18})," שלח משימה"]}),e.jsxs("button",{onClick:()=>d("link"),className:`py-4 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${i==="link"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(z,{size:18})," קישור ישיר"]}),e.jsxs("button",{onClick:()=>d("classroom"),className:`py-4 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${i==="classroom"?"border-green-600 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(T,{size:18})," Google Classroom"]}),e.jsxs("button",{onClick:()=>d("collab"),className:`py-4 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${i==="collab"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx($,{size:18})," שיתוף מורים"]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar bg-gray-50/30 flex-1",children:[i==="assign"&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center space-y-6",dir:"rtl",children:[e.jsx("div",{className:"p-5 bg-gradient-to-br from-purple-100 to-indigo-100 text-purple-600 rounded-2xl",children:e.jsx(h,{size:56})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"שליחת משימה לתלמידים"}),e.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"שלח את הפעילות כמשימה לדשבורד של התלמידים, עם תאריך הגשה והוראות"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"px-8 py-3 bg-gradient-to-l from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:opacity-90 transition-opacity shadow-lg shadow-purple-200 flex items-center gap-2",children:[e.jsx(h,{size:20}),"צור משימה חדשה"]}),e.jsx("p",{className:"text-xs text-gray-400 max-w-xs",children:"המשימה תופיע אוטומטית בדשבורד של התלמידים עם התראה על משימה חדשה"})]}),i==="link"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-indigo-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:e.jsx(z,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Universal Link"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Smart routing based on student login/group"})]})]}),e.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-bold rounded uppercase tracking-wider",children:"Recommended"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-200 group focus-within:ring-2 ring-indigo-200 transition-all",children:[e.jsx("input",{type:"text",readOnly:!0,value:y[0].url,className:"flex-1 bg-transparent text-sm text-gray-600 font-mono focus:outline-none"}),e.jsxs("button",{onClick:()=>g(y[0].url,"universal"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-1.5 ${m==="universal"?"bg-green-500 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[m==="universal"?e.jsx(S,{size:16}):e.jsx(M,{size:16}),m==="universal"?"Copied":"Copy"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center",children:e.jsx("span",{className:"bg-gray-50 px-2 text-sm text-gray-500",children:"Or use direct access links"})})]}),e.jsx("div",{className:"grid gap-3",children:y.slice(1).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:border-indigo-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-50",children:t.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:t.label}),e.jsx("p",{className:"text-xs text-gray-400",children:t.description})]})]}),e.jsx("button",{onClick:()=>g(t.url,t.key),className:"text-gray-400 hover:text-indigo-600 p-2 rounded-full hover:bg-indigo-50 transition-all",title:"Copy Link",children:m===t.key?e.jsx(S,{size:18,className:"text-green-500"}):e.jsx(M,{size:18})})]},t.key))})]}),i==="classroom"&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-green-50 text-green-600 rounded-full",children:e.jsx(T,{size:48})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Google Classroom Integration"}),e.jsxs("p",{className:"text-sm text-gray-500 max-w-xs mx-auto mt-1",children:["Connect your classes to assign this ",x?"activity":"lesson"," directly to your students."]})]}),e.jsx("button",{className:"px-6 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors shadow-sm flex items-center gap-2",children:"Connect Classroom"})]}),i==="collab"&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-orange-50 text-orange-600 rounded-full",children:e.jsx($,{size:48})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Collaborate with Teachers"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-xs mx-auto mt-1",children:"Share a read-only or edit link with colleagues."})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full max-w-md bg-white p-2 rounded-lg border border-gray-200",children:[e.jsx("input",{className:"flex-1 text-sm bg-transparent outline-none px-2",value:`${l}/edit`,readOnly:!0}),e.jsx("button",{className:"text-indigo-600 font-medium text-sm px-3 hover:bg-indigo-50 rounded py-1",children:"Copy"})]})]})]}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:e.jsx("button",{onClick:o,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"סגור"})})]}),e.jsx(W,{isOpen:f,onClose:()=>{b(!1),o()},courseId:j,courseTitle:c,unitId:s,unitTitle:x,taskType:n})]})};export{te as S};
//# sourceMappingURL=ShareModal-DLbWhIEc.js.map
