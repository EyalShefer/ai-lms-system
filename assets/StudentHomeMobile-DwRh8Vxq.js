import{b0 as P,cn as D,r as b,j as e,O as G,co as F,c0 as w,b_ as m,cp as N,cq as A,br as y,E as L,bq as O,cr as k,bs as v,cj as E,D as z,cs as M,bY as I,bO as q,bu as B}from"./index-1x3sw4DL.js";import{I as H}from"./IconHome-4CYExOvd.js";const R=()=>({xp:1450,level:12,streak:{current:14},currency:{gems:450},league:{name:"Ruby",rank:4},dailyGoal:{targetXp:50,currentXp:35}}),K=({onSelectAssignment:C})=>{var j;const{currentUser:r}=P(),{assignments:i,loading:T,newTasksCount:c}=D(r==null?void 0:r.uid),l=R(),[a,h]=b.useState("all"),[s,d]=b.useState(null),[$,x]=b.useState(!1),p=(()=>{const t=[...i.new,...i.inProgress,...i.completed];switch(a){case"pending":return[...i.new,...i.inProgress];case"completed":return i.completed;default:return t}})(),u=i.new.length+i.inProgress.length,S=()=>{s&&(C(s.courseId,s.unitId),d(null))},g=t=>t==="exam"?e.jsx(I,{size:24}):t==="practice"?e.jsx(y,{size:24}):e.jsx(B,{size:24}),X=t=>t==="exam"?"":t==="practice"?"转专":"砖注专";return T?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{size:"lg",color:"primary",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-wizdi-royal font-bold",children:"注..."})]})}):e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 pb-24",dir:"rtl",children:[e.jsxs("header",{className:"bg-gradient-to-l from-wizdi-royal to-wizdi-cyan text-white px-4 py-5 safe-area-inset-top",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>x(!0),className:"p-2 min-w-[44px] min-h-[44px] hover:bg-white/20 rounded-full transition-colors","aria-label":"拽专 - 住专 注 住",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-white/20 px-3 py-1.5 rounded-full",children:[e.jsx(w,{className:"w-5 h-5 text-orange-300"}),e.jsx("span",{className:"font-bold text-sm",children:l.streak.current})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-white/20 px-3 py-1.5 rounded-full",children:[e.jsx(m,{className:"w-5 h-5 text-yellow-300"}),e.jsxs("span",{className:"font-bold text-sm",children:[l.xp," XP"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-white/20 px-3 py-1.5 rounded-full",children:[e.jsx(N,{className:"w-5 h-5 text-cyan-200"}),e.jsx("span",{className:"font-bold text-sm",children:l.currency.gems})]}),e.jsxs("button",{className:"relative p-2 min-w-[44px] min-h-[44px]","aria-label":c>0?`${c} 转专转`:"转专转",children:[e.jsx(A,{className:"w-6 h-6"}),c>0&&e.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] font-bold flex items-center justify-center",children:c})]})]}),e.jsxs("h1",{className:"text-xl font-black mb-3",children:[" ",((j=r==null?void 0:r.displayName)==null?void 0:j.split(" ")[0])||"转/","! "]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"专 转"}),e.jsxs("span",{className:"text-sm",children:[l.dailyGoal.currentXp,"/",l.dailyGoal.targetXp," XP"]})]}),e.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all",style:{width:`${Math.min(l.dailyGoal.currentXp/l.dailyGoal.targetXp*100,100)}%`},role:"progressbar","aria-valuenow":l.dailyGoal.currentXp,"aria-valuemax":l.dailyGoal.targetXp})})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-3 sticky top-0 z-10",children:e.jsxs("div",{className:"flex gap-2",role:"tablist","aria-label":"住 砖转",children:[e.jsx("button",{onClick:()=>h("all"),role:"tab","aria-selected":a==="all",className:`flex-1 py-3 min-h-[48px] rounded-xl font-bold text-sm transition-all ${a==="all"?"bg-wizdi-royal text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:""}),e.jsxs("button",{onClick:()=>h("pending"),role:"tab","aria-selected":a==="pending",className:`flex-1 py-3 min-h-[48px] rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-1 ${a==="pending"?"bg-wizdi-royal text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:["砖",u>0&&e.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs ${a==="pending"?"bg-white/20":"bg-wizdi-royal/10 text-wizdi-royal"}`,children:u})]}),e.jsx("button",{onClick:()=>h("completed"),role:"tab","aria-selected":a==="completed",className:`flex-1 py-3 min-h-[48px] rounded-xl font-bold text-sm transition-all ${a==="completed"?"bg-wizdi-royal text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:"砖"})]})}),e.jsx("main",{className:"px-4 py-4 space-y-3",role:"tabpanel",children:p.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-wizdi-cloud dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a==="completed"?e.jsx(y,{className:"w-8 h-8 text-slate-400"}):e.jsx(L,{className:"w-8 h-8 text-wizdi-action"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:a==="completed"?"注  砖转 砖砖":" 砖转 转转!"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:a==="completed"?"转 注 注 砖转":" ! 住转 "})]}):p.map(t=>{const n=t.status==="submitted"||t.status==="graded",o=t.isOverdue&&!n,f=t.isNew;return e.jsx("button",{onClick:()=>d(t),className:`w-full text-right p-4 bg-white dark:bg-slate-800 rounded-2xl border-2 transition-all active:scale-[0.98] ${f?"border-wizdi-cyan shadow-lg shadow-wizdi-cyan/10":o?"border-red-200":n?"border-slate-100 dark:border-slate-700 opacity-75":"border-slate-100 dark:border-slate-700"}`,"aria-label":`${X(t.taskType)}: ${t.title}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl flex-shrink-0 ${n?"bg-wizdi-action/10 text-wizdi-action":o?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-wizdi-royal/10 dark:bg-wizdi-royal/20 text-wizdi-royal"}`,children:g(t.taskType)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("h3",{className:`font-bold truncate ${n?"text-slate-400 dark:text-slate-500":"text-slate-800 dark:text-white"}`,children:t.title}),t.status==="graded"&&e.jsxs("span",{className:"px-2 py-0.5 bg-wizdi-action-light text-wizdi-action-dark text-xs font-bold rounded-full flex-shrink-0",children:[t.percentage,"%"]}),f&&e.jsx("span",{className:"px-2 py-0.5 bg-wizdi-cyan/20 text-wizdi-cyan text-xs font-bold rounded-full flex-shrink-0",children:"砖"}),o&&e.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 text-xs font-bold rounded-full flex-shrink-0 flex items-center gap-0.5",children:[e.jsx(O,{size:10})," 专"]})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate",children:t.courseTitle}),t.progress>0&&t.progress<100&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-wizdi-cyan rounded-full",style:{width:`${t.progress}%`}})})}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.dueDate&&!n?e.jsxs("span",{className:`text-xs flex items-center gap-1 ${o?"text-red-600":"text-slate-400"}`,children:[e.jsx(v,{size:12}),k(t.dueDate)]}):e.jsx("span",{}),e.jsxs("span",{className:"text-xs text-wizdi-gold flex items-center gap-1",children:[e.jsx(m,{size:12,className:"fill-wizdi-gold"}),t.maxPoints," 拽壮"]})]})]}),e.jsx(E,{className:"w-5 h-5 text-slate-400 flex-shrink-0 mt-1"})]})},t.id)})}),s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>d(null)}),e.jsxs("div",{className:"relative w-full bg-white dark:bg-slate-800 rounded-t-3xl animate-in slide-in-from-bottom duration-300 max-h-[85vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 pt-3 pb-2 px-4 border-b border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-1 bg-slate-300 dark:bg-slate-600 rounded-full mx-auto mb-3"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-black text-slate-800 dark:text-white",children:s.title}),e.jsx("button",{onClick:()=>d(null),className:"p-2 min-w-[44px] min-h-[44px]","aria-label":"住专",children:e.jsx(z,{className:"w-6 h-6 text-slate-400"})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:`p-2 rounded-lg ${s.taskType==="exam"?"bg-wizdi-cyan/10 text-wizdi-cyan":s.taskType==="practice"?"bg-wizdi-action/10 text-wizdi-action":"bg-wizdi-royal/10 text-wizdi-royal"}`,children:g(s.taskType)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s.courseTitle}),s.teacherName&&e.jsxs("p",{className:"text-xs text-slate-400",children:["专: ",s.teacherName]})]})]}),s.instructions&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4 mb-4",children:[e.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-2 text-sm",children:"专转:"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:s.instructions})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[s.dueDate&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[e.jsx(v,{size:18}),"注 砖"]}),e.jsx("span",{className:`font-medium ${s.isOverdue?"text-red-600":"text-slate-800 dark:text-white"}`,children:k(s.dueDate)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[e.jsx(m,{size:18,className:"text-wizdi-gold"}),"拽"]}),e.jsxs("span",{className:"font-medium text-slate-800 dark:text-white",children:[s.maxPoints," 拽转"]})]})]}),s.status==="graded"&&s.score!==void 0&&e.jsxs("div",{className:"bg-wizdi-action-light dark:bg-wizdi-action/20 rounded-xl p-4 mb-6 text-center",children:[e.jsxs("div",{className:"text-3xl font-black text-wizdi-action",children:[s.percentage,"%"]}),e.jsxs("div",{className:"text-sm text-wizdi-action/80",children:[s.score,"/",s.maxPoints," 拽转"]})]}),s.progress>0&&s.progress<100&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-500",children:"转拽转"}),e.jsxs("span",{className:"font-medium",children:[s.progress,"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-wizdi-cyan rounded-full",style:{width:`${s.progress}%`}})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>d(null),className:"flex-1 py-4 min-h-[56px] rounded-xl font-bold bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:"住专"}),e.jsxs("button",{onClick:S,disabled:s.status==="graded"||s.status==="submitted",className:`flex-1 py-4 min-h-[56px] rounded-xl font-bold flex items-center justify-center gap-2 ${s.status==="graded"||s.status==="submitted"?"bg-slate-200 dark:bg-slate-600 text-slate-400 cursor-not-allowed":"bg-wizdi-action hover:bg-wizdi-action-hover text-white"}`,children:[e.jsx(M,{size:20}),s.progress>0?"砖":"转"]})]})]})]})]}),$&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",role:"dialog","aria-modal":"true","aria-labelledby":"stats-legend-title-mobile",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>x(!1),"aria-hidden":"true"}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 w-[90%] max-w-sm rounded-3xl relative z-10 shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"bg-gradient-to-l from-wizdi-royal to-wizdi-cyan p-4 text-white flex items-center justify-between",children:[e.jsx("h2",{id:"stats-legend-title-mobile",className:"text-lg font-bold",children:"  住 专?"}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-white/20 rounded-full transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"住专",children:e.jsx(z,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-xl flex-shrink-0",children:e.jsx(w,{className:"text-orange-500 fill-orange-500 w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"专爪祝"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  专爪祝 转. 砖专 注 专爪祝  !"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex-shrink-0",children:e.jsx(m,{className:"text-yellow-500 fill-yellow-500 w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"拽转 (XP)"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"拽转 住 砖爪专 注  驻注转. 注 专  砖爪专 转专!"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-wizdi-cyan/10 rounded-xl flex-shrink-0",children:e.jsx(N,{className:"text-wizdi-cyan fill-wizdi-cyan w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm",children:""}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"爪专  注  拽 转 专  转!"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700",children:e.jsx("button",{onClick:()=>x(!1),className:"w-full bg-wizdi-royal text-white py-3 min-h-[48px] rounded-xl font-bold",children:"转!"})})]})]}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 px-4 py-2 safe-area-inset-bottom",children:e.jsxs("div",{className:"flex items-center justify-around",children:[e.jsxs("button",{className:"flex flex-col items-center gap-1 min-w-[64px] min-h-[56px] py-2 text-wizdi-royal","aria-label":"砖转","aria-current":"page",children:[e.jsx(I,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-bold",children:"砖转"})]}),e.jsxs("button",{className:"flex flex-col items-center gap-1 min-w-[64px] min-h-[56px] py-2 text-slate-400","aria-label":"砖",children:[e.jsx(q,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs",children:"砖"})]}),e.jsxs("button",{className:"flex flex-col items-center gap-1 min-w-[64px] min-h-[56px] py-2 text-slate-400","aria-label":"驻专驻",children:[e.jsx(H,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs",children:"驻专驻"})]})]})})]})};export{K as default};
//# sourceMappingURL=StudentHomeMobile-DwRh8Vxq.js.map
