{"version":3,"file":"SendActivitiesModal-B0HEUCEv.js","sources":["../../node_modules/@tabler/icons-react/dist/esm/icons/IconBrandWhatsapp.mjs","../../node_modules/@tabler/icons-react/dist/esm/icons/IconShare2.mjs","../../src/services/lessonActivityService.ts","../../src/components/SendActivitiesModal.tsx"],"sourcesContent":["/**\n * @license @tabler/icons-react v3.36.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1\", \"key\": \"svg-1\" }]];\nconst IconBrandWhatsapp = createReactComponent(\"outline\", \"brand-whatsapp\", \"BrandWhatsapp\", __iconNode);\n\nexport { __iconNode, IconBrandWhatsapp as default };\n//# sourceMappingURL=IconBrandWhatsapp.mjs.map\n","/**\n * @license @tabler/icons-react v3.36.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M12 14v-11\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M9 6l3 -3l3 3\", \"key\": \"svg-2\" }]];\nconst IconShare2 = createReactComponent(\"outline\", \"share-2\", \"Share2\", __iconNode);\n\nexport { __iconNode, IconShare2 as default };\n//# sourceMappingURL=IconShare2.mjs.map\n","/**\r\n * Lesson Activity Service\r\n *\r\n * Handles extraction of interactive activities from lesson plans\r\n * and creates separate activity courses that students can complete.\r\n */\r\n\r\nimport { collection, doc, addDoc, updateDoc, serverTimestamp, getDoc } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport type { ActivityBlock, Course, LearningUnit } from '../shared/types/courseTypes';\r\n\r\n// Progress callback type for UI feedback\r\nexport type ProgressCallback = (step: string, progress: number) => void;\r\n\r\n// ============ TYPES ============\r\n\r\nexport type BlockCategory = 'teacher_only' | 'presentation' | 'student_activity';\r\n\r\nexport interface ExtractedActivity {\r\n    id: string;\r\n    title: string;\r\n    blocks: ActivityBlock[];\r\n    sourceBlockIds: string[];\r\n    parentLessonId: string;\r\n    parentLessonTitle: string;\r\n}\r\n\r\nexport interface ActivityCourseLink {\r\n    activityCourseId: string;\r\n    parentLessonId: string;\r\n    parentLessonTitle: string;\r\n    extractedBlockIds: string[];\r\n    createdAt: any;\r\n    shareUrl: string;\r\n}\r\n\r\n// ============ BLOCK CATEGORIZATION ============\r\n\r\n/**\r\n * Interactive block types that students can interact with and submit answers\r\n */\r\nconst INTERACTIVE_BLOCK_TYPES = [\r\n    'multiple-choice',\r\n    'open-question',\r\n    'fill_in_blanks',\r\n    'ordering',\r\n    'categorization',\r\n    'memory_game',\r\n    'true_false_speed',\r\n    'drag_and_drop',\r\n    'hotspot',\r\n    'audio-response',\r\n    'interactive-chat',\r\n    // 8 New Question Types\r\n    'matching',\r\n    'highlight',\r\n    'sentence_builder',\r\n    'image_labeling',\r\n    'table_completion',\r\n    'text_selection',\r\n    'rating_scale',\r\n    'matrix'\r\n];\r\n\r\n/**\r\n * Presentation block types - content shown to students but no interaction\r\n */\r\nconst PRESENTATION_BLOCK_TYPES = [\r\n    'text',\r\n    'video',\r\n    'image',\r\n    'pdf',\r\n    'infographic',\r\n    'mindmap',\r\n    'podcast'\r\n];\r\n\r\n/**\r\n * Determines the category of a block based on its type and content\r\n */\r\nexport const categorizeBlock = (block: ActivityBlock): BlockCategory => {\r\n    // Check if block has teacher-only content\r\n    const content = block.content;\r\n    if (typeof content === 'object' && content !== null) {\r\n        // If it has teach_content but no student-facing content, it's teacher-only\r\n        if ('teach_content' in content && content.teach_content && !content.text) {\r\n            return 'teacher_only';\r\n        }\r\n    }\r\n\r\n    // Check block type\r\n    if (INTERACTIVE_BLOCK_TYPES.includes(block.type)) {\r\n        return 'student_activity';\r\n    }\r\n\r\n    if (PRESENTATION_BLOCK_TYPES.includes(block.type)) {\r\n        return 'presentation';\r\n    }\r\n\r\n    // Default to presentation for unknown types\r\n    return 'presentation';\r\n};\r\n\r\n/**\r\n * Checks if a block is sendable to students (interactive + has content)\r\n */\r\nexport const isBlockSendable = (block: ActivityBlock): boolean => {\r\n    const category = categorizeBlock(block);\r\n    if (category !== 'student_activity') return false;\r\n\r\n    // Verify the block has actual content\r\n    const content = block.content;\r\n    if (!content) return false;\r\n\r\n    if (typeof content === 'object') {\r\n        // Check for question content\r\n        if ('question' in content && content.question) return true;\r\n        if ('instruction' in content && content.instruction) return true;\r\n        if ('items' in content && Array.isArray(content.items) && content.items.length > 0) return true;\r\n    }\r\n\r\n    return typeof content === 'string' && content.length > 0;\r\n};\r\n\r\n/**\r\n * Gets all sendable blocks from a learning unit\r\n */\r\nexport const getSendableBlocks = (unit: LearningUnit): ActivityBlock[] => {\r\n    return (unit.activityBlocks || []).filter(isBlockSendable);\r\n};\r\n\r\n/**\r\n * Gets block type display name in Hebrew\r\n */\r\nexport const getBlockTypeLabel = (type: string): string => {\r\n    const labels: Record<string, string> = {\r\n        'multiple-choice': '×©××œ×” ×××¨×™×§××™×ª',\r\n        'open-question': '×©××œ×” ×¤×ª×•×—×”',\r\n        'fill_in_blanks': '×”×©×œ××ª ××©×¤×˜×™×',\r\n        'ordering': '×¡×™×“×•×¨ ×¨×¦×£',\r\n        'categorization': '××™×•×Ÿ ×œ×§×˜×’×•×¨×™×•×ª',\r\n        'memory_game': '××©×—×§ ×–×™×›×¨×•×Ÿ',\r\n        'true_false_speed': '× ×›×•×Ÿ/×œ× × ×›×•×Ÿ',\r\n        'drag_and_drop': '×’×¨×•×¨ ×•×©×—×¨×¨',\r\n        'hotspot': '× ×§×•×“×•×ª ×—××•×ª',\r\n        'audio-response': '×ª×©×•×‘×” ×§×•×œ×™×ª',\r\n        'interactive-chat': '×¦\\'××˜ ××™× ×˜×¨××§×˜×™×‘×™',\r\n        'text': '×˜×§×¡×˜',\r\n        'video': '×•×™×“××•',\r\n        'image': '×ª××•× ×”',\r\n        'pdf': '××¡××š PDF',\r\n        'infographic': '××™× ×¤×•×’×¨×¤×™×§×”',\r\n        'mindmap': '××¤×ª ×—×©×™×‘×”',\r\n        'podcast': '×¤×•×“×§××¡×˜',\r\n        // 8 New Question Types\r\n        'matching': '×”×ª×××”',\r\n        'highlight': '×¡×™××•×Ÿ ×‘×˜×§×¡×˜',\r\n        'sentence_builder': '×‘× ×™×™×ª ××©×¤×˜',\r\n        'image_labeling': '×ª×™×•×’ ×ª××•× ×”',\r\n        'table_completion': '×”×©×œ××ª ×˜×‘×œ×”',\r\n        'text_selection': '×‘×—×™×¨×” ××˜×§×¡×˜',\r\n        'rating_scale': '×¡×§××œ×ª ×“×™×¨×•×’',\r\n        'matrix': '××˜×¨×™×§×¡'\r\n    };\r\n    return labels[type] || type;\r\n};\r\n\r\n// ============ ACTIVITY EXTRACTION ============\r\n\r\n/**\r\n * Extracts selected blocks from a lesson plan and creates a new activity course\r\n *\r\n * Performance optimizations:\r\n * - Parallel database operations (addDoc + getDoc run concurrently)\r\n * - UUID-based IDs for better performance\r\n * - Optional progress callback for UI feedback\r\n */\r\nexport const extractActivityFromLesson = async (\r\n    parentCourse: Course,\r\n    parentUnit: LearningUnit,\r\n    selectedBlockIds: string[],\r\n    activityTitle?: string,\r\n    onProgress?: ProgressCallback\r\n): Promise<{ activityCourseId: string; shareUrl: string }> => {\r\n    onProgress?.('×××ª×¨ ×‘×œ×•×§×™× × ×‘×—×¨×™×...', 10);\r\n\r\n    // Get the selected blocks\r\n    const selectedBlocks = (parentUnit.activityBlocks || [])\r\n        .filter(b => selectedBlockIds.includes(b.id));\r\n\r\n    if (selectedBlocks.length === 0) {\r\n        throw new Error('×œ× × ×‘×—×¨×• ×‘×œ×•×§×™× ×œ×©×œ×™×—×”');\r\n    }\r\n\r\n    onProgress?.('×‘×•× ×” ×¤×¢×™×œ×•×ª...', 20);\r\n\r\n    // Create the activity course with UUID-based IDs\r\n    const moduleId = uuidv4();\r\n    const unitId = uuidv4();\r\n\r\n    const activityCourse: Partial<Course> = {\r\n        teacherId: parentCourse.teacherId,\r\n        title: activityTitle || `×¤×¢×™×œ×•×ª: ${parentUnit.title}`,\r\n        targetAudience: parentCourse.targetAudience,\r\n        gradeLevel: parentCourse.gradeLevel,\r\n        subject: parentCourse.subject,\r\n        mode: 'learning', // Activity mode\r\n        syllabus: [{\r\n            id: moduleId,\r\n            title: parentUnit.title,\r\n            learningUnits: [{\r\n                id: unitId,\r\n                title: parentUnit.title,\r\n                goals: parentUnit.goals,\r\n                type: 'practice',\r\n                baseContent: '',\r\n                activityBlocks: selectedBlocks.map(b => ({\r\n                    ...b,\r\n                    id: `${b.id}-${uuidv4().slice(0, 8)}` // UUID-based unique IDs\r\n                }))\r\n            }]\r\n        }],\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp()\r\n    };\r\n\r\n    // Add metadata to link back to parent\r\n    (activityCourse as any).productType = 'activity';\r\n    (activityCourse as any).shareableLink = true; // Allow anyone with link to access\r\n    (activityCourse as any).parentLesson = {\r\n        courseId: parentCourse.id,\r\n        unitId: parentUnit.id,\r\n        title: parentCourse.title,\r\n        extractedBlockIds: selectedBlockIds,\r\n        extractedAt: new Date().toISOString()\r\n    };\r\n\r\n    onProgress?.('×©×•××¨ ×œ××¡×“ × ×ª×•× ×™×...', 40);\r\n\r\n    // PERFORMANCE: Run addDoc and getDoc in PARALLEL\r\n    const parentCourseRef = doc(db, 'courses', parentCourse.id);\r\n    const [docRef, parentDoc] = await Promise.all([\r\n        addDoc(collection(db, 'courses'), activityCourse),\r\n        getDoc(parentCourseRef)\r\n    ]);\r\n\r\n    const activityCourseId = docRef.id;\r\n\r\n    onProgress?.('××¢×“×›×Ÿ ×§×™×©×•×¨×™×...', 70);\r\n\r\n    // Update parent with new activity reference\r\n    if (parentDoc.exists()) {\r\n        const existingExtracted = parentDoc.data().extractedActivities || [];\r\n        await updateDoc(parentCourseRef, {\r\n            extractedActivities: [...existingExtracted, {\r\n                activityCourseId,\r\n                blockIds: selectedBlockIds,\r\n                title: activityCourse.title,\r\n                createdAt: new Date().toISOString()\r\n            }],\r\n            updatedAt: serverTimestamp()\r\n        });\r\n    }\r\n\r\n    onProgress?.('××™×™×¦×¨ ×§×™×©×•×¨ ×©×™×ª×•×£...', 90);\r\n\r\n    // Generate share URL\r\n    const shareUrl = `${window.location.origin}/?studentCourseId=${activityCourseId}`;\r\n\r\n    onProgress?.('×”×•×©×œ×!', 100);\r\n\r\n    return { activityCourseId, shareUrl };\r\n};\r\n\r\n/**\r\n * Extracts all interactive blocks from a lesson plan as a single activity\r\n */\r\nexport const extractAllActivities = async (\r\n    parentCourse: Course,\r\n    parentUnit: LearningUnit,\r\n    activityTitle?: string,\r\n    onProgress?: ProgressCallback\r\n): Promise<{ activityCourseId: string; shareUrl: string }> => {\r\n    const sendableBlocks = getSendableBlocks(parentUnit);\r\n    const blockIds = sendableBlocks.map(b => b.id);\r\n\r\n    return extractActivityFromLesson(\r\n        parentCourse,\r\n        parentUnit,\r\n        blockIds,\r\n        activityTitle || `×›×œ ×”×¤×¢×™×œ×•×™×•×ª: ${parentUnit.title}`,\r\n        onProgress\r\n    );\r\n};\r\n\r\n/**\r\n * Gets context text for a block (preceding text block content)\r\n */\r\nexport const getBlockContext = (\r\n    blocks: ActivityBlock[],\r\n    blockIndex: number\r\n): string | null => {\r\n    // Look backwards for the nearest text block\r\n    for (let i = blockIndex - 1; i >= 0; i--) {\r\n        const block = blocks[i];\r\n        if (block.type === 'text') {\r\n            const content = block.content;\r\n            if (typeof content === 'string') return content;\r\n            if (typeof content === 'object' && content !== null) {\r\n                return (content as any).text || (content as any).teach_content || null;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n};\r\n\r\n/**\r\n * Groups blocks by their section (based on text block titles)\r\n */\r\nexport const groupBlocksBySections = (\r\n    blocks: ActivityBlock[]\r\n): { sectionTitle: string; blocks: ActivityBlock[] }[] => {\r\n    const sections: { sectionTitle: string; blocks: ActivityBlock[] }[] = [];\r\n    let currentSection: { sectionTitle: string; blocks: ActivityBlock[] } = {\r\n        sectionTitle: '×›×œ×œ×™',\r\n        blocks: []\r\n    };\r\n\r\n    blocks.forEach(block => {\r\n        if (block.type === 'text') {\r\n            const content = block.content;\r\n            let title: string | null = null;\r\n\r\n            // Extract title from text content\r\n            if (typeof content === 'string') {\r\n                const h3Match = content.match(/<h3[^>]*>(.*?)<\\/h3>/i);\r\n                if (h3Match) title = h3Match[1].replace(/<[^>]+>/g, '').trim();\r\n\r\n                if (!title) {\r\n                    const mdMatch = content.match(/^#+\\s*(.+)/m);\r\n                    if (mdMatch) title = mdMatch[1].trim();\r\n                }\r\n            }\r\n\r\n            if (title) {\r\n                // Save current section if it has blocks\r\n                if (currentSection.blocks.length > 0) {\r\n                    sections.push(currentSection);\r\n                }\r\n                // Start new section\r\n                currentSection = { sectionTitle: title, blocks: [] };\r\n            }\r\n        }\r\n\r\n        // Add interactive blocks to current section\r\n        if (isBlockSendable(block)) {\r\n            currentSection.blocks.push(block);\r\n        }\r\n    });\r\n\r\n    // Add final section\r\n    if (currentSection.blocks.length > 0) {\r\n        sections.push(currentSection);\r\n    }\r\n\r\n    return sections;\r\n};\r\n\r\n// ============ STATISTICS ============\r\n\r\n/**\r\n * Gets submission statistics for an extracted activity\r\n */\r\nexport const getActivityStats = async (activityCourseId: string): Promise<{\r\n    totalSubmissions: number;\r\n    avgScore: number;\r\n    completionRate: number;\r\n}> => {\r\n    // This would query the submissions collection\r\n    // For now, return placeholder\r\n    return {\r\n        totalSubmissions: 0,\r\n        avgScore: 0,\r\n        completionRate: 0\r\n    };\r\n};\r\n","/**\r\n * SendActivitiesModal\r\n *\r\n * Modal for teachers to select and send interactive activities\r\n * from a lesson plan to students.\r\n */\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport {\r\n    IconX,\r\n    IconSend,\r\n    IconCheck,\r\n    IconUsers,\r\n    IconCopy,\r\n    IconBrandWhatsapp,\r\n    IconMail,\r\n    IconShare2,\r\n    IconSparkles,\r\n    IconAlertCircle\r\n} from '@tabler/icons-react';\r\nimport type { LearningUnit, ActivityBlock, Course } from '../shared/types/courseTypes';\r\nimport {\r\n    getSendableBlocks,\r\n    getBlockTypeLabel,\r\n    groupBlocksBySections,\r\n    extractActivityFromLesson,\r\n    extractAllActivities,\r\n    isBlockSendable\r\n} from '../services/lessonActivityService';\r\n\r\ninterface SendActivitiesModalProps {\r\n    unit: LearningUnit;\r\n    course: Course;\r\n    onClose: () => void;\r\n    onSuccess?: (activityCourseId: string, shareUrl: string) => void;\r\n}\r\n\r\n// Block type icons\r\nconst BLOCK_ICONS: Record<string, string> = {\r\n    'multiple-choice': 'ğŸ“',\r\n    'open-question': 'âœï¸',\r\n    'fill_in_blanks': 'ğŸ“‹',\r\n    'ordering': 'ğŸ”¢',\r\n    'categorization': 'ğŸ“Š',\r\n    'memory_game': 'ğŸ§ ',\r\n    'true_false_speed': 'âš¡',\r\n    'drag_and_drop': 'ğŸ¯',\r\n    'hotspot': 'ğŸ“',\r\n    'matching': 'ğŸ”—',\r\n    'audio-response': 'ğŸ¤',\r\n    'interactive-chat': 'ğŸ’¬'\r\n};\r\n\r\nconst SendActivitiesModal: React.FC<SendActivitiesModalProps> = ({\r\n    unit,\r\n    course,\r\n    onClose,\r\n    onSuccess\r\n}) => {\r\n    const [selectedBlockIds, setSelectedBlockIds] = useState<Set<string>>(new Set());\r\n    const [activityTitle, setActivityTitle] = useState(`×¤×¢×™×œ×•×ª: ${unit.title}`);\r\n    const [step, setStep] = useState<'select' | 'share'>('select');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [shareUrl, setShareUrl] = useState<string | null>(null);\r\n    const [activityCourseId, setActivityCourseId] = useState<string | null>(null);\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    // Get sendable blocks\r\n    const sendableBlocks = useMemo(() => getSendableBlocks(unit), [unit]);\r\n\r\n    // Group blocks by sections\r\n    const sections = useMemo(() => groupBlocksBySections(unit.activityBlocks || []), [unit]);\r\n\r\n    // Toggle block selection\r\n    const toggleBlock = (blockId: string) => {\r\n        const newSelected = new Set(selectedBlockIds);\r\n        if (newSelected.has(blockId)) {\r\n            newSelected.delete(blockId);\r\n        } else {\r\n            newSelected.add(blockId);\r\n        }\r\n        setSelectedBlockIds(newSelected);\r\n    };\r\n\r\n    // Select all\r\n    const selectAll = () => {\r\n        setSelectedBlockIds(new Set(sendableBlocks.map(b => b.id)));\r\n    };\r\n\r\n    // Clear selection\r\n    const clearSelection = () => {\r\n        setSelectedBlockIds(new Set());\r\n    };\r\n\r\n    // Get block preview text\r\n    const getBlockPreview = (block: ActivityBlock): string => {\r\n        const content = block.content;\r\n        if (typeof content === 'string') {\r\n            return content.substring(0, 100) + (content.length > 100 ? '...' : '');\r\n        }\r\n        if (typeof content === 'object' && content !== null) {\r\n            if ('question' in content) return (content as any).question;\r\n            if ('instruction' in content) return (content as any).instruction;\r\n        }\r\n        return getBlockTypeLabel(block.type);\r\n    };\r\n\r\n    // Handle send\r\n    const handleSend = async () => {\r\n        if (selectedBlockIds.size === 0) return;\r\n\r\n        setIsLoading(true);\r\n        try {\r\n            const result = await extractActivityFromLesson(\r\n                course,\r\n                unit,\r\n                Array.from(selectedBlockIds),\r\n                activityTitle\r\n            );\r\n\r\n            setActivityCourseId(result.activityCourseId);\r\n            setShareUrl(result.shareUrl);\r\n            setStep('share');\r\n            onSuccess?.(result.activityCourseId, result.shareUrl);\r\n        } catch (error) {\r\n            console.error('Error extracting activity:', error);\r\n            alert('×©×’×™××” ×‘×™×¦×™×¨×ª ×”×¤×¢×™×œ×•×ª');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // Copy link\r\n    const handleCopyLink = async () => {\r\n        if (!shareUrl) return;\r\n        try {\r\n            await navigator.clipboard.writeText(shareUrl);\r\n            setCopied(true);\r\n            setTimeout(() => setCopied(false), 2000);\r\n        } catch (error) {\r\n            console.error('Failed to copy:', error);\r\n        }\r\n    };\r\n\r\n    // Share via WhatsApp\r\n    const handleWhatsAppShare = () => {\r\n        if (!shareUrl) return;\r\n        const text = encodeURIComponent(`${activityTitle}\\n\\n×œ×—×¦×• ×¢×œ ×”×§×™×©×•×¨ ×œ×”×ª×—×™×œ:\\n${shareUrl}`);\r\n        window.open(`https://wa.me/?text=${text}`, '_blank');\r\n    };\r\n\r\n    // Share via Email\r\n    const handleEmailShare = () => {\r\n        if (!shareUrl) return;\r\n        const subject = encodeURIComponent(activityTitle);\r\n        const body = encodeURIComponent(`×©×œ×•×,\\n\\n××¦×•×¨×£ ×§×™×©×•×¨ ×œ×¤×¢×™×œ×•×ª \"${activityTitle}\":\\n${shareUrl}\\n\\n×‘×”×¦×œ×—×”!`);\r\n        window.open(`mailto:?subject=${subject}&body=${body}`);\r\n    };\r\n\r\n    // Native share\r\n    const handleNativeShare = async () => {\r\n        if (!shareUrl || !navigator.share) return;\r\n        try {\r\n            await navigator.share({\r\n                title: activityTitle,\r\n                text: `×œ×—×¦×• ×œ×”×ª×—×™×œ ××ª ×”×¤×¢×™×œ×•×ª: ${activityTitle}`,\r\n                url: shareUrl\r\n            });\r\n        } catch (error) {\r\n            console.error('Share failed:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4\" dir=\"rtl\">\r\n            <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden shadow-2xl flex flex-col\">\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 shrink-0\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <h2 className=\"text-2xl font-bold mb-1 flex items-center gap-2\">\r\n                                <IconSend className=\"w-6 h-6\" />\r\n                                {step === 'select' ? '×©×œ×™×—×ª ×¤×¢×™×œ×•×™×•×ª ×œ×ª×œ××™×“×™×' : '×©×™×ª×•×£ ×”×¤×¢×™×œ×•×ª'}\r\n                            </h2>\r\n                            <p className=\"text-white/80 text-sm\">\r\n                                {step === 'select'\r\n                                    ? '×‘×—×¨×• ××ª ×”×¤×¢×™×œ×•×™×•×ª ×©×‘×¨×¦×•× ×›× ×œ×©×œ×•×— ×œ×ª×œ××™×“×™×'\r\n                                    : '×”×¤×¢×™×œ×•×ª × ×•×¦×¨×” ×‘×”×¦×œ×—×”! ×©×ª×¤×• ××ª ×”×§×™×©×•×¨ ×¢× ×”×ª×œ××™×“×™×'\r\n                                }\r\n                            </p>\r\n                        </div>\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"p-2 hover:bg-white/20 rounded-full transition-colors\"\r\n                        >\r\n                            <IconX className=\"w-6 h-6\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                    {step === 'select' ? (\r\n                        <>\r\n                            {/* Activity Title */}\r\n                            <div className=\"mb-6\">\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                    ×©× ×”×¤×¢×™×œ×•×ª\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={activityTitle}\r\n                                    onChange={(e) => setActivityTitle(e.target.value)}\r\n                                    className=\"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all\"\r\n                                    placeholder=\"×”×§×œ×™×“×• ×©× ×œ×¤×¢×™×œ×•×ª...\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Selection Controls */}\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <span className=\"text-sm text-slate-500\">\r\n                                        × ×‘×—×¨×• {selectedBlockIds.size} ××ª×•×š {sendableBlocks.length} ×¤×¢×™×œ×•×™×•×ª\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button\r\n                                        onClick={selectAll}\r\n                                        className=\"text-sm text-indigo-600 hover:text-indigo-800 font-medium\"\r\n                                    >\r\n                                        ×‘×—×¨ ×”×›×œ\r\n                                    </button>\r\n                                    <span className=\"text-slate-300\">|</span>\r\n                                    <button\r\n                                        onClick={clearSelection}\r\n                                        className=\"text-sm text-slate-500 hover:text-slate-700 font-medium\"\r\n                                    >\r\n                                        × ×§×” ×‘×—×™×¨×”\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Blocks List */}\r\n                            {sendableBlocks.length === 0 ? (\r\n                                <div className=\"text-center py-12 text-slate-400\">\r\n                                    <IconAlertCircle className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n                                    <p className=\"font-medium\">××™×Ÿ ×¤×¢×™×œ×•×™×•×ª ××™× ×˜×¨××§×˜×™×‘×™×•×ª ×‘××¢×¨×š ×”×©×™×¢×•×¨</p>\r\n                                    <p className=\"text-sm mt-1\">×”×•×¡×™×¤×• ×©××œ×•×ª ××• ××©×—×§×™× ×œ××¢×¨×š ×”×©×™×¢×•×¨</p>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"space-y-3\">\r\n                                    {sections.map((section, sIdx) => (\r\n                                        <div key={sIdx} className=\"mb-4\">\r\n                                            {sections.length > 1 && (\r\n                                                <h4 className=\"text-sm font-bold text-slate-500 mb-2 flex items-center gap-2\">\r\n                                                    <span className=\"w-2 h-2 bg-indigo-500 rounded-full\" />\r\n                                                    {section.sectionTitle}\r\n                                                </h4>\r\n                                            )}\r\n                                            {section.blocks.map((block) => {\r\n                                                const isSelected = selectedBlockIds.has(block.id);\r\n                                                return (\r\n                                                    <div\r\n                                                        key={block.id}\r\n                                                        onClick={() => toggleBlock(block.id)}\r\n                                                        className={`p-4 rounded-xl border-2 cursor-pointer transition-all mb-2 ${\r\n                                                            isSelected\r\n                                                                ? 'border-indigo-500 bg-indigo-50'\r\n                                                                : 'border-slate-200 hover:border-slate-300 bg-white'\r\n                                                        }`}\r\n                                                    >\r\n                                                        <div className=\"flex items-start gap-3\">\r\n                                                            {/* Checkbox */}\r\n                                                            <div className={`w-6 h-6 rounded-lg border-2 flex items-center justify-center shrink-0 mt-0.5 transition-all ${\r\n                                                                isSelected\r\n                                                                    ? 'bg-indigo-500 border-indigo-500'\r\n                                                                    : 'border-slate-300'\r\n                                                            }`}>\r\n                                                                {isSelected && <IconCheck className=\"w-4 h-4 text-white\" />}\r\n                                                            </div>\r\n\r\n                                                            {/* Icon */}\r\n                                                            <span className=\"text-2xl\">\r\n                                                                {BLOCK_ICONS[block.type] || 'ğŸ“„'}\r\n                                                            </span>\r\n\r\n                                                            {/* Content */}\r\n                                                            <div className=\"flex-1 min-w-0\">\r\n                                                                <div className=\"flex items-center gap-2 mb-1\">\r\n                                                                    <span className=\"text-xs px-2 py-0.5 bg-slate-100 text-slate-600 rounded-full font-medium\">\r\n                                                                        {getBlockTypeLabel(block.type)}\r\n                                                                    </span>\r\n                                                                </div>\r\n                                                                <p className=\"text-slate-700 text-sm line-clamp-2\">\r\n                                                                    {getBlockPreview(block)}\r\n                                                                </p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                );\r\n                                            })}\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    ) : (\r\n                        /* Share Step */\r\n                        <div className=\"text-center py-8\">\r\n                            <div className=\"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                <IconCheck className=\"w-8 h-8 text-emerald-600\" />\r\n                            </div>\r\n                            <h3 className=\"text-xl font-bold text-slate-800 mb-2\">\r\n                                ×”×¤×¢×™×œ×•×ª × ×•×¦×¨×” ×‘×”×¦×œ×—×”!\r\n                            </h3>\r\n                            <p className=\"text-slate-500 mb-2\">\r\n                                {selectedBlockIds.size} ×¤×¢×™×œ×•×™×•×ª ××•×›× ×•×ª ×œ×©×œ×™×—×” ×œ×ª×œ××™×“×™×\r\n                            </p>\r\n                            <p className=\"text-sm text-indigo-600 font-medium mb-6\">\r\n                                ×”×¤×¢×™×œ×•×ª × ×©××¨×” ×•×ª×•×¤×™×¢ ×‘×œ×•×— ×”××•×¨×” ×©×œ×š\r\n                            </p>\r\n\r\n                            {/* Share Link */}\r\n                            <div className=\"bg-slate-50 rounded-xl p-4 mb-6 text-right\">\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                    ×§×™×©×•×¨ ×œ×©×œ×™×—×” ×œ×ª×œ××™×“×™×:\r\n                                </label>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={shareUrl || ''}\r\n                                        readOnly\r\n                                        className=\"flex-1 px-4 py-3 bg-white border border-slate-200 rounded-xl text-sm font-mono text-slate-700 text-left\"\r\n                                        dir=\"ltr\"\r\n                                    />\r\n                                    <button\r\n                                        onClick={handleCopyLink}\r\n                                        className={`p-3 rounded-xl transition-all flex items-center gap-2 font-bold ${\r\n                                            copied\r\n                                                ? 'bg-emerald-500 text-white'\r\n                                                : 'bg-indigo-600 text-white hover:bg-indigo-700'\r\n                                        }`}\r\n                                    >\r\n                                        {copied ? <IconCheck className=\"w-5 h-5\" /> : <IconCopy className=\"w-5 h-5\" />}\r\n                                        <span className=\"hidden sm:inline\">{copied ? '×”×•×¢×ª×§!' : '×”×¢×ª×§'}</span>\r\n                                    </button>\r\n                                </div>\r\n                                {copied && (\r\n                                    <p className=\"text-emerald-600 text-sm mt-2 font-medium\">\r\n                                        ×”×§×™×©×•×¨ ×”×•×¢×ª×§! ×©×œ×—×• ××•×ª×• ×œ×ª×œ××™×“×™× ×‘×›×œ ×“×¨×š ×©× ×•×—×” ×œ×›×\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Share Buttons */}\r\n                            <div className=\"grid grid-cols-3 gap-3\">\r\n                                <button\r\n                                    onClick={handleWhatsAppShare}\r\n                                    className=\"flex flex-col items-center gap-2 p-4 bg-emerald-50 hover:bg-emerald-100 rounded-xl transition-colors\"\r\n                                >\r\n                                    <IconBrandWhatsapp className=\"w-8 h-8 text-emerald-600\" />\r\n                                    <span className=\"text-sm font-medium text-emerald-700\">WhatsApp</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleEmailShare}\r\n                                    className=\"flex flex-col items-center gap-2 p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors\"\r\n                                >\r\n                                    <IconMail className=\"w-8 h-8 text-blue-600\" />\r\n                                    <span className=\"text-sm font-medium text-blue-700\">××™××™×™×œ</span>\r\n                                </button>\r\n                                {navigator.share && (\r\n                                    <button\r\n                                        onClick={handleNativeShare}\r\n                                        className=\"flex flex-col items-center gap-2 p-4 bg-purple-50 hover:bg-purple-100 rounded-xl transition-colors\"\r\n                                    >\r\n                                        <IconShare2 className=\"w-8 h-8 text-purple-600\" />\r\n                                        <span className=\"text-sm font-medium text-purple-700\">×©×™×ª×•×£</span>\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Info */}\r\n                            <div className=\"mt-6 p-4 bg-indigo-50 rounded-xl text-right\">\r\n                                <div className=\"flex items-start gap-3\">\r\n                                    <IconSparkles className=\"w-5 h-5 text-indigo-600 mt-0.5\" />\r\n                                    <div>\r\n                                        <p className=\"text-sm text-indigo-800 font-medium\">\r\n                                            ×ª×•×¦××•×ª ×”×ª×œ××™×“×™× ×™×•×¤×™×¢×• ×‘×œ×•×— ×”×‘×§×¨×”\r\n                                        </p>\r\n                                        <p className=\"text-xs text-indigo-600 mt-1\">\r\n                                            ×ª×•×›×œ×• ×œ×¢×§×•×‘ ××—×¨×™ ×”×”×ª×§×“××•×ª ×•×”×¦×™×•× ×™× ×‘×–××Ÿ ×××ª\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"p-6 bg-slate-50 border-t border-slate-200 shrink-0\">\r\n                    {step === 'select' ? (\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"px-6 py-3 text-slate-600 hover:text-slate-800 font-medium transition-colors\"\r\n                            >\r\n                                ×‘×™×˜×•×œ\r\n                            </button>\r\n                            <button\r\n                                onClick={handleSend}\r\n                                disabled={selectedBlockIds.size === 0 || isLoading}\r\n                                className=\"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n                            >\r\n                                {isLoading ? (\r\n                                    <>\r\n                                        <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                                        ×™×•×¦×¨ ×¤×¢×™×œ×•×ª...\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <IconSend className=\"w-5 h-5\" />\r\n                                        ×¦×•×¨ ×¤×¢×™×œ×•×ª ×œ×ª×œ××™×“×™× ({selectedBlockIds.size})\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex justify-center\">\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"px-8 py-3 bg-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-300 transition-colors\"\r\n                            >\r\n                                ×¡×’×•×¨\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SendActivitiesModal;\r\n"],"names":["__iconNode","IconBrandWhatsapp","createReactComponent","IconShare2","INTERACTIVE_BLOCK_TYPES","PRESENTATION_BLOCK_TYPES","categorizeBlock","block","content","isBlockSendable","getSendableBlocks","unit","getBlockTypeLabel","type","extractActivityFromLesson","parentCourse","parentUnit","selectedBlockIds","activityTitle","onProgress","selectedBlocks","b","moduleId","uuidv4","unitId","activityCourse","serverTimestamp","parentCourseRef","doc","db","docRef","parentDoc","addDoc","collection","getDoc","activityCourseId","existingExtracted","updateDoc","shareUrl","groupBlocksBySections","blocks","sections","currentSection","title","h3Match","mdMatch","BLOCK_ICONS","SendActivitiesModal","course","onClose","onSuccess","setSelectedBlockIds","useState","setActivityTitle","step","setStep","isLoading","setIsLoading","setShareUrl","setActivityCourseId","copied","setCopied","sendableBlocks","useMemo","toggleBlock","blockId","newSelected","selectAll","clearSelection","getBlockPreview","handleSend","result","error","handleCopyLink","handleWhatsAppShare","text","handleEmailShare","subject","body","handleNativeShare","jsx","jsxs","IconSend","IconX","Fragment","e","IconAlertCircle","section","sIdx","isSelected","IconCheck","IconCopy","IconMail","IconSparkles"],"mappings":"6OAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,EAAa,CAAC,CAAC,OAAQ,CAAE,EAAK,6CAA8C,IAAO,OAAO,CAAE,EAAG,CAAC,OAAQ,CAAE,EAAK,kGAAmG,IAAO,OAAO,CAAE,CAAC,EACnOC,GAAoBC,EAAqB,UAAW,iBAAkB,gBAAiBF,CAAU,ECVvG;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAa,CAAC,CAAC,OAAQ,CAAE,EAAK,iFAAkF,IAAO,OAAO,CAAE,EAAG,CAAC,OAAQ,CAAE,EAAK,aAAc,IAAO,QAAS,EAAG,CAAC,OAAQ,CAAE,EAAK,gBAAiB,IAAO,OAAO,CAAE,CAAC,EACtOG,GAAaD,EAAqB,UAAW,UAAW,SAAUF,EAAU,ECgC5EI,GAA0B,CAC5B,kBACA,gBACA,iBACA,WACA,iBACA,cACA,mBACA,gBACA,UACA,iBACA,mBAEA,WACA,YACA,mBACA,iBACA,mBACA,iBACA,eACA,QACJ,EAKMC,GAA2B,CAC7B,OACA,QACA,QACA,MACA,cACA,UACA,SACJ,EAKaC,GAAmBC,GAAwC,CAEpE,MAAMC,EAAUD,EAAM,QACtB,OAAI,OAAOC,GAAY,UAAYA,IAAY,MAEvC,kBAAmBA,GAAWA,EAAQ,eAAiB,CAACA,EAAQ,KACzD,eAKXJ,GAAwB,SAASG,EAAM,IAAI,EACpC,oBAGPF,GAAyB,SAASE,EAAM,IAAI,EACrC,eAKf,EAKaE,EAAmBF,GAAkC,CAE9D,GADiBD,GAAgBC,CAAK,IACrB,mBAAoB,MAAO,GAG5C,MAAMC,EAAUD,EAAM,QACtB,OAAKC,EAED,OAAOA,GAAY,WAEf,aAAcA,GAAWA,EAAQ,UACjC,gBAAiBA,GAAWA,EAAQ,aACpC,UAAWA,GAAW,MAAM,QAAQA,EAAQ,KAAK,GAAKA,EAAQ,MAAM,OAAS,GAAU,GAGxF,OAAOA,GAAY,UAAYA,EAAQ,OAAS,EATlC,EAUzB,EAKaE,GAAqBC,IACtBA,EAAK,gBAAkB,CAAA,GAAI,OAAOF,CAAe,EAMhDG,EAAqBC,IACS,CACnC,kBAAmB,gBACnB,gBAAiB,aACjB,eAAkB,eAClB,SAAY,YACZ,eAAkB,iBAClB,YAAe,cACf,iBAAoB,eACpB,cAAiB,aACjB,QAAW,cACX,iBAAkB,cAClB,mBAAoB,mBACpB,KAAQ,OACR,MAAS,QACT,MAAS,QACT,IAAO,WACP,YAAe,cACf,QAAW,YACX,QAAW,UAEX,SAAY,QACZ,UAAa,cACb,iBAAoB,aACpB,eAAkB,aAClB,iBAAoB,aACpB,eAAkB,cAClB,aAAgB,cAChB,OAAU,QAAA,GAEAA,CAAI,GAAKA,EAadC,GAA4B,MACrCC,EACAC,EACAC,EACAC,EACAC,IAC0D,CAI1D,MAAMC,GAAkBJ,EAAW,gBAAkB,CAAA,GAChD,OAAOK,GAAKJ,EAAiB,SAASI,EAAE,EAAE,CAAC,EAEhD,GAAID,EAAe,SAAW,EAC1B,MAAM,IAAI,MAAM,wBAAwB,EAM5C,MAAME,EAAWC,EAAA,EACXC,EAASD,EAAA,EAETE,EAAkC,CACpC,UAAWV,EAAa,UACxB,MAAOG,GAAiB,WAAWF,EAAW,KAAK,GACnD,eAAgBD,EAAa,eAC7B,WAAYA,EAAa,WACzB,QAASA,EAAa,QACtB,KAAM,WACN,SAAU,CAAC,CACP,GAAIO,EACJ,MAAON,EAAW,MAClB,cAAe,CAAC,CACZ,GAAIQ,EACJ,MAAOR,EAAW,MAClB,MAAOA,EAAW,MAClB,KAAM,WACN,YAAa,GACb,eAAgBI,EAAe,IAAIC,IAAM,CACrC,GAAGA,EACH,GAAI,GAAGA,EAAE,EAAE,IAAIE,IAAS,MAAM,EAAG,CAAC,CAAC,EAAA,EACrC,CAAA,CACL,CAAA,CACJ,EACD,UAAWG,EAAA,EACX,UAAWA,EAAA,CAAgB,EAI9BD,EAAuB,YAAc,WACrCA,EAAuB,cAAgB,GACvCA,EAAuB,aAAe,CACnC,SAAUV,EAAa,GACvB,OAAQC,EAAW,GACnB,MAAOD,EAAa,MACpB,kBAAmBE,EACnB,YAAa,IAAI,KAAA,EAAO,YAAA,CAAY,EAMxC,MAAMU,EAAkBC,EAAIC,EAAI,UAAWd,EAAa,EAAE,EACpD,CAACe,EAAQC,CAAS,EAAI,MAAM,QAAQ,IAAI,CAC1CC,EAAOC,EAAWJ,EAAI,SAAS,EAAGJ,CAAc,EAChDS,EAAOP,CAAe,CAAA,CACzB,EAEKQ,EAAmBL,EAAO,GAKhC,GAAIC,EAAU,SAAU,CACpB,MAAMK,EAAoBL,EAAU,KAAA,EAAO,qBAAuB,CAAA,EAClE,MAAMM,EAAUV,EAAiB,CAC7B,oBAAqB,CAAC,GAAGS,EAAmB,CACxC,iBAAAD,EACA,SAAUlB,EACV,MAAOQ,EAAe,MACtB,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,CACrC,EACD,UAAWC,EAAA,CAAgB,CAC9B,CACL,CAKA,MAAMY,EAAW,GAAG,OAAO,SAAS,MAAM,qBAAqBH,CAAgB,GAI/E,MAAO,CAAE,iBAAAA,EAAkB,SAAAG,CAAA,CAC/B,EA+CaC,GACTC,GACsD,CACtD,MAAMC,EAAgE,CAAA,EACtE,IAAIC,EAAoE,CACpE,aAAc,OACd,OAAQ,CAAA,CAAC,EAGb,OAAAF,EAAO,QAAQjC,GAAS,CACpB,GAAIA,EAAM,OAAS,OAAQ,CACvB,MAAMC,EAAUD,EAAM,QACtB,IAAIoC,EAAuB,KAG3B,GAAI,OAAOnC,GAAY,SAAU,CAC7B,MAAMoC,EAAUpC,EAAQ,MAAM,uBAAuB,EAGrD,GAFIoC,MAAiBA,EAAQ,CAAC,EAAE,QAAQ,WAAY,EAAE,EAAE,KAAA,GAEpD,CAACD,EAAO,CACR,MAAME,EAAUrC,EAAQ,MAAM,aAAa,EACvCqC,IAASF,EAAQE,EAAQ,CAAC,EAAE,KAAA,EACpC,CACJ,CAEIF,IAEID,EAAe,OAAO,OAAS,GAC/BD,EAAS,KAAKC,CAAc,EAGhCA,EAAiB,CAAE,aAAcC,EAAO,OAAQ,CAAA,CAAC,EAEzD,CAGIlC,EAAgBF,CAAK,GACrBmC,EAAe,OAAO,KAAKnC,CAAK,CAExC,CAAC,EAGGmC,EAAe,OAAO,OAAS,GAC/BD,EAAS,KAAKC,CAAc,EAGzBD,CACX,ECzUMK,GAAsC,CACxC,kBAAmB,KACnB,gBAAiB,KACjB,eAAkB,KAClB,SAAY,KACZ,eAAkB,KAClB,YAAe,KACf,iBAAoB,IACpB,cAAiB,KACjB,QAAW,KACX,SAAY,KACZ,iBAAkB,KAClB,mBAAoB,IACxB,EAEMC,GAA0D,CAAC,CAC7D,KAAApC,EACA,OAAAqC,EACA,QAAAC,EACA,UAAAC,CACJ,IAAM,CACF,KAAM,CAACjC,EAAkBkC,CAAmB,EAAIC,EAAAA,SAAsB,IAAI,GAAK,EACzE,CAAClC,EAAemC,CAAgB,EAAID,EAAAA,SAAS,WAAWzC,EAAK,KAAK,EAAE,EACpE,CAAC2C,EAAMC,CAAO,EAAIH,EAAAA,SAA6B,QAAQ,EACvD,CAACI,EAAWC,CAAY,EAAIL,EAAAA,SAAS,EAAK,EAC1C,CAACd,EAAUoB,CAAW,EAAIN,EAAAA,SAAwB,IAAI,EACtD,CAACjB,EAAkBwB,CAAmB,EAAIP,EAAAA,SAAwB,IAAI,EACtE,CAACQ,EAAQC,CAAS,EAAIT,EAAAA,SAAS,EAAK,EAGpCU,EAAiBC,EAAAA,QAAQ,IAAMrD,GAAkBC,CAAI,EAAG,CAACA,CAAI,CAAC,EAG9D8B,EAAWsB,UAAQ,IAAMxB,GAAsB5B,EAAK,gBAAkB,CAAA,CAAE,EAAG,CAACA,CAAI,CAAC,EAGjFqD,EAAeC,GAAoB,CACrC,MAAMC,EAAc,IAAI,IAAIjD,CAAgB,EACxCiD,EAAY,IAAID,CAAO,EACvBC,EAAY,OAAOD,CAAO,EAE1BC,EAAY,IAAID,CAAO,EAE3Bd,EAAoBe,CAAW,CACnC,EAGMC,EAAY,IAAM,CACpBhB,EAAoB,IAAI,IAAIW,EAAe,OAASzC,EAAE,EAAE,CAAC,CAAC,CAC9D,EAGM+C,EAAiB,IAAM,CACzBjB,EAAoB,IAAI,GAAK,CACjC,EAGMkB,EAAmB9D,GAAiC,CACtD,MAAMC,EAAUD,EAAM,QACtB,GAAI,OAAOC,GAAY,SACnB,OAAOA,EAAQ,UAAU,EAAG,GAAG,GAAKA,EAAQ,OAAS,IAAM,MAAQ,IAEvE,GAAI,OAAOA,GAAY,UAAYA,IAAY,KAAM,CACjD,GAAI,aAAcA,EAAS,OAAQA,EAAgB,SACnD,GAAI,gBAAiBA,EAAS,OAAQA,EAAgB,WAC1D,CACA,OAAOI,EAAkBL,EAAM,IAAI,CACvC,EAGM+D,EAAa,SAAY,CAC3B,GAAIrD,EAAiB,OAAS,EAE9B,CAAAwC,EAAa,EAAI,EACjB,GAAI,CACA,MAAMc,EAAS,MAAMzD,GACjBkC,EACArC,EACA,MAAM,KAAKM,CAAgB,EAC3BC,CAAA,EAGJyC,EAAoBY,EAAO,gBAAgB,EAC3Cb,EAAYa,EAAO,QAAQ,EAC3BhB,EAAQ,OAAO,EACfL,GAAA,MAAAA,EAAYqB,EAAO,iBAAkBA,EAAO,SAChD,OAASC,EAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAK,EACjD,MAAM,sBAAsB,CAChC,QAAA,CACIf,EAAa,EAAK,CACtB,EACJ,EAGMgB,EAAiB,SAAY,CAC/B,GAAKnC,EACL,GAAI,CACA,MAAM,UAAU,UAAU,UAAUA,CAAQ,EAC5CuB,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CAC3C,OAASW,EAAO,CACZ,QAAQ,MAAM,kBAAmBA,CAAK,CAC1C,CACJ,EAGME,EAAsB,IAAM,CAC9B,GAAI,CAACpC,EAAU,OACf,MAAMqC,EAAO,mBAAmB,GAAGzD,CAAa;AAAA;AAAA;AAAA,EAA+BoB,CAAQ,EAAE,EACzF,OAAO,KAAK,uBAAuBqC,CAAI,GAAI,QAAQ,CACvD,EAGMC,EAAmB,IAAM,CAC3B,GAAI,CAACtC,EAAU,OACf,MAAMuC,EAAU,mBAAmB3D,CAAa,EAC1C4D,EAAO,mBAAmB;AAAA;AAAA,uBAAiC5D,CAAa;AAAA,EAAOoB,CAAQ;AAAA;AAAA,QAAa,EAC1G,OAAO,KAAK,mBAAmBuC,CAAO,SAASC,CAAI,EAAE,CACzD,EAGMC,EAAoB,SAAY,CAClC,GAAI,GAACzC,GAAY,CAAC,UAAU,OAC5B,GAAI,CACA,MAAM,UAAU,MAAM,CAClB,MAAOpB,EACP,KAAM,2BAA2BA,CAAa,GAC9C,IAAKoB,CAAA,CACR,CACL,OAASkC,EAAO,CACZ,QAAQ,MAAM,gBAAiBA,CAAK,CACxC,CACJ,EAEA,OACIQ,EAAAA,IAAC,OAAI,UAAU,sEAAsE,IAAI,MACrF,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,8FAEX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,yEACX,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAA,OAAC,MAAA,CACG,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,kDACV,SAAA,CAAAD,EAAAA,IAACE,EAAA,CAAS,UAAU,SAAA,CAAU,EAC7B5B,IAAS,SAAW,0BAA4B,eAAA,EACrD,QACC,IAAA,CAAE,UAAU,wBACR,SAAAA,IAAS,SACJ,4CACA,kDAAA,CAEV,CAAA,EACJ,EACA0B,EAAAA,IAAC,SAAA,CACG,QAAS/B,EACT,UAAU,uDAEV,SAAA+B,EAAAA,IAACG,EAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAAA,CAC/B,CAAA,CACJ,CAAA,CACJ,QAGC,MAAA,CAAI,UAAU,6BACV,SAAA7B,IAAS,SACN2B,EAAAA,KAAAG,EAAAA,SAAA,CAEI,SAAA,CAAAH,EAAAA,KAAC,MAAA,CAAI,UAAU,OACX,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,8CAA8C,SAAA,aAE/D,EACAA,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,MAAO9D,EACP,SAAWmE,GAAMhC,EAAiBgC,EAAE,OAAO,KAAK,EAChD,UAAU,gIACV,YAAY,sBAAA,CAAA,CAChB,EACJ,EAGAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,0BACX,SAAAC,EAAAA,KAAC,OAAA,CAAK,UAAU,yBAAyB,SAAA,CAAA,SAC9BhE,EAAiB,KAAK,SAAO6C,EAAe,OAAO,WAAA,CAAA,CAC9D,CAAA,CACJ,EACAmB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACX,SAAA,CAAAD,EAAAA,IAAC,SAAA,CACG,QAASb,EACT,UAAU,4DACb,SAAA,SAAA,CAAA,EAGDa,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAiB,SAAA,IAAC,EAClCA,EAAAA,IAAC,SAAA,CACG,QAASZ,EACT,UAAU,0DACb,SAAA,WAAA,CAAA,CAED,CAAA,CACJ,CAAA,EACJ,EAGCN,EAAe,SAAW,EACvBmB,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACX,SAAA,CAAAD,EAAAA,IAACM,EAAA,CAAgB,UAAU,mCAAA,CAAoC,EAC/DN,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAc,SAAA,0CAAuC,EAClEA,EAAAA,IAAC,IAAA,CAAE,UAAU,eAAe,SAAA,qCAAA,CAAmC,CAAA,CAAA,CACnE,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACV,SAAAvC,EAAS,IAAI,CAAC8C,EAASC,IACpBP,EAAAA,KAAC,MAAA,CAAe,UAAU,OACrB,SAAA,CAAAxC,EAAS,OAAS,GACfwC,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACV,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAA,CAAqC,EACpDO,EAAQ,YAAA,EACb,EAEHA,EAAQ,OAAO,IAAKhF,GAAU,CAC3B,MAAMkF,EAAaxE,EAAiB,IAAIV,EAAM,EAAE,EAChD,OACIyE,EAAAA,IAAC,MAAA,CAEG,QAAS,IAAMhB,EAAYzD,EAAM,EAAE,EACnC,UAAW,8DACPkF,EACM,iCACA,kDACV,GAEA,SAAAR,EAAAA,KAAC,MAAA,CAAI,UAAU,yBAEX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAW,+FACZS,EACM,kCACA,kBACV,GACK,SAAAA,GAAcT,MAACU,EAAA,CAAU,UAAU,oBAAA,CAAqB,EAC7D,EAGAV,EAAAA,IAAC,QAAK,UAAU,WACX,YAAYzE,EAAM,IAAI,GAAK,KAChC,EAGA0E,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACX,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,2EACX,SAAApE,EAAkBL,EAAM,IAAI,CAAA,CACjC,EACJ,QACC,IAAA,CAAE,UAAU,sCACR,SAAA8D,EAAgB9D,CAAK,CAAA,CAC1B,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,EAlCKA,EAAM,EAAA,CAqCvB,CAAC,CAAA,CAAA,EAhDKiF,CAiDV,CACH,CAAA,CACL,CAAA,EAER,EAGAP,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACX,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,sFACX,eAACU,EAAA,CAAU,UAAU,2BAA2B,CAAA,CACpD,EACAV,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,wBAEtD,EACAC,EAAAA,KAAC,IAAA,CAAE,UAAU,sBACR,SAAA,CAAAhE,EAAiB,KAAK,kCAAA,EAC3B,EACA+D,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA2C,SAAA,sCAExD,EAGAC,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACX,SAAA,CAAAD,EAAAA,IAAC,QAAA,CAAM,UAAU,8CAA8C,SAAA,yBAE/D,EACAC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACX,SAAA,CAAAD,EAAAA,IAAC,QAAA,CACG,KAAK,OACL,MAAO1C,GAAY,GACnB,SAAQ,GACR,UAAU,0GACV,IAAI,KAAA,CAAA,EAER2C,EAAAA,KAAC,SAAA,CACG,QAASR,EACT,UAAW,mEACPb,EACM,4BACA,8CACV,GAEC,SAAA,CAAAA,EAASoB,EAAAA,IAACU,GAAU,UAAU,SAAA,CAAU,EAAKV,EAAAA,IAACW,EAAA,CAAS,UAAU,SAAA,CAAU,QAC3E,OAAA,CAAK,UAAU,mBAAoB,SAAA/B,EAAS,SAAW,MAAA,CAAO,CAAA,CAAA,CAAA,CACnE,EACJ,EACCA,GACGoB,EAAAA,IAAC,IAAA,CAAE,UAAU,4CAA4C,SAAA,oDAAA,CAEzD,CAAA,EAER,EAGAC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACG,QAASP,EACT,UAAU,uGAEV,SAAA,CAAAM,EAAAA,IAAC/E,GAAA,CAAkB,UAAU,0BAAA,CAA2B,EACxD+E,EAAAA,IAAC,OAAA,CAAK,UAAU,uCAAuC,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,EAEnEC,EAAAA,KAAC,SAAA,CACG,QAASL,EACT,UAAU,iGAEV,SAAA,CAAAI,EAAAA,IAACY,EAAA,CAAS,UAAU,uBAAA,CAAwB,EAC5CZ,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,EAE7D,UAAU,OACPC,EAAAA,KAAC,SAAA,CACG,QAASF,EACT,UAAU,qGAEV,SAAA,CAAAC,EAAAA,IAAC7E,GAAA,CAAW,UAAU,yBAAA,CAA0B,EAChD6E,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,OAAA,CAAK,CAAA,CAAA,CAAA,CAC/D,EAER,QAGC,MAAA,CAAI,UAAU,8CACX,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACX,SAAA,CAAAD,EAAAA,IAACa,EAAA,CAAa,UAAU,gCAAA,CAAiC,SACxD,MAAA,CACG,SAAA,CAAAb,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,oCAEnD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,6CAAA,CAE5C,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,CAAA,CAAA,CACJ,EAER,EAGAA,EAAAA,IAAC,OAAI,UAAU,qDACV,aAAS,SACNC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAD,EAAAA,IAAC,SAAA,CACG,QAAS/B,EACT,UAAU,8EACb,SAAA,OAAA,CAAA,EAGD+B,EAAAA,IAAC,SAAA,CACG,QAASV,EACT,SAAUrD,EAAiB,OAAS,GAAKuC,EACzC,UAAU,wKAET,WACGyB,EAAAA,KAAAG,EAAAA,SAAA,CACI,SAAA,CAAAJ,EAAAA,IAAC,MAAA,CAAI,UAAU,8EAAA,CAA+E,EAAE,gBAAA,CAAA,CAEpG,EAEAC,EAAAA,KAAAG,EAAAA,SAAA,CACI,SAAA,CAAAJ,EAAAA,IAACE,EAAA,CAAS,UAAU,SAAA,CAAU,EAAE,wBACVjE,EAAiB,KAAK,GAAA,CAAA,CAChD,CAAA,CAAA,CAER,CAAA,CACJ,EAEA+D,EAAAA,IAAC,MAAA,CAAI,UAAU,sBACX,SAAAA,EAAAA,IAAC,SAAA,CACG,QAAS/B,EACT,UAAU,kGACb,SAAA,MAAA,CAAA,EAGL,CAAA,CAER,CAAA,CAAA,CACJ,CAAA,CACJ,CAER","x_google_ignoreList":[0,1]}