import{z as d}from"./index-1x3sw4DL.js";const f=()=>!0,w=f,y=async m=>{var i,s,c;try{console.log("üé® Generating image with Gemini 3 Pro Image...");const n=d.currentUser;if(!n)return console.error("‚ùå User not authenticated"),null;const u=await n.getIdToken(),e=await fetch("https://us-central1-ai-lms-pro.cloudfunctions.net/generateGeminiImage",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({prompt:m})});if(!e.ok){const a=await e.json().catch(()=>({error:e.statusText}));if(e.status===429)return console.warn("‚ö†Ô∏è Rate limited, will fall back to DALL-E"),null;throw new Error(`Gemini Image API error: ${a.error||e.statusText}`)}const t=await e.json();if(t.success&&((i=t.image)!=null&&i.base64)){const a=t.image.base64,o=atob(a),l=new Array(o.length);for(let r=0;r<o.length;r++)l[r]=o.charCodeAt(r);const g=new Uint8Array(l);return console.log(`‚úÖ Gemini Image generation successful (${(s=t.metadata)==null?void 0:s.generationTime}ms, model: ${(c=t.metadata)==null?void 0:c.model})`),new Blob([g],{type:t.image.mimeType||"image/png"})}return console.warn("‚ö†Ô∏è Gemini returned success but no image data"),null}catch(n){return console.error("‚ùå Gemini Image generation failed:",n),null}};export{y as generateGeminiImage,w as isGeminiImageAvailable,f as isImagenAvailable};
//# sourceMappingURL=imagenService-D9X-XJ8a.js.map
