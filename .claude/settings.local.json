{
  "permissions": {
    "allow": [
      "Bash(npx tsc:*)",
      "Bash(git push:*)",
      "Bash(npx tsx:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Complete exam generation system refactoring with dedicated architecture\n\nImplements full separation of exam and learning pipelines for scalability and maintainability.\n\nBackend Changes:\n- ‚ú® NEW: examPrompts.ts - Dedicated exam prompts \\(Temperature 0.3, no hints\\)\n- ‚ú® NEW: examArchitect.ts - Strategic test planning \\(The Brain\\)\n- ‚ú® NEW: examGenerator.ts - Parallel question generation \\(The Hands\\)\n- ‚ú® NEW: examGuardian.ts - Exam integrity validation with auto-repair\n- ‚ú® NEW: examController.ts - Complete exam pipeline orchestration\n- ‚ú® NEW: generateExam Cloud Function - Listens to exam_generation_queue\n\nFrontend Changes:\n- üîß UPDATED: gemini.ts - Smart routing to exam_generation_queue for productType=''exam''\n- üîß UPDATED: CourseEditor.tsx - Pass productType, activityLength, taxonomy to queue\n\nKey Features:\n- ‚úÖ Zero conditionals - Complete code separation \\(removed 50+ if statements\\)\n- ‚úÖ Temperature Fix - 0.3 for deterministic exam generation\n- ‚úÖ ExamGuardian - Prevents hints/teaching content leakage\n- ‚úÖ Auto-Repair - Automatically removes hints before validation\n- ‚úÖ Dedicated Queue - exam_generation_queue isolated from learning\n- ‚úÖ Quality Scoring - Guardian provides 0-100 quality assessment\n\nArchitecture:\n- 3-Stage Pipeline: Architect \\(Plan\\) ‚Üí Generator \\(Create\\) ‚Üí Guardian \\(Validate\\)\n- Parallel question generation for speed\n- Local + AI validation for reliability\n- Comprehensive error handling and logging\n\nBreaking Changes: None \\(backward compatible\\)\nMigration: Deploy with: firebase deploy --only functions:generateExam\n\nü§ñ Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npm run build:*)",
      "Bash(npm run dev:*)",
      "Bash(timeout 5 head:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Major Teacher Experience & Content Generation Enhancements\n\nThis commit consolidates multiple advanced features developed by different\nAnthropic agents, including Teacher Cockpit improvements, AI-powered content\ngeneration, and pedagogical infrastructure upgrades.\n\n## üé® Teacher Cockpit Enhancements \\(TeacherCockpit.tsx\\)\n- ‚ú® Text-to-Speech Integration: Added TTS playback for lesson scripts\n- ‚ú® Smart Infographic Generator: Auto-detect content type and generate visual aids\n  * Flowcharts, Timelines, Comparisons, Cycle diagrams\n  * Smart content analysis with suitability warnings\n  * Preview system before insertion\n- ‚ú® Pedagogical Phase Icons: Dynamic icons based on lesson structure\n- ‚ú® Block Management: Enhanced drag-drop, reordering, deletion\n- ‚ú® AI Refinement Toolbar: Improved UX for content editing\n- üìÑ PDF Export: Export complete lesson plans to PDF\n\n## ü§ñ AI Content Generation \\(geminiApi.ts + CourseEditor.tsx\\)\n- ‚ú® Progressive Lesson Generation: Async unit-by-unit content creation\n- ‚ú® Auto-Generated Interactive Blocks: AI creates activities automatically\n- ‚ú® Visual Assets Generator: AI-powered image generation for lessons\n- ‚ú® Infographic Generation: Convert text to visual diagrams via Mermaid\n- üîß Rate Limiting Protection: Prevent 429 errors with queue system\n- üîß PDF Text Extraction: Improved file processing pipeline\n\n## üìö New Services & Utilities\n- ‚ú® textToSpeechService.ts: Web Speech API integration for Hebrew TTS\n- ‚ú® pdfExportService.ts: Lesson plan PDF export with proper formatting\n- ‚ú® pedagogicalIcons.ts: Centralized icon mapping system\n- ‚ú® infographicDetector.ts: Smart content analysis for diagram recommendations\n- ‚ú® infographicCache.ts: Caching layer for generated infographics\n- ‚ú® imagenService.ts: Image generation service wrapper\n- ‚ú® TextToSpeechButton.tsx: Reusable TTS component\n\n## üìñ Documentation\n- üìù INFOGRAPHIC_FEATURE.md: Complete infographic system documentation\n- üìù INFOGRAPHIC_QUICKSTART.md: Quick start guide for teachers\n- üìù PODCAST_VOICE_SYSTEM.md: Voice customization documentation\n- üìù LESSON_PLAN_IMPROVEMENTS.md: Teacher experience improvements\n\n## üîß Backend Improvements\n- üì¶ Added puppeteer for server-side rendering\n- üîß Enhanced prompts with teacher_guidelines for open questions\n- üîß Improved rate limiting middleware\n- üîß Better Gemini response parsing\n\n## üé® UI/UX Enhancements\n- üíÖ New lesson section styles \\(Hook, Instruction, Practice, Summary\\)\n- üíÖ Responsive design improvements\n- üíÖ Enhanced animations and transitions\n- üíÖ Better RTL support for Hebrew content\n\n## üì¶ Dependencies\nClient:\n- Added: @react-pdf/renderer@^4.2.0 \\(PDF export\\)\n- Added: mermaid@^11.4.1 \\(Infographic rendering\\)\n\nBackend:\n- Added: puppeteer@^23.11.1 \\(Server-side rendering\\)\n- Upgraded: firebase-functions@^6.2.0\n\n## üìä Impact Summary\n- 17 files modified \\(983 lines added, 201 removed\\)\n- 9 new files created\n- 4 new documentation files\n- Zero conflicts with previous scoring system improvements\n\nAll changes tested and validated. Ready for production deployment.\n\nü§ñ Generated with Claude Code \\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git reset:*)",
      "Bash(git commit:*)",
      "Bash(node:*)",
      "Bash(git ls-tree:*)",
      "Bash(firebase deploy:*)",
      "Bash(find:*)",
      "Bash(git push)",
      "Bash(git checkout:*)",
      "Bash(npm install)",
      "Bash(firebase functions:config:get:*)",
      "Bash(start INFOGRAPHIC_CODE_TO_IMAGE_DEMO.html)",
      "Bash(findstr:*)",
      "Bash(firebase projects:list:*)",
      "Bash(firebase use:*)",
      "Bash(gcloud config set:*)",
      "Bash(firebase hosting:channel:list:*)",
      "Bash(git fetch:*)",
      "Bash(npx tsc --noEmit --skipLibCheck)",
      "Bash(cat:*)",
      "Bash(npx tsc --noEmit)",
      "Bash(npx vite:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Task assignments, enhanced student home, infographics & various improvements\n\n- Add task assignment system: AssignToStudentsModal, taskAssignmentService\n- Enhance StudentHome with assignments view and improved UI\n- Add infographic HTML templates and htmlToImage utilities\n- Update SequentialCoursePlayer with enhanced navigation and UX\n- Improve ShareModal with better sharing options\n- Add Gemini 3 image service for cloud functions\n- Update useMyAssignments hook with better assignment tracking\n- Various UI improvements across TeacherCockpit, TeacherDashboard\n- Add deployment documentation\n\nü§ñ Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npm install:*)",
      "Bash(npx firebase deploy --only hosting)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfix: Add side-by-side PDF source viewer in student activity view\n\n- Add \"◊î◊¶◊í ◊û◊ß◊ï◊®\" button to show source PDF alongside activity\n- Fix split-view to properly render PDF blocks \\(was treating PDF URLs as text\\)\n- Source panel shows course.pdfSource or course.fullBookContent\n- Respects showSourceToStudent setting\n\nü§ñ Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npx firebase deploy:*)",
      "Bash(grep:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfix: AI refine toolbar - plural form and consistent positioning\n\n- Changed button text from \"◊©◊§◊® ◊¢◊ù AI\" to \"◊©◊§◊®◊ï ◊¢◊ù AI\" \\(plural\\)\n- Made textarea wider \\(min-w-[300px]\\) and taller \\(min-h-[80px]\\)\n- Fixed inconsistent button positioning in UnitEditor\n\nü§ñ Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Enable editing of lesson objectives \\(goals\\) in TeacherCockpit\n\n- Add editable goals card with add/remove/edit functionality\n- Goals are saved to Firestore via onUnitUpdate callback\n- Hover to reveal edit button, click to enter edit mode\n\nü§ñ Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Add KaTeX math rendering to chat components\n\n- Add math formula support \\(KaTeX\\) to AiTutor, QuizBlock, InteractiveChatBlock\n- Add math UI components: FractionInput, GeometryShapes, MathKeyboard\n\nü§ñ Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Integrate MathKeyboard in AiTutor and InteractiveChatBlock\n\n- Add math symbol keyboard toggle button to AiTutor chat input\n- Add math symbol keyboard to InteractiveChatBlock  \n- Users can now easily insert math symbols \\(+, ‚àí, √ó, √∑, fractions, etc.\\)\n\nü§ñ Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git rev-parse:*)",
      "Bash(git pull:*)",
      "Bash(git stash:*)",
      "Bash(node scripts/check-knowledge-base.cjs:*)",
      "Bash(npx firebase:*)",
      "Bash(npm search:*)",
      "Bash(npm uninstall:*)",
      "Bash(node scripts/delete-student-books.cjs:*)",
      "Bash(set GOOGLE_APPLICATION_CREDENTIALS=)",
      "Bash(gcloud auth application-default print-access-token:*)",
      "Bash(node scripts/test-kb-search.cjs:*)",
      "Bash(dir:*)",
      "Bash(firebase functions:secrets:access:*)",
      "Bash(firebase functions:secrets:set:*)",
      "Bash(firebase functions:delete:*)",
      "Bash(firebase functions:log:*)",
      "Bash(copy:*)",
      "Bash(powershell -Command:*)",
      "Bash(npm run deploy:*)",
      "Bash(curl:*)",
      "Bash(node -e:*)",
      "Bash(node scripts/check-podcast.cjs:*)",
      "Bash(ls:*)",
      "Bash(start \"\" \"c:\\\\Users\\\\eyal.BONUS\\\\Desktop\\\\ai-lms-system\\\\scripts\\\\debug-podcast.html\")",
      "Bash(set GOOGLE_APPLICATION_CREDENTIALS:*)",
      "Bash($env:GOOGLE_APPLICATION_CREDENTIALS=\"C:\\\\Users\\\\eyal.BONUS\\\\Desktop\\\\ai-lms-system\\\\ai-lms-pro-firebase-adminsdk-fbsvc-0e6e4dfc5c.json\")",
      "Bash(node scripts/adaptive-system-test.cjs:*)",
      "Bash(npx firebase deploy --only firestore:indexes)",
      "Bash(echo:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Add mobile-optimized responsive components\n\n- Create dedicated mobile components for all main views:\n  - SequentialCoursePlayerMobile: Tab-based content/source switching\n  - HomePageRedesignMobile: Teacher dashboard with quick actions\n  - StudentHomeMobile: Student dashboard with bottom sheet\n  - LandingPageMobile: Simplified landing page for phones\n- Add useIsMobile hook for screen size detection\n- Create ResponsiveWrappers for automatic desktop/mobile switching\n- Update App.tsx to use responsive components\n- Remove \"Hebrew LMS\" branding, replace with \"Wizdi\"\n\nMobile optimizations:\n- 44-56px touch targets for accessibility\n- Safe area insets for notches\n- Horizontal scroll carousels instead of hidden content\n- Simplified layouts without complex 3D transforms\n- Lazy loading for mobile components\n\nü§ñ Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npx firebase firestore:indexes:*)",
      "Bash(firebase firestore:indexes:*)",
      "Bash(cmd.exe /c \"dir C:\\\\Users\\\\eyal\\\\Downloads\\\\*girl* /b\")",
      "Bash(firebase firestore:rules:get:*)",
      "Bash(npx ts-node:*)",
      "Bash(timeout:*)",
      "Bash(clear)",
      "Bash(C:/Users/eyal/AppData/Local/Programs/Python/Python312/python.exe:*)",
      "Bash(C:/Python312/python.exe:*)",
      "Bash(C:/Python311/python.exe --version)",
      "Bash(C:/Python310/python.exe:*)",
      "Bash(tasklist /FI \"IMAGENAME eq node.exe\")",
      "Read(//c/**)",
      "Bash(npx eslint:*)",
      "Bash(gh repo view:*)",
      "Bash(gh search:*)",
      "Bash(uipro init:*)",
      "Bash(cd:*)",
      "Bash(uipro --help:*)",
      "Bash(start \"\" \"c:\\\\Users\\\\eyal.BONUS\\\\Desktop\\\\ai-lms-system\\\\education-design-showcase.html\")",
      "Bash(start \"\" \"c:\\\\Users\\\\eyal.BONUS\\\\Desktop\\\\ai-lms-system\\\\lms-design-demo.html\")",
      "Bash(start \"\" \"c:\\\\Users\\\\eyal.BONUS\\\\Desktop\\\\ai-lms-system\\\\homepage-redesign-demo.html\")",
      "Bash(start \"\" \"c:\\\\Users\\\\eyal.BONUS\\\\Desktop\\\\ai-lms-system\\\\premium-styles-demo.html\")",
      "Bash(start \"\" \"c:\\\\Users\\\\eyal.BONUS\\\\Desktop\\\\ai-lms-system\\\\homepage-liquid-glass-demo.html\")",
      "Bash(start \"\" \"http://localhost:5173\")",
      "Bash(npm test:*)",
      "Bash(git rm:*)",
      "Bash(del nul)",
      "Bash(npm run test:coverage:*)",
      "Bash(if [ -f .env ])",
      "Bash(then grep -q \"GEMINI_API_KEY\" .env)",
      "Bash(else echo \"‚ö†Ô∏è No .env file found\")",
      "Bash(fi)",
      "Bash(npm run type-check:*)",
      "Bash(netstat:*)",
      "Bash(gcloud scheduler jobs run:*)",
      "Bash(npm run seed:bagrut:*)",
      "Bash(GOOGLE_APPLICATION_CREDENTIALS=\"../service-account-key.json\" npm run seed:bagrut:*)",
      "Bash(npm run remotion:studio:*)",
      "Bash(taskkill //F //PID 140316)",
      "Bash(taskkill //F //PID 156360)",
      "Bash(taskkill:*)",
      "Bash(cmd /c \"taskkill /PID 80372 /F\")",
      "Bash(gcloud config:*)",
      "Bash(firebase login:list:*)",
      "Bash(where gcloud:*)",
      "Bash(firebase apps:sdkconfig:*)",
      "Bash(GOOGLE_CLOUD_PROJECT=ai-lms-pro npx ts-node:*)",
      "Bash(firebase init:*)",
      "Bash(firebase setup:emulators:firestore:*)",
      "Bash(GOOGLE_APPLICATION_CREDENTIALS=\"$APPDATA/firebase/eyal_studio-wizdi_com_application_default_credentials.json\" npx ts-node:*)",
      "Bash(pkill:*)",
      "Bash(more:*)",
      "Bash(tasklist:*)",
      "Bash(forfiles /P \"c:\\\\Users\\\\eyal\\\\Desktop\\\\ai-lms-system\\\\ai-lms-system\\\\functions\\\\logs\" /M \"bagrut_seeding_live.log\" /C \"cmd /c echo @fdate @ftime @fsize\")",
      "Bash(powershell \"Start-Sleep -Seconds 300; Get-Content ''c:\\\\Users\\\\eyal\\\\Desktop\\\\ai-lms-system\\\\ai-lms-system\\\\functions\\\\src\\\\scripts\\\\bagrut_seeding_progress.json'' -Tail 10\")",
      "Bash(powershell:*)"
    ],
    "additionalDirectories": [
      "c:\\Users\\eyal\\Desktop\\ai-lms-system\\ai-lms-system"
    ]
  }
}
