{
  "permissions": {
    "allow": [
      "Bash(npx tsc:*)",
      "Bash(git push:*)",
      "Bash(npx tsx:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Complete exam generation system refactoring with dedicated architecture\n\nImplements full separation of exam and learning pipelines for scalability and maintainability.\n\nBackend Changes:\n- âœ¨ NEW: examPrompts.ts - Dedicated exam prompts \\(Temperature 0.3, no hints\\)\n- âœ¨ NEW: examArchitect.ts - Strategic test planning \\(The Brain\\)\n- âœ¨ NEW: examGenerator.ts - Parallel question generation \\(The Hands\\)\n- âœ¨ NEW: examGuardian.ts - Exam integrity validation with auto-repair\n- âœ¨ NEW: examController.ts - Complete exam pipeline orchestration\n- âœ¨ NEW: generateExam Cloud Function - Listens to exam_generation_queue\n\nFrontend Changes:\n- ðŸ”§ UPDATED: gemini.ts - Smart routing to exam_generation_queue for productType=''exam''\n- ðŸ”§ UPDATED: CourseEditor.tsx - Pass productType, activityLength, taxonomy to queue\n\nKey Features:\n- âœ… Zero conditionals - Complete code separation \\(removed 50+ if statements\\)\n- âœ… Temperature Fix - 0.3 for deterministic exam generation\n- âœ… ExamGuardian - Prevents hints/teaching content leakage\n- âœ… Auto-Repair - Automatically removes hints before validation\n- âœ… Dedicated Queue - exam_generation_queue isolated from learning\n- âœ… Quality Scoring - Guardian provides 0-100 quality assessment\n\nArchitecture:\n- 3-Stage Pipeline: Architect \\(Plan\\) â†’ Generator \\(Create\\) â†’ Guardian \\(Validate\\)\n- Parallel question generation for speed\n- Local + AI validation for reliability\n- Comprehensive error handling and logging\n\nBreaking Changes: None \\(backward compatible\\)\nMigration: Deploy with: firebase deploy --only functions:generateExam\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npm run build:*)",
      "Bash(npm run dev:*)",
      "Bash(timeout 5 head:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Major Teacher Experience & Content Generation Enhancements\n\nThis commit consolidates multiple advanced features developed by different\nAnthropic agents, including Teacher Cockpit improvements, AI-powered content\ngeneration, and pedagogical infrastructure upgrades.\n\n## ðŸŽ¨ Teacher Cockpit Enhancements \\(TeacherCockpit.tsx\\)\n- âœ¨ Text-to-Speech Integration: Added TTS playback for lesson scripts\n- âœ¨ Smart Infographic Generator: Auto-detect content type and generate visual aids\n  * Flowcharts, Timelines, Comparisons, Cycle diagrams\n  * Smart content analysis with suitability warnings\n  * Preview system before insertion\n- âœ¨ Pedagogical Phase Icons: Dynamic icons based on lesson structure\n- âœ¨ Block Management: Enhanced drag-drop, reordering, deletion\n- âœ¨ AI Refinement Toolbar: Improved UX for content editing\n- ðŸ“„ PDF Export: Export complete lesson plans to PDF\n\n## ðŸ¤– AI Content Generation \\(geminiApi.ts + CourseEditor.tsx\\)\n- âœ¨ Progressive Lesson Generation: Async unit-by-unit content creation\n- âœ¨ Auto-Generated Interactive Blocks: AI creates activities automatically\n- âœ¨ Visual Assets Generator: AI-powered image generation for lessons\n- âœ¨ Infographic Generation: Convert text to visual diagrams via Mermaid\n- ðŸ”§ Rate Limiting Protection: Prevent 429 errors with queue system\n- ðŸ”§ PDF Text Extraction: Improved file processing pipeline\n\n## ðŸ“š New Services & Utilities\n- âœ¨ textToSpeechService.ts: Web Speech API integration for Hebrew TTS\n- âœ¨ pdfExportService.ts: Lesson plan PDF export with proper formatting\n- âœ¨ pedagogicalIcons.ts: Centralized icon mapping system\n- âœ¨ infographicDetector.ts: Smart content analysis for diagram recommendations\n- âœ¨ infographicCache.ts: Caching layer for generated infographics\n- âœ¨ imagenService.ts: Image generation service wrapper\n- âœ¨ TextToSpeechButton.tsx: Reusable TTS component\n\n## ðŸ“– Documentation\n- ðŸ“ INFOGRAPHIC_FEATURE.md: Complete infographic system documentation\n- ðŸ“ INFOGRAPHIC_QUICKSTART.md: Quick start guide for teachers\n- ðŸ“ PODCAST_VOICE_SYSTEM.md: Voice customization documentation\n- ðŸ“ LESSON_PLAN_IMPROVEMENTS.md: Teacher experience improvements\n\n## ðŸ”§ Backend Improvements\n- ðŸ“¦ Added puppeteer for server-side rendering\n- ðŸ”§ Enhanced prompts with teacher_guidelines for open questions\n- ðŸ”§ Improved rate limiting middleware\n- ðŸ”§ Better Gemini response parsing\n\n## ðŸŽ¨ UI/UX Enhancements\n- ðŸ’… New lesson section styles \\(Hook, Instruction, Practice, Summary\\)\n- ðŸ’… Responsive design improvements\n- ðŸ’… Enhanced animations and transitions\n- ðŸ’… Better RTL support for Hebrew content\n\n## ðŸ“¦ Dependencies\nClient:\n- Added: @react-pdf/renderer@^4.2.0 \\(PDF export\\)\n- Added: mermaid@^11.4.1 \\(Infographic rendering\\)\n\nBackend:\n- Added: puppeteer@^23.11.1 \\(Server-side rendering\\)\n- Upgraded: firebase-functions@^6.2.0\n\n## ðŸ“Š Impact Summary\n- 17 files modified \\(983 lines added, 201 removed\\)\n- 9 new files created\n- 4 new documentation files\n- Zero conflicts with previous scoring system improvements\n\nAll changes tested and validated. Ready for production deployment.\n\nðŸ¤– Generated with Claude Code \\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git reset:*)",
      "Bash(git commit:*)",
      "Bash(node:*)",
      "Bash(git ls-tree:*)",
      "Bash(firebase deploy:*)",
      "Bash(find:*)",
      "Bash(git push)",
      "Bash(git checkout:*)",
      "Bash(npm install)",
      "Bash(firebase functions:config:get:*)",
      "Bash(start INFOGRAPHIC_CODE_TO_IMAGE_DEMO.html)",
      "Bash(findstr:*)",
      "Bash(firebase projects:list:*)",
      "Bash(firebase use:*)",
      "Bash(gcloud config set:*)",
      "Bash(firebase hosting:channel:list:*)",
      "Bash(git fetch:*)",
      "Bash(npx tsc --noEmit --skipLibCheck)",
      "Bash(cat:*)",
      "Bash(npx tsc --noEmit)",
      "Bash(npx vite:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Task assignments, enhanced student home, infographics & various improvements\n\n- Add task assignment system: AssignToStudentsModal, taskAssignmentService\n- Enhance StudentHome with assignments view and improved UI\n- Add infographic HTML templates and htmlToImage utilities\n- Update SequentialCoursePlayer with enhanced navigation and UX\n- Improve ShareModal with better sharing options\n- Add Gemini 3 image service for cloud functions\n- Update useMyAssignments hook with better assignment tracking\n- Various UI improvements across TeacherCockpit, TeacherDashboard\n- Add deployment documentation\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npm install:*)",
      "Bash(npx firebase deploy --only hosting)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfix: Add side-by-side PDF source viewer in student activity view\n\n- Add \"×”×¦×’ ×ž×§×•×¨\" button to show source PDF alongside activity\n- Fix split-view to properly render PDF blocks \\(was treating PDF URLs as text\\)\n- Source panel shows course.pdfSource or course.fullBookContent\n- Respects showSourceToStudent setting\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npx firebase deploy:*)",
      "Bash(grep:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfix: AI refine toolbar - plural form and consistent positioning\n\n- Changed button text from \"×©×¤×¨ ×¢× AI\" to \"×©×¤×¨×• ×¢× AI\" \\(plural\\)\n- Made textarea wider \\(min-w-[300px]\\) and taller \\(min-h-[80px]\\)\n- Fixed inconsistent button positioning in UnitEditor\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Enable editing of lesson objectives \\(goals\\) in TeacherCockpit\n\n- Add editable goals card with add/remove/edit functionality\n- Goals are saved to Firestore via onUnitUpdate callback\n- Hover to reveal edit button, click to enter edit mode\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Add KaTeX math rendering to chat components\n\n- Add math formula support \\(KaTeX\\) to AiTutor, QuizBlock, InteractiveChatBlock\n- Add math UI components: FractionInput, GeometryShapes, MathKeyboard\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Integrate MathKeyboard in AiTutor and InteractiveChatBlock\n\n- Add math symbol keyboard toggle button to AiTutor chat input\n- Add math symbol keyboard to InteractiveChatBlock  \n- Users can now easily insert math symbols \\(+, âˆ’, Ã—, Ã·, fractions, etc.\\)\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git rev-parse:*)",
      "Bash(git pull:*)",
      "Bash(git stash:*)",
      "Bash(node scripts/check-knowledge-base.cjs:*)",
      "Bash(npx firebase:*)",
      "Bash(npm search:*)",
      "Bash(npm uninstall:*)",
      "Bash(node scripts/delete-student-books.cjs:*)",
      "Bash(set GOOGLE_APPLICATION_CREDENTIALS=)",
      "Bash(gcloud auth application-default print-access-token:*)",
      "Bash(node scripts/test-kb-search.cjs:*)",
      "Bash(dir:*)",
      "Bash(firebase functions:secrets:access:*)",
      "Bash(firebase functions:secrets:set:*)",
      "Bash(firebase functions:delete:*)",
      "Bash(firebase functions:log:*)",
      "Bash(copy:*)",
      "Bash(powershell -Command:*)",
      "Bash(npm run deploy:*)",
      "Bash(curl:*)",
      "Bash(node -e:*)",
      "Bash(node scripts/check-podcast.cjs:*)",
      "Bash(ls:*)",
      "Bash(start \"\" \"c:\\\\Users\\\\eyal.BONUS\\\\Desktop\\\\ai-lms-system\\\\scripts\\\\debug-podcast.html\")",
      "Bash(set GOOGLE_APPLICATION_CREDENTIALS:*)",
      "Bash($env:GOOGLE_APPLICATION_CREDENTIALS=\"C:\\\\Users\\\\eyal.BONUS\\\\Desktop\\\\ai-lms-system\\\\ai-lms-pro-firebase-adminsdk-fbsvc-0e6e4dfc5c.json\")",
      "Bash(node scripts/adaptive-system-test.cjs:*)",
      "Bash(npx firebase deploy --only firestore:indexes)",
      "Bash(echo:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Add mobile-optimized responsive components\n\n- Create dedicated mobile components for all main views:\n  - SequentialCoursePlayerMobile: Tab-based content/source switching\n  - HomePageRedesignMobile: Teacher dashboard with quick actions\n  - StudentHomeMobile: Student dashboard with bottom sheet\n  - LandingPageMobile: Simplified landing page for phones\n- Add useIsMobile hook for screen size detection\n- Create ResponsiveWrappers for automatic desktop/mobile switching\n- Update App.tsx to use responsive components\n- Remove \"Hebrew LMS\" branding, replace with \"Wizdi\"\n\nMobile optimizations:\n- 44-56px touch targets for accessibility\n- Safe area insets for notches\n- Horizontal scroll carousels instead of hidden content\n- Simplified layouts without complex 3D transforms\n- Lazy loading for mobile components\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npx firebase firestore:indexes:*)",
      "Bash(firebase firestore:indexes:*)",
      "Bash(cmd.exe /c \"dir C:\\\\Users\\\\eyal\\\\Downloads\\\\*girl* /b\")",
      "Bash(firebase firestore:rules:get:*)"
    ],
    "additionalDirectories": [
      "c:\\Users\\eyal\\Desktop\\ai-lms-system\\ai-lms-system"
    ]
  }
}
