# 🎙️ מערכת קולות פודקסט - תיעוד

## סקירה כללית

המערכת תומכת כעת ביצירת פודקסטים **בעברית ובאנגלית** עם זיהוי אוטומטי של השפה ובחירת קולות מתאימים.

---

## ✨ מה השתנה?

### לפני העדכון
- המערכת השתמשה בקולות **אנגליים בלבד** (Adam + Rachel)
- כשהטקסט היה בעברית → הקולות שמעו "גיבריש"
- לא הייתה תמיכה בשפות מרובות

### אחרי העדכון
- **זיהוי אוטומטי של שפה** - המערכת מזהה אם הטקסט בעברית או אנגלית
- **בחירת קולות דינמית** - קולות שונים לכל שפה
- **מודלים מותאמים** - מודל מתאים לכל שפה לאיכות מרבית

---

## 🎭 הקולות הזמינים

### עברית 🇮🇱
- **דן**: `wizdi` (זכר, גיל בינוני, עברית סטנדרטית)
- **נועה**: `gil voice` (נקבה, גיל בינוני, עברית סטנדרטית)
- **מודל**: `eleven_multilingual_v2` (תמיכה מלאה בעברית)

### אנגלית 🇺🇸
- **Dan**: `Adam` (זכר, קול עמוק ומרתק)
- **Noa**: `Brittney` (נקבה, צעירה ואנרגטית, מתאימה למדיה חברתית)
- **מודל**: `eleven_turbo_v2_5` (מהיר ואיכותי לאנגלית)

---

## 🔧 איך זה עובד?

### 1. זיהוי שפה
```typescript
function detectLanguage(text: string): 'he' | 'en' {
    // סופר תווים עבריים (Unicode: \u0590-\u05FF)
    const hebrewChars = (text.match(/[\u0590-\u05FF]/g) || []).length;
    const hebrewRatio = hebrewChars / text.length;

    // אם יותר מ-30% תווים עבריים → זו עברית
    return hebrewRatio > 0.3 ? 'he' : 'en';
}
```

### 2. בחירת קולות
```typescript
// המערכת בוחרת אוטומטית את סט הקולות המתאים
const voiceConfig = getVoiceConfig(line.text);
const voiceId = voiceConfig[line.speaker]; // Dan או Noa
```

### 3. יצירת אודיו
```typescript
// כל שורה בתסריט מקבלת:
// - קול מתאים (לפי השפה והדובר)
// - מודל מותאם (multilingual_v2 לעברית, turbo_v2_5 לאנגלית)
// - הגדרות קול (stability, similarity, style)
```

---

## 📊 דוגמאות שימוש

### תסריט בעברית
```json
{
  "title": "היסטוריה של ישראל",
  "lines": [
    { "speaker": "Noa", "text": "היום נדבר על היסטוריה מרתקת" },
    { "speaker": "Dan", "text": "נכון, זה ממש מעניין!" }
  ]
}
```
**תוצאה**: gil voice + wizdi עם מודל multilingual_v2

### תסריט באנגלית
```json
{
  "title": "World History",
  "lines": [
    { "speaker": "Noa", "text": "Today we'll talk about fascinating history" },
    { "speaker": "Dan", "text": "That's right, super interesting!" }
  ]
}
```
**תוצאה**: Brittney + Adam עם מודל turbo_v2_5

---

## 🎯 שיפורים עתידיים

### 1. שיבוט קולות נוספים
- שיבוט קולות צעירים יותר לעברית
- שיבוט קולות עם אופי ייחודי (נרטיב, הומור, וכו')

### 2. תמיכה בשפות נוספות
- ערבית
- רוסית
- ספרדית

### 3. התאמת רגשות
- מיפוי משופר של רגשות (`Excited`, `Skeptical`, וכו') להגדרות קול
- שימוש בפרמטר `style` באופן דינמי יותר

### 4. אופציית בחירה ידנית
- אפשרות למורה לבחור קולות ספציפיים
- ממשק להאזנה לדוגמאות קול לפני יצירה

---

## 🛠️ קבצים שעודכנו

1. **`src/services/elevenLabs.ts`**
   - הוספת זיהוי שפה אוטומטי
   - הגדרת קולות עברית/אנגלית
   - בחירה דינמית של מודל TTS

2. **`src/components/PodcastPlayer.tsx`**
   - עדכון הודעת ה-footer לציין זיהוי אוטומטי

---

## 📝 הערות חשובות

### איכות הקולות
- **הקולות העבריים** (gil, wizdi) הם קולות משובטים מהחשבון שלך
- אם האיכות לא מספקת, ניתן לשבט קולות חדשים ב-ElevenLabs
- קולות משובטים דורשים הקלטה של 1-2 דקות דיבור

### עלויות
- ElevenLabs גובה לפי תווים שמומרים לאודיו
- מודל `turbo_v2_5` זול יותר מ-`multilingual_v2`
- כדאי לעקוב אחרי השימוש בדשבורד ElevenLabs

### בעיות אפשריות
- **טקסט מעורב עברית-אנגלית**: אם יש יותר מ-70% אנגלית, זה יבחר קולות אנגליים
- **מפתח API חסר**: המערכת תציג הודעת שגיאה ולא תיצור אודיו
- **שגיאת רשת**: בדוק חיבור אינטרנט ומפתח API תקין

---

## 🎓 איך לשבט קול חדש?

1. היכנס ל-[ElevenLabs Dashboard](https://elevenlabs.io)
2. לחץ על "Voices" → "Add Voice" → "Instant Voice Cloning"
3. הקלט 1-2 דקות של דיבור (או העלה קובץ אודיו)
4. תן שם לקול והמתן לעיבוד
5. העתק את ה-Voice ID
6. עדכן את הקוד ב-`src/services/elevenLabs.ts`:

```typescript
const HEBREW_VOICES: VoiceConfig = {
    Dan: "wizdi-id-here",
    Noa: "YOUR-NEW-VOICE-ID-HERE", // 👈 כאן
};
```

---

## 📞 תמיכה

אם יש בעיות:
1. בדוק את ה-console בדפדפן (F12)
2. חפש הודעות שגיאה מ-ElevenLabs
3. ודא שמפתח ה-API תקין ב-`.env`
4. בדוק שיש מספיק קרדיט בחשבון ElevenLabs

---

**עודכן לאחרונה**: 2026-01-04
